--% index/fmus
__PWD,d
  .,d(/load=__FILE__=index/fmus/under_pwd*)
--#

--% index/fmus/under_pwd
__REPLACE_WITH_PROJECT_DIR_OR_INPUT__,d(/mk)
	%utama=__FILE__
	.gitattributes,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/.gitattributes)
	.gitignore,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/.gitignore)
	build.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/build.gradle.kts)
	Dockerfile,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/Dockerfile)
	example-logo.png,f(b64=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/example-logo.png)
	gradle.properties,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/gradle.properties)
	gradlew.bat,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/gradlew.bat)
	LICENSE,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/LICENSE)
	Procfile,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/Procfile)
	README.md,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/README.md)
	settings.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/settings.gradle.kts)
	.github,d(/mk)
		workflows,d(/mk)
			main.yml,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/.github/workflows/main.yml)
	buildSrc,d(/mk)
		build.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/build.gradle.kts)
		settings.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/settings.gradle.kts)
		src,d(/mk)
			main,d(/mk)
				kotlin,d(/mk)
					jacoco-aggregation.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/jacoco-aggregation.gradle.kts)
					java-conventions.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/java-conventions.gradle.kts)
					project-conventions.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/project-conventions.gradle.kts)
	service,d(/mk)
		build.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/build.gradle.kts)
		src,d(/mk)
			intTest,d(/mk)
				java,d(/mk)
					com,d(/mk)
						github,d(/mk)
							al,d(/mk)
								realworld,d(/mk)
									api,d(/mk)
										operation,d(/mk)
											ArticleClient.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/ArticleClient.java)
											ProfileClient.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/ProfileClient.java)
											TagClient.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/TagClient.java)
											UserClient.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/UserClient.java)
									rest,d(/mk)
										ArticleApiTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/ArticleApiTest.java)
										ProfileApiTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/ProfileApiTest.java)
										UserApiTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/UserApiTest.java)
										auth,d(/mk)
											AuthSupport.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/auth/AuthSupport.java)
										support,d(/mk)
											FeignBasedRestTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/FeignBasedRestTest.java)
											LocalFeignConfig.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/LocalFeignConfig.java)
											ServerPortCustomizer.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/ServerPortCustomizer.java)
			main,d(/mk)
				java,d(/mk)
					com,d(/mk)
						github,d(/mk)
							al,d(/mk)
								realworld,d(/mk)
									App.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/App.java)
									application,d(/mk)
										ArticleAssembler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/ArticleAssembler.java)
										CommentAssembler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/CommentAssembler.java)
										ProfileAssembler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/ProfileAssembler.java)
										UserAssembler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/UserAssembler.java)
										command,d(/mk)
											AddCommentHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/AddCommentHandler.java)
											CreateArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/CreateArticleHandler.java)
											DeleteArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/DeleteArticleHandler.java)
											DeleteCommentHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/DeleteCommentHandler.java)
											FavoriteArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/FavoriteArticleHandler.java)
											FollowProfileHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/FollowProfileHandler.java)
											LoginUserHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/LoginUserHandler.java)
											RegisterUserHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/RegisterUserHandler.java)
											UnfavoriteArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UnfavoriteArticleHandler.java)
											UnfollowProfileHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UnfollowProfileHandler.java)
											UpdateArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UpdateArticleHandler.java)
											UpdateUserHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UpdateUserHandler.java)
										exception,d(/mk)
											BadRequestException.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/BadRequestException.java)
											ForbiddenException.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/ForbiddenException.java)
											NotFoundException.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/NotFoundException.java)
											UnauthorizedException.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/UnauthorizedException.java)
										query,d(/mk)
											GetArticleHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetArticleHandler.java)
											GetArticlesHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetArticlesHandler.java)
											GetCommentHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCommentHandler.java)
											GetCommentsHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCommentsHandler.java)
											GetCurrentUserHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCurrentUserHandler.java)
											GetFeedHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetFeedHandler.java)
											GetProfileHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetProfileHandler.java)
											GetTagsHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetTagsHandler.java)
										service,d(/mk)
											AuthenticationService.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/AuthenticationService.java)
											DefaultAuthenticationService.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/DefaultAuthenticationService.java)
											DefaultJwtService.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/DefaultJwtService.java)
											JwtService.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/JwtService.java)
											SlugService.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/SlugService.java)
									domain,d(/mk)
										model,d(/mk)
											Article.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Article.java)
											Comment.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Comment.java)
											FollowRelation.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/FollowRelation.java)
											FollowRelationId.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/FollowRelationId.java)
											Tag.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Tag.java)
											User.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/User.java)
										repository,d(/mk)
											ArticleRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/ArticleRepository.java)
											FollowRelationRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/FollowRelationRepository.java)
											TagRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/TagRepository.java)
											UserRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/UserRepository.java)
									infrastructure,d(/mk)
										config,d(/mk)
											JwtFilter.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/JwtFilter.java)
											LogConfig.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/LogConfig.java)
											SecurityConfig.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/SecurityConfig.java)
											WebConfig.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/WebConfig.java)
										db,d(/mk)
											jpa,d(/mk)
												DataArticleRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataArticleRepository.java)
												DataFollowRelationRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataFollowRelationRepository.java)
												DataTagRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataTagRepository.java)
												DataUserRepository.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataUserRepository.java)
												JpaArticleRepositoryAdapter.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaArticleRepositoryAdapter.java)
												JpaFollowRelationRepositoryAdapter.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaFollowRelationRepositoryAdapter.java)
												JpaTagRepositoryAdapter.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaTagRepositoryAdapter.java)
												JpaUserRepositoryAdapter.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaUserRepositoryAdapter.java)
												OffsetBasedPageRequest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/OffsetBasedPageRequest.java)
										web,d(/mk)
											ArticleController.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/ArticleController.java)
											ProfileController.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/ProfileController.java)
											TagController.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/TagController.java)
											UserController.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/UserController.java)
				resources,d(/mk)
					application.properties,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/application.properties)
					logback-spring.xml,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/logback-spring.xml)
					db,d(/mk)
						changelog,d(/mk)
							db.changelog-master.yaml,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/db/changelog/db.changelog-master.yaml)
							changes,d(/mk)
								01-schema.xml,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/db/changelog/changes/01-schema.xml)
			test,d(/mk)
				java,d(/mk)
					com,d(/mk)
						github,d(/mk)
							al,d(/mk)
								realworld,d(/mk)
									application,d(/mk)
										command,d(/mk)
											BeansTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/BeansTest.java)
											Command1.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command1.java)
											Command1Handler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command1Handler.java)
											Command2.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command2.java)
											Command2Handler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command2Handler.java)
										service,d(/mk)
											SlugServiceTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/service/SlugServiceTest.java)
									bus,d(/mk)
										Command3.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/Command3.java)
										Command3Handler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/Command3Handler.java)
										DefaultBusTest.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/DefaultBusTest.java)
	service-api,d(/mk)
		build.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/build.gradle.kts)
		src,d(/mk)
			main,d(/mk)
				java,d(/mk)
					com,d(/mk)
						github,d(/mk)
							al,d(/mk)
								realworld,d(/mk)
									api,d(/mk)
										command,d(/mk)
											AddComment.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/AddComment.java)
											AddCommentResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/AddCommentResult.java)
											CreateArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/CreateArticle.java)
											CreateArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/CreateArticleResult.java)
											DeleteArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteArticle.java)
											DeleteArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteArticleResult.java)
											DeleteComment.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteComment.java)
											DeleteCommentResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteCommentResult.java)
											FavoriteArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FavoriteArticle.java)
											FavoriteArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FavoriteArticleResult.java)
											FollowProfile.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FollowProfile.java)
											FollowProfileResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FollowProfileResult.java)
											LoginUser.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/LoginUser.java)
											LoginUserResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/LoginUserResult.java)
											RegisterUser.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/RegisterUser.java)
											RegisterUserResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/RegisterUserResult.java)
											UnfavoriteArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfavoriteArticle.java)
											UnfavoriteArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfavoriteArticleResult.java)
											UnfollowProfile.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfollowProfile.java)
											UnfollowProfileResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfollowProfileResult.java)
											UpdateArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateArticle.java)
											UpdateArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateArticleResult.java)
											UpdateUser.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateUser.java)
											UpdateUserResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateUserResult.java)
										dto,d(/mk)
											ArticleDto.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/ArticleDto.java)
											CommentDto.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/CommentDto.java)
											ProfileDto.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/ProfileDto.java)
											UserDto.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/UserDto.java)
										operation,d(/mk)
											ArticleOperations.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/ArticleOperations.java)
											ProfileOperations.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/ProfileOperations.java)
											TagOperations.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/TagOperations.java)
											UserOperations.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/UserOperations.java)
										query,d(/mk)
											GetArticle.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticle.java)
											GetArticleResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticleResult.java)
											GetArticles.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticles.java)
											GetArticlesResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticlesResult.java)
											GetComment.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetComment.java)
											GetCommentResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCommentResult.java)
											GetComments.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetComments.java)
											GetCommentsResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCommentsResult.java)
											GetCurrentUser.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCurrentUser.java)
											GetCurrentUserResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCurrentUserResult.java)
											GetFeed.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetFeed.java)
											GetFeedResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetFeedResult.java)
											GetProfile.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetProfile.java)
											GetProfileResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetProfileResult.java)
											GetTags.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetTags.java)
											GetTagsResult.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetTagsResult.java)
	service-bus,d(/mk)
		build.gradle.kts,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/build.gradle.kts)
		src,d(/mk)
			main,d(/mk)
				java,d(/mk)
					com,d(/mk)
						github,d(/mk)
							al,d(/mk)
								realworld,d(/mk)
									bus,d(/mk)
										Bus.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Bus.java)
										Command.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Command.java)
										CommandHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/CommandHandler.java)
										CommandHandlerProvider.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/CommandHandlerProvider.java)
										DefaultBus.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/DefaultBus.java)
										Query.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Query.java)
										QueryHandler.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/QueryHandler.java)
										QueryHandlerProvider.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/QueryHandlerProvider.java)
										Registry.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Registry.java)
	src,d(/mk)
		spotless,d(/mk)
			mit-license.java,f(e=utama=E:/desktop-laptop/_rwe/realworld-backend-spring/src/spotless/mit-license.java)
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/.gitattributes
* text eol=lf
*.png binary
*.key binary
*.jar binary

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/.gitignore
Thumbs.db
.DS_Store
.gradle
build/
target/
out/
.idea
*.iml
*.ipr
*.iws
.project
.settings
.classpath
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/build.gradle.kts
plugins {
    id("com.github.ben-manes.versions")
    id("jacoco-aggregation")
}

description = "Real world backend API built in Spring Boot"

dependencies {
    implementation(project(":service"))
}

tasks {
    dependencyUpdates {
        checkConstraints = true
        resolutionStrategy {
            componentSelection {
                all {
                    val rejected = listOf("alpha", "beta", "rc", "cr", "m", "preview", "b", "ea")
                            .map { qualifier -> Regex("(?i).*[.-]$qualifier[.\\d-+]*") }
                            .any { it.matches(candidate.version) }
                    if (rejected) {
                        reject("Release candidate")
                    }
                }
            }
        }
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/Dockerfile
FROM openjdk:8-jre-alpine
COPY service/build/libs/service.jar service.jar
EXPOSE 8080
CMD java ${JAVA_OPTS} -jar service.jar
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/example-logo.png
iVBORw0KGgoAAAANSUhEUgAABoUAAAEBCAYAAAC+OawFAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAABcRAAAXEQHKJvM/AACAAElEQVR42uydd4AkR3n2n6qesPH29nKQdCedck5IIJKQwAaRwQSbbPBnEDYY+7P7w2BMcmgbMMbGJoMNCJtgEEHGMkHkJEBCKKeTdDrdnS5sDjPTVd8fVdVdU1vdM7vbs7N7+/5gtTPd1W9XV3fPztXTz/sCBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQSwwrMlgcxwwAgiCQcRxzvVhmLdP7l24cq63Ur5nb3lnuHpMEwIIgEE6f7DhNffP0n+XtL+99m225JzbzHLN3e3fc7WV2P3zrfdu52xQZO6tdq2V5sbPO23xiZx2vL7aP+Y5dxjWWG3s+x2cvd2P72hIEQRAEQRAEQRAEQRAEQRCri1JRgbImuM0EtV4vnXXCN1Fv1tkx9Hrv5HaGyOLun1v7l9DCkCvm+GK3Ol5n/8yz70yxqNW4eib4vUJaG9vZ/U5imPFfiGjgxs+K3e6x2vEy+m6fw5bHulSxW8QtTHjNGG+CIAiCIAiCIAiCIAiCIAiC6C62GJK1LGtS29fOF28hsX0x25nMd9v6+pfXvp2xafV6PmO/mPXdir3YfS/n2O1cw4uN3an+EwRBEARBEARBEARBEARBEEcHhTmFDJ4Uct7UbK47JS9dmlmWt1/LTeR1fLh9dNqj1Tat4nj6Z/e/LQdSHMc8CAJhj9FCx77obZYi9nzit7vNUsRule4uK4VcXvx2+7CQ2ARBEARBEARBEARBEARBEMTqpPDUVu3UYpkPtkDim/BulbbO1z4jXZ1sN1ar9r7ts/ra5njl1jbybJ/UJtLrmoQyu4aRnabPNyae5Z2MDXu7nDFv6oMbZx6xm8bVPp526yT5xjyrnpKb4nCeseekW3Rie4+HIAiCIAiCIAiCIAiCIAiCIAyFO4WATIGjadIcqSDlExS8sWwBxJoc94kUMHV97H23Sj/nTuibSfy8iXfj7rH66jqEmN0XV8RxJvmzYkurPdfrhXsMdu0lZ/xkhhA2JwYyBBerT4uJ3dRPT+ymekS+8cqKnSVE+WLb58cjFrZVX8njCso7ry3HZL6x3XE0fW8zHkEQBEEQBEEQBEEQBEEQBLEKKdwpZGjDSeObpG/pyvE5ZfIcQT6XUV7bvP22e5w5To7c2O302+2Hr63vtW8fzvlrcshkxXSdQIuJnXO8mbE949V2bNPexM4aT2d/LEuEaseplNU+q21e+rcscWe+fSEIgiAIgiAIgiAIgiAIgiBWJ4UXp89Iz+ad5He3A7Lrs7SqMZSXOqzdCfP51DFyxQvfvhcZn2fFzhs/X/wMgamp73n7cB1Svva+VGrtHGuWwNdKWMtq64vdTrpAnyDlG892hDfPPWBiJgJWlng13/04/Z1zn5FLiCAIgiAIgiAIgiAIgiAIgjAUKgr5BKFWbh2nL9LzG26crH2bdm5f8vrZ6ljaFU3mM/E+39juep+Y4UtvlxXbcx7cbbwx3PpBbcafkxLPec9WQuy8c5h1zfte553XrOujXfGo1fUBgiAIgiAIgiAIgiAIgiAIYlVTePo4tx6PWZ+13F6fJxrluX3aEYCynDsLdVS0m/6rHeEnK7a7Td5yVxxq5bppd79ZsX2xWgkdrWJnnZtWfW8V2z4X89mf77jyHFk5/W5yCOVdG60cX62uifkIjgRBEARBEARBEARBEARBEMTqokhRyJ349tUM8tYRAtqvg9MiTRlz+pDEdvqaWyfIjd2qJpBvP3npwdqN3SpFWjuOkTbEh2TMCoxthL+s2F6RZCGxfdtmXV+t1rd5fnzXWOZ1nXe9ZOwXTvq6QmKTMEQQBEEQBEEQBEEQBEEQBEHwogIFQSA8ghALgsCIAk0T7WaS2n0NJBP/iOOYZUxqmwlwabbXP8LpU9PkvYnXQkRIYme1yXCbMLe/9ntrXNqOba+zY7nb5TlIWglC7pgtNrZ1fElsT7xMgabd2PAIJa0Eoax1nmtL5rSZc72a43SX++J79gcntlhIbN/6VsdOEARBEARBEARBEARBEARBrC4KE4W0aGHiSVuAcJ0QcRxz3dYWTbgrKEGLSiaOtTvpCj52m3ZSweW4ibIEgUTUceIz33aLiW018YocWeKHGeu81HZO37OEFTaP2E2Cm32OfH3wxXYFNLdtRmw239hO3+cVO0uQy9qfO25Zbecb23dO2o1NEARBEARBEARBEARBEARBrG4KE4XgiDm2IwRIHA/uJL49ce2mG5MA5kywZ4hNTetcd5C9vlXtIau/rjNGwkmF5gokzkR8Ziq8omJbvxfqCPG5j+xz0U7sOeKQK7pYwsycelJZ6fOsayArtusAazt2G/12rzuOVLizr2933DJx3WpOv1vG9jmo7Da+693qFwlDBEEQBEEQBEEQBEEQBEEQRHH43BF56c7y2vgcEL62vp92+ufrj+931rK8frnLFhM7q99Z2+WJAxljx7PGpZ3Ubi1is/nGdrdbCbHbPd9556zda2ChsQmCIAiCIAiCIAiCIAiCIAgCKNBBkJWyzTg4fI4ZJ62ct2aQG8/n/nDXufvIqtPj7teuieSrh2Pa2Muz0nTl9LPt2FlxWjhgkDPOyDhHuenSso65VeysdUXEnu827ZyvVrF9+7DPR97+fGPdatzzzu9CYhMEQRAEQRAEQRAEQRAEQRCrm0JFISumV8zxtG2nH27toDlCjhUzEVw8+8nsV5ZgZIs3PvHCSVk2J74n9pw0eTkiVlKfqVVsz3Zz6i3liWl5Y+LE9gpm841tv1+K2Pq1d1wWQs61nClm+o6lHXHPCcEyYrMgCIR9j/jGcTHHTBAEQRAEQRAEQRAEQRAEQRAJeenifO3y0pflpWTLW56VQm4+KdhaHVer5Xn7bXfM2omdNS6txm0hqeryzqXv93xjt5uqLiveYmO309d2zo+5ntsZl6zz0up6a6d9O+kUCYIgCIIgCIIgCIIgCIIgiNVHoZPGPkcNMNfNA8cl0ypVV6s0Wc4+EvdOq1RatjvF5+jxOJRgOzLc9Z60cPOKDct1lOX8sI/HcR/5toO9P3d8so7L3daN47q2nNhwtpkT2+OEspfPGe+M2O7x2v2b0w/fuDjny5fC0I2HnDZ5Kf6argP3GllsbHiudze2ff0QBEEQBEEQBEEQBEEQBEEQqxO++BCKVs4N623TxLW7nbvcnehuJST5Jr99Mez29mS9/t0kVFjLEiHLbq9/5qSaaze23taOJzz7zhpjGQS59Wa84+M7Ls9plYFHTGsRW7r9zjgPMutc+frlxvb0a07sVn13xmpObOs6k27MvOPzCDlNy51rKDd2q7pJdr/t+8eOjYx0dgRBEARBEARBEARBEARBEMTqojBRCNqVoF0VzPoBAOa4F5rW6wlsuy03Dg1XCPG5hkx8Z0KcOQ6PvPpBcNuZ2HZMd3mG+OUVq3wil+uesfuVUXtmTuws1419TuzxyTpuM2YeUcSczznCVEZs1yHm7bsTGxmxk+VubCPW5MS2z/+celFu332xPdemfczcdcCZ48kaI/c8O/eKfbzcEYjm9NHtizPmTfch1RMiCIIgCIIgCIIgCIIgCIIggALTx5m0ZFlp0vKEGM+6OSmx9D68k+L6d8uUcT5hJiu+26d2YrnbLnVsd12WyyQnlR7cPmXFzhu/vOPJitHq3LTqe6v+Zb1uN7bnusu9xtzznHct5MXOS8mYd37zUjISBEEQBEEQBEEQBEEQBEEQq5OOFaJvZ+LbbtvOJL2vtkvWhHjGJHyT2JRT40W2M4mfU9unqW27sd1tfOKRK74VMemfJTy0c+7mEzvvHC00dtaYFR271XEtZkzy1s93PyQGEQRBEARBEARBEARBEARBEFkU6RQyqaqE9b6laONz/2S5O8y6DOdRk+CSF7dVbN9+8hwhbp+zjmOhsbPiu+uzhKRWsd1jd2B2baROxs66blqNS6vYvnbzHHOu3wv7PZQI6HW1ZcXOEArh3DfMjd3OmOQJoSQSEQRBEARBEARBEARBEARBEEtGq5o2dht3Was2rdq62/jeu6+z9pO3bas+tYqd1X4hMd16Sq2O31fLKC92u+Np96WTsd2Y7vnPGvd2++2L0+pabXGcrMjYvt9Zx0wQBEEQBEEQBEEQBEEQBEGsTkpFBWon7Zhxa8ynRk47dVmy2jqp3RDHcRLDdY54XjMAc9w9nm2ZHddsb7dpFds3Rm6srON2x9uXys51JWWdh6xz64vdKr2Zc84WHdvtuxvbJ6I44+a6fea4trJi56XW86UmzDpOLXh5+zif2O6x2de5iU9p5AiCIAiCIAiCIAiCIAiCIAgXvvgQKWZivdVEtC3MmN95k+J2Gi8rdiL26HXMt61vv4s9xrz11uT8vCflW6Ufs1L0GYGhaV/WuMwRfjKEpiZhxOdq8ThNpE+Q8O0n63xYDhyedd7b6EuWWGeuaeaJLVo5dnyx2zyXTWJWhkglTJwswTNjH9IjnrmxpWnXzj1IEARBEARBEARBEARBEARBrD4KrSnUjhhjT7y7rg23fV5Mu21WfZ42hCLzXmYJU75YGePoukp4u7HdY81yifjGZaG1eBhj4JwnbYUQzH5v464TQjApW2sOGcJe1nHmjknW+W5nXOZbn6jV9ZdVPyqrthEyHETtXnM59aRyY/tiEARBEARBEARBEARBEARBEKuXjtUaaTUZnSdo5Ig7cwQS3z7ncexNMZx0c276uVaT6nNSn+XFtpbxdmNnxXHaNLl68s6BzeHDh0uMsV7MvSaElHJ63bp1casYPheL1SdpHW/St3bPTSs6GdvZhy0UMeM+8qUXbCVo+tq6sZ2xbSt2nnBGEARBEARBEARBEARBEARBrF4KdQoB2cJO3jb2dnmx8lxIee4Zt72bbs1M7LvLfDF8QpZnn4lAY8VuEiOyahRlHXMLgYpJKVmpVGoSbiYmJjiA3jiOexqNxvD09PRxExMT2wcGBrYMDw9vlFKuk1IOSikHAFQyRCEJYEpKWWeMTTDGRhljI0eOHHl4YmJi38DAwIO9vb33l0qlI0EQTAOYGRgYEHaARqPBGWMmVq545jlXvN32yBBpctolglyb8XNpRwTqFiQKEQRBEARBEARBEARBEARBEEWKQhxQdVv0+zmCh3lvbdPkAMoShrJq5njiwN4ma98LiZ2Tfm4+okKus6TN2Ek7KSVKpVIiwOzfv39dtVo9plKpHDMxMbFrZGTk3M2bN58wMDBwvJRyo5SyHMdxOQgClEqlRZ3vRqOBOI4RBEGdMVZnjD08Pj5+74EDB+5Zu3btjf39/Xc3Go09MzMzD2zevPmwtZ0RiJLDcGP70sjBIya55ylPsMtyzLQbe77XV6sUc3kip+sYguMSy4pt77tVukKCIAiCIAiCIAiCIAiCIAhi9VG4UwjITwM33/ouGcsynTye43PTrmWJQTYyx/WR1CFy9pGVlmw+sYEWjiK74fj4eO/IyMhpfX19j6xWq+dPTk6eOjAwcEJfX9/WBZzCwpment43Pj5+z+Dg4G0zMzM/n5yc/PHw8PDtAwMDk3a7DBHGHoemMZ+PqydPBJpHbPece+PbwqhvPx5H2rxjozkNX9M1mCcukihEEARBEARBEARBEARBEARBdCx9nL3M4DodMmLk1g1y2+eJTt2qp7LY/WbVlhkZGQmklDtmZ2fPqtfrl61du/bSUql0fLlcHgyCoK3YQgrU41nMNKZQF7OoxbNoiDqErGO6PgUpBcAYIAHJJDg4essDCHiAEqugHFRRCaqolvpQZmVw7t+vlBK2IyiOYzQajXEhxO5Dhw5dV6lUvl2pVG4CcN/w8HBdt2lKFZc3Nu2MdzspDBcSu939tXMdtLvNcrm2CYIgCIIgCIIgCIIgCIIgiJVLR0Uhs9wn3PhqAGXFyWtjCyd5E+W+NF55+3fJSt3VTqq5Vs4Wz/pECAKAvXv3Hss5f3wQBJeXSqXH9Pf3n1gul3PPh5AC47UjODJ9AA9P7cWh6X0YmTmA8dkjGK+NYKo2hpl4EtONKdQaU4hlDCll01UhJcAYA2cAZyVUeS96yn3oKfWjvzyEwepaDFbWYW3PBqzv3YINfduxrncjBivr4KSI810vmJycvHt2dvZHUspvCiG+tXXr1vudsfTWH8o7BxnXS1tiU17sVtdxRrzcVIftxM46PmQ4gNodI4IgCIIgCIIgCIIgCIIgCGL1UZgoBGSLGm4bX/ort9ZO1mS32949Hk9aOW/sjLozSZ98NVoWMgHvqw+TUXumqSbToUOH1k1PT18UBMGz16xZc3mpVDqhUqlknq+x2SM4OPUg9k3ch/vGbsPe8d0YmTmAidooZuMp1Bqz+tAkJACOAJwxgDFwxgEtAJk8eMavpQ5EQkpAQqgIUkDIOLl8GGOo8B5US70YrAxhbc9mbB88ATuGTsOWgeOwsW8b+itDmddNvV5HvV6/Z2xs7NtxHP9Xb2/vT9evX3/QNy7uuLa6Hn2Oq3au44WIKK22W2jcTvaZIAiCIAiCIAiCIAiCIAiCWD0UKgrZWAKLT8DJFEes7XNFnKwYbntkiAGtXDtZbX2unyxhye2v3Q+7f/ZxPPjggyeWy+WnSSmfvW7duktKpVLJO76igQfH78G9Izdj98gteGD0Tjw8/SCmauOQEGCMgzMOxhiYPs0cDBIMTKs+UiiBCAzgVmUbyQApZCIaqUYSekMtHElIAYBJSC00QUolGEH9ZgjQX1mDTf3H4Nihk7Fz6DTsGj4Tm/t3IMhIO9doNOJDhw79hDH2xUaj8aXt27ffZY2XN7XgfFK8uddXO+3nk+LNdx2516vnGvXSymHUbmwSiwiCIAiCIAiCIAiCIAiCIAigQ+nj3DRreenT8kQW97W7vpVY1GIiHb6+5MTN7ZtHIMgSh5Jxl1KyUqkUj46OlmZmZs6fmZn57Q0bNjy3p6fnWM75nP5NNybx4NjduOXgT3H7wZ9j3+S9mJgdQ13UEPASSqwMJQFJgDNIycCkBLhKBZfYgJgeJOnU/kmEoebGxjkkpRaDABUbAGuKrYQj1U55kqQQiGUDAg2Ug14MlNdg68DxOG3DRThtw0XYNrgT1VLvnGMVQmBmZmbP+Pj4FwBc1dvb+4uhoaFGo9EIGGP2WMus68u5JswykdXWWW4EKLudeS+zrkvftZx3TbTZF9815Gs7RzSj9HEEQRAEQRAEQRAEQRAEQRCEoXBRyIndNBGdVyeo3X3kOSzare+TJ2BlxfUJXVkT9O7+nWVMSilLpZIcGxtj09PTl3LOXzY4OPicarU66Nv/7tHb8Ov9P8QtB3+K+0ZvxWxjGpwzMATKDQQjIKk0b4yzRLyBhJGJwCSUWAQBYxGSyjuk2nEJKRnA1DJTYkjlm5OAAMDS2AxMi0DSOtlJRkAAEgwcQkpwruocCRGrNHRSoqc8gJ1Dp+P0jRfhzE2PwrFrTvKe99nZ2fHx8fEvCSE+3tvbe92aNWtko9FgLC1clJXyL3GrwSPGZFxXScwMJxAHIPIEoPmIolnXqO86a0NwtYUs6duGIAiCIAiCIAiCIAiCIAiCWL0UKgrlpV4zk/SOU2POJLbVL997luX0sPaRlUbO69bRZNYRcsfL3X8LV0dT3STjDJqYmOCTk5MX9fT0vKFarT65Wq2uSXqho0zURvDrAz/Cjx/8Ou4fvQOjswfBGEeZV8DBlQsnzeg254RKCb1SIm2YuoKkVHKQ2caOY8QgJfrIxFHEmTplWm5K95W8t5ewprPLJBIhSWorkYREQ8xCSmBt70bsWHM6HnXMU3D6xkegrzxXH5udnR2bnZ39+szMzD/09/f/dGBgQFjOIde9MyddX55bzE3zNzk5WT5y5MgTyuXy5aVSSdTr9W8NDQ19q1wuiywxynfdu+uzRB1rPbdj++K3GzurbwRBEARBEARBEARBEARBEMTqpHBRyOdusNv4ts0QVsz2whFyZN5+WtWGyehTU10f3/H4lvtiZaQhS9KW7d+//1zG2B8MDw+/qFQq9bh93DN2F3657zv48Z7/xoHJByAZECBAwEuJxgMpIbUuwbToojQgpsUeVSNIyCRbHIQETEY6oxEl4k+SGi4VbFR+Oy0KQe+Xq2VML2POeiOVSJmqW0370R2WUuWcS8oVQSKWDcQiBgPDtsFdeOQxT8a5Wx6HrQM751wv9Xp9ZnR09JNCiH/ZvHnzDXq8EwEuQwzk5lrKEQuZEIJNTU2VZ2Zm/nr9+vVv4FzVZarX63j44Yf/ZnBw8B19fX2zWhdyxUTuu46yrvl2agvlXZPzTYMIgiAIgiAIgiAIgiAIgiAIYlXTkZpCi2nfSuzJ2kdePHe5L3ZWP/LWw3GjuOullJwxJoIgkAcOHNjWaDRePTQ09Kq+vr6tbvv7Rm7D9+//Mn514Ac4OPUQSkGAgJWt05Q6flQ9IAnGWZPAkwowluXIpHsTyiVkyv8AAGfK0SMt8Sg9SJk4fxKrUyL6NPedQYtUAqlApV1Jc4QnplPU2dtb9iYpGRqoQ4gYG/uOwblbHofHHPsMbF9zwpwxnpqaemhkZOTD5XL5g5s2bdrrjnk76dpsQUcIEZTL5fpDDz30gvXr13+mXC6nA8CARqMhDhw48Nzt27d/qV6vB5xzkRXPdz1kpYLLqx00n9j2td3utgRBEARBEARBEARBEARBEMTqoTBRyCVP3HGdFWabPBHGF9PeLs9tAccJlOfyaREnKwXdHMeISRV35MiRnomJief19vb+ybp1685hTr633SO34nv3X41fPPRtTNSOgPMAASslggrTezHmG5OGzT4ypm08JiFcs1CU2IAACQipU8jptHCcpXWFpJTaCaR3pA9NplWJlDZlEsEx1T4ZAFj9TRbKxMGkYqcNjaPIFoqS10yiETcgpcBgdRjnb70Mj9/xHBy75sR0xHWMw4cP3zAzM/P3AwMDX1i7du2sSSlnucwy0xOa8yml5HEcY2RkZI2U8tObN29+imksZZp27/77779qYGDg9/r7+xvlcrnhnv+sazMjfaLdF/e689YGsl77nE/M56xzr3WCIAiCIAiCIAiCIAiCIAhiddIxp5A9aW2WtxJcDK3Strnr88Qit49ZdYey0sC5x5cV22qTuIf27t17VqlUCoeGhp5fqVTKdtuHxu/Dt+/7HH7+0DcxOnMI5aACBp4IP8nZMbV4ktRxAHiiiCiHjrRm/7VIJGVa4cfkmLNdO2YLKZskn0SAYlo0YmAqi5wAJJc6TRyzdCaZCE8SLBWA4ChmEmDcvDMHlgpZQkq1XgtHpg8AQyxjNOIG1vVuxkXbn4RLdzwXG/q2NY19rVarjYyM/KcQ4q+3bt16W6PR4LYA59YXcq5JJoTgMzMzYnR09LINGzZ8pVqt9gDAPUd+DQA4YfhMAMD09PTehx9++PEbNmzYU6lUGpxz4Yudda1kiaR511xe3aqsazvrOiYIgiAIgiAIgiAIgiAIgiBWLx2pKQTMTY+VlS6rnXZZr7Pem/7AqUFkHXMiu2jhqsmxlNG33DYAmJSSCSHE2NhY7+zs7Iv7+/vfNDQ0dJzdfmz2ML57/5fw3fu+iMPT+xGwEoIgAEyytlTvSd4kVhItckgpTMWeJuEoOanW9qkuwpzaPgyASMSjJvcPAEhmfEdJTFNjSDfQdYXMSiQCk3HwJOIRS40wqTtIR3EEMBPb7qepO9SI6xAQ2NR3LC7d8Vw8+tinob+ypul8jI6O3jM1NfWOarX6n4ODgzOcc84Yc1P8Ne9NSt5oNEoTExO8Vqt9ZOvWrb9jaiv968/eiM392/Hc0/8QANBoNHDPPfe8auvWrZ+sVqsyCAJhxW/SwZz9+ZbP6UsbMdBm+6bYJA4RBEEQBEEQBEEQBEEQBEEQhTuFbFrVC2rRLzclG/M5Lnz7bNeR5OujL35eDSNAiQomXdlDDz10ipTybRs3bnxeqVTi9jY/2/tNXHv3p3DvyC0oByVwFkAKAFyCybTeT7JRIvjY2cV0XSGJJneP7ogWUZQqlDp/VNTU/WPamXRzqTvHuIpM8PQgdT/0vk0/XJHH5LmTTKbCVVP79CCbum3qEgFg0kpZx5glehnnUANCxjh53Xn4jRNegnO2PLrp3DQajcbBgwev4py/bfPmzfc0Gg0OgJlaQ875Y0KIoFaryYMHDz5q8+bNX6tWq4MAsHvkNrznx1di++CJ+KOL34tqqQ9SShw4cODTQoj/Mzw8HJfL5YYdN+taaqcekN2v+Yg4rdItthuHIAiCIAiCIAiCIAiCIAiCOLopFRWoVbo1X5uMOkPe+j9u3KzUcVmOniw8+/a20S99rg4mpZSlUkk88MADz+3v7/+rwcHBU+ztHxrfjWvu+jdc/9A30IhrqASVVCBBWgMISI04dj0hU7fH/FcKJaCYVG2OjgOmA0urt4xJSGG5doTexrh/pBGaTG0f6DZp3joGNbQmZZzUYg3XfWwSjaSKbdoyMC2Aae9TIhQhEab0kSdCkG5uDbwSn0qsBCkD3HHoF7h35BY8cvtTcMVJL0tSypVKpdKWLVteOj4+fv6ePXveXCqVrq7X65wxxuM4tgUcBgBCCExOTpb7+vp+zwhCAPDDPV/DZG0UD4zegT3j92DX8JlgjKFcLl80NjZ2vJTyDiklY4y1LVq6YmO7qeXc5Vn3ld2WBCGCIAiCIAiCIAiCIAiCIAjChi8+hCKOY56V1i2OY2Z+7PVmndWGwzKnmEnxVm4hZ5K85US4iWFim77Zsd02+n3yWkoJKSUPgiAeHR3t27dv39s3btz474ODg6eYmjoSwHfv+xLe+9PX40d7vgZIoBxUkYoyWupgDEIiEX+SIkFIhZcmtIIkEvFHOYCktNpLQIpEJoIwwpPk1plnOiUdg5ASgqXp5iQAcAYJoTUhJfCotHAcJr0aN31k0hJ79A4YwLlOTsfSwkeSSS0gmX7bZ10LXYlYlJZSgtSuIdU5lIMeSBnjO/d9Ae/9yevxkz3XNg3T4ODgmRs2bPjUgQMH3jw+Pl4NgiDWqeLMdS/jOA7q9XqjVqtd3N/f/0yz7d6J3fjlvutQCqqYEVO49eGfJXEHBgZOAHDB7OysFEI0XbP29WP/2NeYfT3b94W73HNt58b2XdPufUcQBEEQBEEQBEEQBEEQBEGsXgoThYIgEKb2Ts5EdK7rR8cQPkHJnux29ivzfnv6KfMm3H2x3W3jOOZSyqBUKjX27t17MoBPb9y48S+q1WofoGr/HJzaiw//4i/wqZsiHJnej2qpF4wlWoQWaLSLRjJwZlw+qSPGpHdLiiOp4NYyXXtHp39j2mHDdCDG0jRyyuPDtCCjT0ZSxAhgloPH/JZK7VFajHEyJc4h7SxKSwylx9XUZyPwmH4bR5KEFGlj0//EDSXT40ouG21BUvHMa45qqQ/7J+/Hx258Gz5x419hdPZwcs6q1erA+vXr3yGE+MS+fft2lkqlWEoZQDm8uBCCT09P9zPGruzt7U0KFH33vi/iyPQ+BKwEDo6bH/4RhFSlgyqVSiClfFytVuuRUjKpbU729eQTQV1x03et5i1rN7YtcJJjiCAIgiAIgiAIgiAIgiAIgjAUJgpZzJmAtp02tiBjCz2+SW3XFWSLSPo1s3/bacGs93YsFscxdyfR7Zh5Tgv9m0spUS6XG/v27XtsqVT64vr165/BeTqUv9r/fbzvp3+Mnzz4dXBeQplXlKuHmbo5DIJpWUO7ZqSQEFIYuUXX3tGyD0tMMpBSKoFGiyVJdjmpUsMxbtw1WoThgExS1WlBhUGlcrPPlGSW8JTakxhHso1ZJi3xBzwVioxwJLWgJCXAhJKkEiMUM0fIktj2pZM4ihggTJ0jI1wxazCANA4DyrwKzhi+d/8X8U8/fQNuffin6UXOOdavX//8IAg+99BDD11cLpfrWrwM6vV6Y2Rk5PKNGzcmLqH7xu7Az/Zei4CXwRjAeYCHJu7F/aN3JDGHhoYeOzMzsyWOYyalsl+5qd7aSfeWt94VjrLcRhn32rzraxEEQRAEQRAEQRAEQRAEQRBHN0Wmj5vjXGg1KW1PcmellmvD6dBUg0hvb7uN7Ml0EQSByNuXE9cWjDgApuvPyPvuu+93BgYGPrdx48bTzQa1eBZfueOj+PAv3oKHJnajWupT6dWSSj3a4WJcQkgdNDA1ghLhBFogSZSRNIZSh9QLN3GelImAY8QZJiUYl4noI6WpLaTdQLpfJoublFI7h/SujR3IWIOsVHcsEW20uwhMiVPahSSZTmMn050n42HlxpNJgSV9WFqkYokdSeo0c5bTCelyJT1xVINe3DdyKz7wizfh2rs/jYZoJMOzYcOGCwcGBj734IMPPnNyclLW63U2MjKyZWho6P+Wy+UKoFLyfeue/8TIzEGUWKCHmWOyNoZbLKFpaGho19TU1DmNRkMKIZiUkrvuNvu+yPrt3gsZ23LXhTTf2CAIgiAIgiAIgiAIgiAIgiBWPYU7hdwaJwaP6NLUPq9NVi0hKDFIQEsjeY4MR3iyHUbc3Zfl9kjEJSEEF0JgYmKiNDo6+ocbN278UH9//2az3aGpffj4DW/Dl+/4MGrxDEq80lTTx2RqMw4dkyhNGnFH238Yk9plw1LhBKnTxziHBEs0KyXoGHcNGKRUuegY1+nXmE4dh1RcMs4jxtI2MK4lxuyWiZAkwZL4kln7lAAzoo4w9ZSkyUmnBSipjk3bjsw+hKkfxBiEZLqfukYRU+/T9HJGHxK6jpERomA5jBgqpR7M1Cfwhdvej0/dFGFs9khyfgcGBo5du3btx0dGRl55+PBhVqvVXrRu3bpHm/W3Hfw5fr73mygHVQhTQ4kzxGjgriM3oC5qamQYC3p6ep5Qq9W4lJIzxuBzt8GS7XyijbuNL4a5DrNi56VEpPRxBEEQBEEQBEEQBEEQBEEQhKHImkJzxCCTqs1eb15bbbwuBtdBlCUYabw1V4zg40k3l6Sz06KS73iEiSWlDKSUYmxsrGdiYuIvtm7d+u7e3t5+0/bekZvxgZ+/ET/b+w2UeAlBUDL6ROrI0SnZkpo7pgG4EnE4tPLCtGtINpmATOo0pkUYrp03Uv+kTqR0n8pFw6BL4aRp6XQKNq2pWM4fvW8JQMAShnTNIqQiUipy6X5yq5iQtY1xD0GLPhBIXFIAA9ep7dQxyKS2EgBIKRIXlZS6zhBYKnYJtY4zJOuNahbwMjg4vn//1fjQz9+EB8fvScayr69veOvWrf/QaDTetX79+tcEQcAAoB7XcM1dH8dMPA0hGzhu6BScsfkSCBmjzKq4f/R27J94AIBKSTcwMHDx2NjYJiGEFELMERi1ICOs11nXadN9kXefOKnlkmvUJ4C68QmCIAiCIAiCIAiCIAiCIIjVTUecQnYNIXcdoMQiOLV+kLp97DRc3I7pxtFtWFY/zP4dZ9GcdHFubSN7Ul0IEUgp47Gxsd7Jycm3bdu27U2lUqlk9nPD/u/hgz//c9w7cjMqQRWccTDJdBq31HHDJEvr6TDtpJGyKY2bccwknQWSVHKJIKOPyihZTAs8JhMbY0bwsYZFL4PRnqzaPwwsdQ3JZHeqVpBOCyeN08hanxqcLFHHToFn0snJtJ/cLGfJ0SFVmExctb0aqrS2UrJfBkihHURc1R1S9ZBSUcqIQ4xxVIIqbjt0PT5w/f/DbQevTwa2Wq32HX/88a8dGhraaVLXff/+r+D2Qz9HwEsAAjxh52/hiTufB0gg4CUcntqPe0duTvra29t7ehAEZ9Xr9djUFXLrY9nXpFtvyP1x29rCqJtiMUNImnNNk0uIIAiCIAiCIAiCIAiCIAiCMBRZU4jDkyrLvPakZRPWMuPasX/DvPbVWnEnvX11VdwJ8TynhuMkAlT9oEBKGY+Ojg5MTk6+d9u2bX/CeTpkP3jgq/j4DW/Hoen9qJZ6YCrzSG0JUvV8YJZo8UImtX6A1I1jxBqVOi7to0kFp3QOkahs3KRTY1IJOCxN9iYhm+KY9G2J20aqJG2mvakL5BZUEnpbpl08TFt/jN6ku6bEHmZSzKXtpXb+6NZJTSCmj0ulgxNNDiqVAC85mMRtJZlVw4jpHHwSqmYTs8xeet9qxxKMcVSDHuybvA8f/sVf4Pq932quwwQlZu2feADX3vNpMAnEsoET156J87dchmPXnITNA8chlnUEQYCbD/w4OXd9fX19cRxfNDs7WxZCQEo55/r0XY9u7SGfo8cRUOEKRK4zzziHfLGLuscJgiAIgiAIgiAIgiAIgiCIlU2RTiEJQLoT275JadsFYS2eM4Gd53JoVZfFajOn7orHodFkzjE1hKSU8fj4+MDk5OR7jznmmFeZNGNSSvzP3Z/Gp34VYao2jjKvaE+NdgQh8cEoYcgebWZesmSPSkAxdp00lZqu5qNECAkwoVO3cSQ1hkwMU/cncfqkUbUjCdoKlNb7SWSgxKEkdUkglvbfNDA1kEwauyScEmyY6auQSf0iY9ViWiCT1vGBCb2OgzWd9bStqq9kFsvkiLT2osQunXKPIc2hZ3pgajFJAJWgB2O1I/jEje/Ed+7/UtO1JKTAV+78CA5M3Y8gKKMS9OApJ70MlaCK/soQTl1/IeqijgAl3DNyE0ZnD+r9M1QqlcfHcTwoRCJMMUuw4Xmutqzr21kus8SkrPvBd08QBEEQBEEQBEEQBEEQBEEQREfSx7muHVt4cUQYe/K6abm9vbUdfO4g89rnDNKuJJnlXHJqDAEAtENIjI+PV6enp9+5ffv237UdQl+98+P44u3vB5hEJahae5SmpE0ysKYGj3G+JAeZ1OgxLiCj7EDV2VESk/qftgFJ01igKa0cmHH/pGJU6hxSKlIiLOkNlNtF9VIm2orZl3LipGWChGqfuHxkIjAZlcc4mhg3Ag1Ljk8rX2mmOCaTdG+mX039ZlpQksySlpAMYuJUkka8kkgPXqa1kxjAjItISlSCCupiBv/56/fgm/d8NjlrP9rzdVy/95uoBj2oNabxyO1PxhkbH5msP3ndeegN+iEZMF4bwe2HfpmsW7du3blTU1PHx3HMhRBuCjmZdQ37rm/XFWdf6xmv5wiwdmxfbSKCIAiCIAiCIAiCIAiCIAhi9VKoKGSJL76JcGFNXAtf+itYNYhcIcmXfiurPpDTl6Z+OK/npPkSQgRCCExMTJSmp6fftm3bttcFQQAAEDLGl2/7EL5650chJcAZT+oEJS6fVKZIageJpnRwOQPIUocQSy0/lv4iEucNJE9FEaFr+xhfDzMOpVR4Me9kUtPI9NL+rV9Lq06RtGKbGkHMFmTSsy2btRk1ZkK7foyDSsJKY6fbmH0CENJyTeljNe9Nf+x9GhUuPRKeupukSkZnJdVDwEuIRR1fuO2f8e3dn8d9o3fga3d+FELWURcNbFuzC1ec+HJ1bjUnrjsH6/u2QsoGao1Z3H7o58m6np6eNfV6/ZI4joWUkkkpbXHSV/cHrVK65Qmfzms539gEQRAEQRAEQRAEQRAEQRDE6qVUZLAsEaZVW1fUsZ0WGdswu36KtY4FQSDcbbJqu7hxpZRcSimnpqYwOTn5+q1bt/4xY6lYcc2d/4Zr7v53cMbAWZAKL8o+o9OYMV1HyDhqmJXSTYJJpmrxWG0YeKKoSJ0bTspUxJEQYDq2cRUxS4jRoZHakexUb5ZuZWoH6ZFl3Ag4zToCswQXc2gs1flS4YexpL6Oemve69pJTKfUM7tIM7wpYUpAC2FWDSGwtA8sPT4TIzFdafGIc0AY4xKz7FgmdZ6JnYwRUOJlxDLG1Xd8EGsqG3B45iG9TODpJ78KG/q26rFVdZSGetZjx9pT8dDEveCc4f7R2zA+ewSD1WFwzrFu3brHzczMfLBarQrOubBcPsm16Lsf2lmWIWZmvs5bRhAEQRAEQRAEQRAEQRAEQaxuCncKWWmzuKmrYv8GgDiOudM+2d68tsUctxaQjj/HHQRLRLIFJDsVV4bopErkSMmmp6fFkSNHXr558+Z3BkGQiGZfv+vf8NU7PwbJlIgjtRXIFn9MijSjXDDWLKQADEzXFZIsXQbLGWTLM0p40fV/rPiMIan9w/RZtPckE+eMFmd0MMZSd05Sl8i2+5gSRVY6N1OraM7xKDuSOl4pkz1D99lOByfMkDCTzo5pUcoSgDwWKuOQYjoVHZd2N9UyIezYMhGeUmFLNMVSx8QQsADTtSnsm9gNhhLqcQ2PP+45uGjbk7zX9lkbHw0OhoCVsG/8ftw3dnuyrlQqnT02NrZLCCGkKniUl6pwznL7vXPtth0jaxsQBEEQBEEQBEEQBEEQBEEQhKZQUSgjFVxT+jjzOmtbW8Bx66pk1UlpMfnd1C7LMSSE4OVyuTE2NvabmzZt+ttyuVwx666770v42p0fB4NEiZXSGX+hnTDG9SJ1kjJz9FbaNFtwYYnSkjpfTO0gaWoDNaWck4BUdX2kUPtK3TJOISYwMKbrAUmZOm2MicaIJpCJyGMSrJk3RjyyhR21rXHfpCWgUg2ENbuWtLUnSSmXpH6TepyaHU/M2ZeJYwQjCUBy4whKtzEimS1wSasvRlCSSXDTB6DEA5R5GbV4GieuPw/POOVV6XijWQTbNXw2BirrADBMNyZw75Gbk3W9vb3H9vX1nVOv12MtCs1JcegTQPPe22Sty4ptryMIgiAIgiAIgiAIgiAIgiAIQ2GikC3kuIKLnb7NTeXmtsmrpWLXarH341vu9s91C5llcRxzIURQLpcbDzzwwHmDg4P/1N/fv8Fsd/3eb+Dzt/wj6qIGzoJE+FE1frSwIRMNRKdLs2vcyETA0ZvAVPhJBR3T3krFps+MLRqlK1NnDLM0JyPYNNXeQbNoxJhMJB2pnT7SXAjGSZRmoEv7YNK5NXUz3RFjUgtNqbBjVR1qipMIS1adoEQ7a9rEFs6kJfogGX+zTRJTVYZKHVvJCAJSinQsdD8asoGNfdvwO2f8CQYqa/WxzNUY1/ZuwMnrz0ND1BDwALcf+jnqcQ0A0NPTU47j+MKZmZmKlJIJIZL7yufs8V2b7nVqL/fdUxmxm+5nt64WQRAEQRAEQRAEQRAEQRAEsbopTBTypHiDZ3LbTRs3J2WWNbnN3Eltax/CXubWcLHFH99EulNDiAshxL59+zZVKpV3DQ0NnWiEibuO3ITP3PwPqMXTKAflxAXEmBF0lLIgYIQE7VCRlujDUpdK8toWjZgpiNMskCRCU1JnRzmJTBo3KRm47c4x6dNgp6VrdgiBSUjdDwir7pF62+S0sdOwSQBSyMQZZZw4SjvRnh9d4wcyydiWHD+s/pj9MkvmYnr7ZvFKH5MW4ezxM+ntZKqEaUFL5+WzFC0p7dhMp91T7WtxDdVSL553+utx7NDJTfWRzHZmWcACnLz+PAgZg/MAe8fvwcPTe5P21Wr1EiHEeiHsPfjvB/tabHWNum1c4dWJPccVR44hgiAIgiAIgiAIgiAIgiAIwlBo+jjA727wuXN8rgbrbVKXKC8tVtaEt+vIsF1M9nY6XZucmJioNBqNt2/cuPEytRx4ePJBfPLGv8aRmQMoBRXt92Gp+0QLE0xqscJKeya1WGIcQmoTx+mSpGPTcoW0RBTpiB/MpKUzhyRUDSLHKZOksmNIahQ1CSdgSU0hMKZPPkvdPaZvsBw1ZnstSElnv2aHzBa9WLpL8x6QSq/hqUCTljNi4Iw1uZNUbG52nnaFQaXGY65jiKmiQ8b9ZLmlmNWWczVOsYjBeQnPOuU1uGDrZXOuIXU8rMk1dMLaM7GudzOkEJiqjeGuwzcm6zZt2nSelPLYRqORWdvHdQHlOXl8oqYrvObVGspLR0cQBEEQBEEQBEEQBEEQBEGsTgpNH2deWxPUTZPWpq6QdvRI631WvZQ5gpAtNrmT7PZ7N02dJ30di+OYl8vleHp6+uWbNm16lREApurjuOrX78Ke8btQLfXCJH1jslmFYUwqkUTadWi0WQWw3EQmAZrajjNAaPeLcd0I4wxCGkepH1ZKNSYgGSAk0+4dE1qnhNMOIlgCk4RyB0lTd8cqLCSkW49H98m0d9OzmWNNXEiy6XjVujQ9nXH6WDoSILmOnybMk9JJNGfG1oyGEdxEWovIjElq7pGQ4AA3Lq6kSlKSmk9qh1eMOqSUeMqJL8NlO3+r6bqzHUK2UwgAtg0ej839O9CQDTRkA3cd+qW9vjQ6Ovoofa0FUkpmi5pZaeHseybP2ZN1rbt1hXzXPKWQIwiCIAiCIAiCIAiCIAiCIICC08d5Jp/tCe6mdT6ng10byI5r2pvfrsPCTUfnS9flTMgzIQRvNBrxnj17Lh4eHn5LuVwOVIclvnLHx3DTwz9ANejVgoYWQxJ1gyViSuL0QepI4cIyFCW2Fb1dknqNJenXWJKKTTuPTETtMkrcPZKlbY31RehtpNTeG5nU85ES4Cbhm9lOC1Gm/o9x+UAvZSJ1L5mzl0g20riaVM0eKfSxyLSPnLHEpcTM+CS58HRQmSaQY1IqcUl33fiCpGT62Gyjk2oPPUbc7mSSts86LqiOsVShgpQCsRC4bOfz8bSTXqE2tYQf1yFkO4XKQRUnDJ8Jrnv5wNidGJ09lLTbvHnz42dnZwOrplDTNete//Z94F6v7r2V1y7vPQlCBEEQBEEQBEEQBEEQBEEQhKHw9HG2QOMIOcJKHWdVgrGrwjS39U2cW/hcFU1OCrtP9m8pJRNCxBMTE+v6+vr+uq+vb4tp+6MHrsF3dn8BASvrjGm6aBCs+jisuSqONFYamaaYYya/mZW+LanBw6QSHgBdkCgVlcwZMWnnzDKT4o1pyw9LnEppzaLEIcSlVVdHCz52Crn0JSSE5RySaeo7aXU/2Vgm7iBzrGkaO6nq9UiWprFLDp1BJE4qLUkJocaNpw4mZtVWMuPMuFonzZgyu/86lq5nxJIUfTI5fAaeuooQoyEauGzH8/Dc01+LgJd0n+YKQL73AHDK+vNRCXpQ4gEentqLB8fuTtZVq9WzJicntwCQWhhirmPHvS7d69oWgMy9Youlzv2DvNi+1wRBEARBEARBEARBEARBEMTqpVBRyJmIFtaEtZnIbkorZ9LImW3c2itZtVh0c68bwhWSnAl0M1HPJycn2czMzJVDQ0OXGafIA2N34it3fgSxrKPES6nAwHVaN2lqARnBRP03EXhUMjidpswSbiwnEGBkGZnU+zFp5QDLUGPq5hhlxpiAWLKRldYtHYy0NpAWWJhQ6dmSdGtaSDL55BLlSbljTC0jJbg01xqy9yuZ1DV8TNI7U89Ij4yxEJkLLdHIUpGKMXs0WJKWDtaxSOMq0vtMXT16HIzjikkAXLfRgo4ZUw4I2UBD1HHZjufheae/DiVebtqX7Ray08a5aeR2rD0dQz0bATDMxlPYPXJzeoycb5FSnlev12Mp5RxFyRUnXeeP53p3r3lApV2cszwvNrmFCIIgCIIgCIIgCIIgCIIgCKDgmkKeGiZNk9v6d1JLyGzn1g/KSvvmxvdNfLuCksG8N2njxsfHH7dp06Y/5pyDMYaZxhS+cOu/4OHJB1EKKqldRas0LLHqqIVMyua6Pka0SVQV64h1OyvBmynfox01ll5mTEeW6GMMRkYsYtq81CTipPqMEnwSpxKzusEsJ07qdlKiR7IagKpbBChRRCSHwwDJ075a2KKXtFUta99Gu2nui0wdRWlmubTvtnMocWapHUphnyad5E6nw1PHpH7HcQwhJZ5y4svx/DNej1JQ9vSfNb3Oej9QGcIJa89ELOsAgDsP/wpCxgCA3t7e3v7+/vNnZmaYHjtvGkS3xpV9H7g1iByRx1t/Kyu2734iCIIgCIIgCIIgCIIgCIIgVi+Fp4+zRRnbLWTIcPA0vbbTZmWlxHLaZzomrBhMp42To6Oj63t6ev6yWq0OGdHmW/d+Djc//COUg2rqqrEcOEgcIwCk0GnVoEULptpyNNUHEiadWyImiaQukIktkvo/WsTQu7NrElnajhaMpHbe6No6RhiRxr3kOJNYuh2ETNLiMZ0yLtlfolYpZ4/ZIzf6DpOQ3PLzWAJP4lpKUsg1Cz4ycRRZYlhScyjNvJeIScZBJa1UdMY1pDeWyQ4ZpFaIjKDGdL/rog7OAzz71CvxrFNenaSMsx1APmdQOnZWikDdu13rzgIDR8BK2DN+Fw7PHEja1+v1c2q12pAQghlRKKumkCt42uKOK4z6YmTdE/Y2GbW+CIIgCIIgCIIgCIIgCIIgiFVIYaKQz/lg/3bbua81RhqYMyHu7s9enpUyzhWV4jjm09PTaDQar9ywYcOlZo93H74J195zFTg4GLhK+Qa7F0hSm0mGNF2ccegYKcYoN5bJCEhToMESRsy2LFGX0LQujZ+qTEYcSUxAxq1kOYQY0lRxJv+bLXLYueZSR48RplLHjUkHxwBIIWFKD1l56HQ4aQ2TSUNnxK5UUGEm7Z1O7wYrvqrZlObKk1KmqeWS2kRMH1+SrC5184h0XyI5TxK1Rg2D5SG8+Oz/h6ec+BJwxr2Cj3ECNY+Tc2FaKtuOtaehr7wGUgpM1kZw/+jtybqBgYHzhBDHNBoN6UshZ1+vPiHIFog8zrvc698XBwRBEARBEARBEARBEARBEASh6YhTyJ3UtmC+2ifWpHZTajlfmi13X1m1h8x781oIEQghxMjIyDnDw8Ov41wdej2u4Uu3fwCT9RGUgpJ2BAGABLOS2pmkaUxYNX+gXS9SggktrBgRw7hxVCsliiT537SoYXQSkbbnduwkTuqAUUIS08KR5fLRTh6ma+wkzhYpEzcOoOrrNK3X/5F6HQBwXW9IWl02IRi4rpekRR1piUemnlDSb72ddjsxBjCh6xJB6JR6Ug+JtEYLqWAGAJLpdqaGk1kuE7eW6R+HhJQCM/UpbFtzAn7vgnfikmOuaBL4mi5IT5q4NP2cf6Mt/cdh6+BOxDJGXdRwx+EbknXDw8Nb6vX6iY1GgwkhuE8Ymo9Y4xOG8gQfSh9HEMQi2I2mKnaL+nlvtw+GIIgVyW7Q51ArXl7gGNF3RIIgCIIgCIJYhRRaU6hVKisAcwQcK9Wct56K654wMfNcFADstkwLQhgfH+8NguD1AwMDW03D6+77L9x66HqUeUW3NluxNGWbbQBKTT1KxLAUkKaDl1K7aNI6OMxKiSYhASPQGJMMk6nryDkquy/pfszp0w4dMEvsSSw2qv6QU6soqfHj2o+aChghjZ+MizqQ5F+SzBZvkChBxu7FkjpLOg5nugYTT9rO+VepVQ5JWuIXTP0lmTqZ7OGWAISIEcsGzt/6BFx54d/itA0X6q6ZtHpzHUGuAKScSqwpdZy9vq88iO2Du5I+7Rm9Aw1RS3pfr9cvsgQhFsdx031mX/PmvXuv+GoNmXvAU2uoKbbvN0EQBEEQBEEQBEEQBEEQBEGUigqUNcntunfcbUx7Xw0hVzgyy+06QXqRu19Hn5GsVqs1pqamrti8efNzzfL9E/fjW/f+Z5KKTFrpzYyLB5I5KcdMTP2bKWlGaCHBqCHSiDRaFlLxU7ElSSHH0kB21jfjVjLKiExEiqSKTyJ0yOS96aNWUySz9BxVs8joSMq5xJMaQ8b9Y9LhpU6oRLFKx1NIcKhYMqljlCpnjAmV6k0rYXoYjcKTKEWsSW1T74WUyqmEdGykMAPPwJTEBZXPTo2E2a4Rz6JS6sGTjn8RrjjxZegp9Zvzn/y2xR7Y45VeK03rpNXPRHBjDDuGTkOJlyFkjINTe7F/cg+2D54AAFi/fv2FU1NTfb29vVNSSsYYa7q+81Iq2td41vosh5wb226zgsWhtwL4yy7ufwbALIAGgEMADgLYq38/COAWALcDuBNAbYH7IIjVyBkAnldQrCkAtwK4DsB4tw8shx4AlwI4G0BfTrsYwAMAvg/grm53OocygMcBOBfAYAHxPgJgT7cPiiAIgiAIgiAIgiCOdgoThQC/AOS6f3zOBlfwMe3t3+4kuG4u3e3cGEIIHscxpqam1lWr1df39PT0m3b/c8+nsX/yAfQEfUm9HMmkSuLGpFUDyAgmTNXX4TIRf9KaN2ab9Niksa8wU/9HJvWIjGMnSTFnRKNEPOKW8UanVdPiEKBFIjMCTAs+us9JPR+W6jASqUAkpamRJG0tB1JK8CQfm8nWJiFMqjstUjHOkrgKJWjxpNaRqeuTOozSukpIhSJbbGJpvxNxywhlydCmzitYxyelQD2exfbBE/CsU16N87Ze2nRdGneQ/TvtE5reuwJR1rrjh05HX3kQU7UxHJ7ejwfH7k5Eob6+vlMOHz58zPDw8O0mfVyWUJqRRtF7TXvuoab6W869MScGsSB69A8ArAdwcka7GMBtUJO41+mffd3uPEEsY8ZQvOA7DeADAN4CYKLbB2jBAfwhgL+A+hyZD9/R297U7YOwYAB+D8DbAWwuKOYkgL/t9oERBEEQBEEQfsIwPA7Arzyrboqi6LHd7h9BEAQxPwpNHwfMqSnE7fXG3ZM1QZ43oZ3lOPI5Ksz+pZRcSskajUY8MTHxtA0bNjzetL3j0C9x/d5voBL0NNcHAodJn8ZMDZskN5yuYSMZpBEsknRsMhVOnJpAaqkEB090I870ukRHMm4WJGKUlckuEVwSOUcgEYBMajolBLE0tu5EmjoNWnix6hUltXiMWwpJ3SLr6HWau9QJlWabk0m8pOaR1e8mycLYr2Qq6EBafTB1ipL+y2Qz1a80xZ0RjxrxLKSUuPiYJ+MPLnp3Igi5jh8j6PhqCPna221dQQgANvZtx/rebaoPoo77R++wt9sA4AwhRMNXU8hzn8xxArnXfcb17xWR3JSL86lhRCyYAMr58PsAPgPgIQA/B/D/AJzQ7c4RxDLkAQC/LDhmL4A3QImz8xVfOkUZwOegapsspE+PB/ATAE/q9oFoAgCfAPBBFCcIAcC1UM5MgiAIgiAIYnnCAQx5fopwjBMEQRBLTGGikMGpLeSbtG5K/aYnsLl570yIc0/MJnImvJmUkkkp5cjIyOaBgYErS6USB4B6XMO1d1+FyfoYGFMiENNKhIRIRBYlWFhZ6qQlsMAWP2SarY2lAlIi4hgRgwkIHUfYueJ03R+VUq3ZgaPSvtk1dFhaAkiLRUqkMvV2pFU3yGRgMwnklPgjYBw9qh/SFoNMbLOVle6O2bWBJMAEIBmfUwPJyCCJEUiLTEwalUipPJyl4lDi1NJCl0nBByBJGMeUegUpAAGB2cYMNg7swEvOeSNeee5bsbFv+5zaQPaPb5mvnpDd1iZ5L4FquRc71p6Khqwj4CXsHr0F9VhlD+vt7S339/efPTU1VdLXYJM449YNsu6NpuvaFYSyUita7blbiwhENzkfwN8AuBvA9wD8FtSEKkEQiqs7FPccAP/W7YPTvAfAcxYZoxfAZ1GsCLNQ3grgpR2I26lrgSAIgiAIgiAIgiAIh8JEIVvY8azzOYeEWQetFDiT2E1p41zHgz2x7pk4V3qGlKxarTaEEE9du3btBWbbmx/+MW45+GOUg4rakU4rJqWqlcOTWjmWC4gxlTbOOGesg2Vg4NwIOG6NIJYINJDM2iZNXcbMcs4s4QVJ/Rx9MDqtnBJ9ONI6QowZB1PqCLLz66XOG30sZpukrdmpTNw7gFTiEZOpVYelfTfikRGyzFtTMijdnXb/cJmWFDJp5phKecf0QjXeInE82a4hqcdRCoFGPAMG4NIdz8HrLno3Hn3MU8EZT8YzGVfnJ2t5XlsbZh8ogB1Dp4KzAAEPsGfsTkzWR5N2nPMzarXaoL6uEnHTuubnOIJc0ci6r+Y4huz7wtpGuG45e79EV3kMlFvgLgBXAqh0u0MEsQzopBDwVAAXLDrK4jgTwB8UFGstgD/r8vFsBhB2IK4A8NUuHxtBEARBEARBEARBrBoKdwq5k9GOk6cpvZUrArltjXCUtR/7vRNLCiG4EELu379/c09Pz+9XKpUAAGYb0/jGPf+JelxDgEAlixMycbckigXQJHZAqkRqjKm2JpOZlFo8kUI7YbSjxxJQko6x9IWqLcS0iCQTl46A6Ys0Mo2uc4REPNLmINuLlDiJmOUKSrw2Mm2ZRE3S32mxhjmXgpVaLrX+WMfBZPPx2aKVtX/TLkk5xxL5SYlRuh9MDwAzNZO0KpeacyTieAaxbODUjRfitY94F15y9v/D5v5j51wbWc4fd73PPZSHu922wRMwUFkLSInp+jgeGEvrgZdKpVOklJvjOLZHrYm8GkL2bn1iUl7KOROLxKBlyU4A7wdwC9SkNUGsZm4AcH8H4y/WobNYXlZwvBehA9/b5sEzoNLhFc33ARzq4nERBEEQBEEQBEEQxKqiyMkFGQSB8NX40cuSekJurSGTVg7NE+e5ziA7vvNaSRZSsnq9Lqenpy/buHHjhabdTQd+hLuO3IByUEnTljFdSYgZkYc5LhGWtBUiXa42ZWBSAoyjSQ1KBteJgzTdnBGDTOo5qVOqGemHgYEzq36RSbfGjDDBdK0fgEmR9MqUsTE1gUxaOeXaMf2U2o3DlbAjRSJUWVvpZekBm5RyKvWclnaEqbnDAM61wGOEL5m4rsCgxgpSpY6zUvGZ9HQsEZyMYCTQiGuoxzPYMng8XnRWiNdd9F6csfHiuRdg4pRiTa/t92aZ+9vXLq89AGzs24b1PVsQixgSAveO3JxsMzQ0tCOO452NRgNCXTRzUsW517dZZqeO86WDs143be/W56JaQsuaXVBPxl8F5QAgiNVKJ91Cl3f52J5ZcLzNAC5edJSF06nxpNRxBEEQBEEQBEEQBLGEdMQpBGeyWv8WxvljxCNPiit74tyUkoGvnood23EdSSklE0LwiYmJ/jVr1rzSTOLXGjP44Z6vIpZ1AAwsSXiXpmSDFjLSoj9I86GxVE9RTU3qNJakg4OuSQTTjKWp1pLUaSIVQsCg0sbpfSTOIPPeSjknpYCQSB1BJqubZJDgkCblm+4L1+nZ1LZaQJISELBcQjoFHRik0OnikApRRrCCcUhBiUFGtNIjkdQPSmobCdlUFyi1TrG0BpLKqqb6K9LY6ngY6rKGRlzHxv5j8exTr8QfPfKf8fgdz07S/vlq//he5zmDXIeQuVbaqUG0proOmwaOQSxjCAjsHr1FbwNUq9XK7OzsqY1GI9B1hbi5N1qJNW0In0naRSMOtRubWHb8NoBfADi32x0hiC7x5Q7GfgRU8dtucBqAkzoQ9xldOh6GzolCnbwGCIIgCIIgCIIgCIJwKHUqcFbqqjiOuV37RC9j7kS4EYlc94PehNkx3PorQgjeaDTqtVrticPDw5eY/dx26Oe4/dAvEPCyrlGTumOkkFo4kZBMJ0VL/EsSDBxSKDcOY6kgAzBIJrVbRiaCEAcgdJ43VXrHuHOQiCfgDAxC7VcyCCa1M0jV21HOGZOeDWl9Hpj1SqBgur3al3YtQW2kBBaZqFBqW5nIWIypNka0shPeMSGTtHRpAK7lIAnw1HGk0uvpSkTSdjApYco4gYywxKGFF5MLL1W+UJd1ABKb+nfikmOegouPeTLW925JrqEs4cd1CGWljvO188U2mDb2b+Nr2z64CyVehpAxDk7uxWR9DP3lNQCASqVyjpSyFMdxXCqVGvpaFb5aP777IStForu9lWZRZsWmVHLLmuMBfBcq1dU3ut0ZglhivgNgFJ0RbziAS9EdJ0qnxJtnAHhjF47nbAAbOhD3FqhaawRBEARBEARBEARBLBGFi0J6MttN5yat3yZ9nNcNYbAnxj3iz5yJczuGEIJNTU31lEqlZ1er1V5ATfb/+MGvY7YxjUpQ1UIPS5wwjCMVemxhgBkPkMmdxhORQ2rBg5k0bgC41mOktA6cIUmjloyIbiSZiicgwRjXQkkiryQp1aQ9QhKJaMUYMwqLFnZYIraYFHWpK4k1nYnEbZRoO7qej+kiM+6iZIFup49fSHW8MjF1gTEGYfUTzNQsar4IjHaVuqpi1OI6SryM7WtOxiO3PxkXbn0C1vdtTQ9bCzJ2ar9EpMmgSchBc4o5e/tWsd3f5hxuX7MLZV5BQ8xiojaCh8Z348R1ZwMABgYGTpuZmRns7e0dkVIypgfYFXxswcZel3V/5C33CUckCK0IBgFcA+BZ+jdBrBbqUNf8b3co/mXojij0rA7FPR3AiVh6IeWyDsWl1HEEQRAEQRAEQRAEscQUKgrZjh9rwlo6v93XTdtmiUG2+ONOnFvLIIQIGo2GnJ6ePmV4ePjpJv4DY3fg5od/jApXNZJZUuXIuGbSSj5K9GG6jRZztLqTuGa0M0ZXzUnEH2HEFkiASXCTWk2vNwdvDw7TeeRY4npR7zlkUmtICUPa+SOV+OR4YPT/jbrVXKKJmWJAMI4do8awRFAyggk3QpBM98FkKunIZLSQOKHMIUum3UfgOj1d2j0m02MRACAFYhEjRgP9pTU4fcMjccG2y3DO5scmbhsbr2PHhLdEHVfgcUUjVxhqFdvdh71+28Au9JT6MFmvY6I2hocmUlGor69v+4EDB7YODw+PSCm9wk7W+7x1PjeQbxtKJbfiKAP4PIDHAbi+250hiCXkanROFOpGXaEt6Gztn2cAeM8SHxPVEyIIgiAIgiAIgiCIo4TCRCGfQ8En3Nht7GVuGzuuO7ltnEaOCMVNLaF6vY56vf7EwcHBTWYC/2d7/xdT9TGUmapHI5iST5iunZN6ZJCmbTNiTpJbTcs/QiaOGCZlKgxJJQIBSvTgIs2MptbrlHBc1+0xKeAA7RoyIoZVlMgWVZLCRqZjlngFq2aQ6bPZ3E55piWdNKblKrLqJQFG4IFTG8i4kUw4AcZ17GQ/LNlL4j4yNYcg0IjriBGjt9SPTQPH4IxNl+CCLZfi2KGTUQl61L5zRB8A2Q4eYF7OoTwRyY3jWz5UXYd1vVswXh9BQ8xi/+TuZF2pVFpXqVR2xXH8ayMKudd4Xn2sPAE0715z7x1yCq0oegF8EcD5AB7udmcIYon4OpRjqNyB2GdAiTT7lvB4ng77qYziWWpRqATg8R2Iuw/Az5bwOAiCIAiCIAiCIAiCQIGiUN6ktN3Gl+LKbm8tZ1n1V+CYZHQbCYAJIdjExMSa4eHh5wBqAn9k5hBuOvAjKEFF71Kw5lI2SFSL5oR3gBZhUlFHazCJ8wVcJsKMwaRfg0RSKyjpuKkNJNO6OpZmo1w8pvgOM9V/kP5XWnthZj8yST3HkGZ0Y7rDTeV7JCCFSjsnpXL1GCHK9M92BMlkF1rM0rWXEn0qMR2xNMuejia05SiWMeK4hhKv4Nihk7Br+GyctuFinL7xQvSU+udcT1mCDNA6ZVwrsmL7HESt9lct9WJL/w7sHrkVnJXw4Nhu1OMaykEFpVKpUqlUTqvX61+qVqtMp5Br6RDyOXxcF51PTM3absEDRXSLYwB8GJ1LP0UQy41RANcBeFKH4l8O4NNLeDzP7HD8xwJYB+DwEh3PxQAGOhD3K0CacZYgCIIgCIIgCIIgiKWh0PRxvglqZ/Kax3Fsb8Ls986kdlJ7yFrHgiAQ5r0zEc6EEDyO43h6evrCdet0Di8Atx26Hg9N3IsSLyeOn9RJY+Qgliw39XeYNKKGduiYzjDWnCauyUkjExFHQKdSkwwCqYvIrvdjRCpT10cJNSzVoyzHEkw/mWhy+yQOp6Y+QsdmOlVcWv/Izl1n1xFKupO4jawaR046urQ+UlqXSEoBIQWEaCCGQImVUOJlVEsD2DZwAk5efy5OWncOtg3uwtqeufWqfeJLVg0gH/NZJ61BbeUyaiVAbVuzC+LBGCVWxsHpBzFeO4J1vZtRKpVQLpdPmpqa6uvr65vWohDaxb53fMsB731AHB08E8BzAPxXtztCEEvE1eicKHQZlk4UGkDnU9ZxAE8D8O9LdExUT4ggCIIgCIIgCIIgjiIKrylk/4YWfSyxSDjrpS8VlvV+Tn0i121kfjcaDS6lxMTERLm3t/c3+/r6+gBASIEb930XsagjCEqpHmIcM6r6TSKrpP9V9XwSN45xwCQ1ftJaPLp14vZJqhQZiw3QtBckrh2dZk0iUYWaMrhZWkxSi8ekOtNxtIcJiURliTcskYugU80BTQoTlLiV9Nhsy4zTSKYVk7SDyfiJpJSQUkBCIhYxGGOoBn1YUxnC2p6NWNu7CdsHd+HYwZOxY+2pGO7dhIAFmdeOlH5DS7u1fbLa2u3t163Emfm4kbYM7AAHB+cch6f3YWzmENb1bjZxds7Ozq4FMK1TyDFHGPXiSyGX5bDLW2fHIlYcfwfgywAa3e4IQSwBXwbwzx2KvZR1hX4DQM8S7OfpWDpRqBPjNwngm0vUf4IgCIIgCIIgCIIgLAoVhTw0uXzMe3sC257EtgSgOQKSO7Ht1lMRQrA4jlmtVttcKpUea9odmT6A2w7+DOWgmhheTH0d46gxy2QiBFlle6y6PybdnEmlxuxlMHV0rDpByQgAlknIqhNk0sopkYVxpusSwXIToSklG9fvJVJhijftyk6Ip9YLadxMItmXqYGUwLSsJJCoX1wylVqOA+ABOAKUeQU9pX70V9agrzSIoZ71WNezBet6t2BtzwYM92zCur5NGKwMz70YUmOUtUxm1vCx1/tEGnt5lssoT9jJcgu5sVsxXN2IgcpaTDcmMCumcWD6QewcPh0AMDAwcJwQYkOj0XioVColpynPVee7J+zfrWoFZaVtbHkgxHJjF4AXA/hEtztCEEvAAwBuAHBuB2LvAHAigLuW4Dg6nTrO8GQAVQCzHd5PH4BLOhD3WgAzHe47QRAEQRAEQRAEQRAeChOFPG4GbmoC6WVzBB80JTJD4gyCUzPInTh3RSYATErJarUaarXa2Zs2bTrTbHvzwZ9gojaKSlDBHKUmqYGTpoFjOs2aEXuUgKLXC0ByNCOhUsnpukKWHNSUlk6JMVpsSAoTpcKEnY1N1QBKawkl66VJNWfqBIk0fZtuJaSAgICUMYSU4AgQ8BJKLEAp6EM16EUl6EElqKDEKygHPagGPaiWelBiFVRLfSjxKqpBD3pLfegpD6Cv3I/eYBD91UH0BP2oBD3oKfXqtu3XBffpK3mCkG+9EWtcx09e2jdb4GnlLLLT1bUrMg31bMDano2YHB8FA8eesbtx0TaVBalcLm9ljG0SQkjjFIIjDNmxHLedfU+Y9ZblbG76OLfWUNsnZ3VxDYAXtdl2CMBmADuhCtZfDFXPo2+J+vpakChErB6uRmdEIUClQOu0KBRApXVbCgb0Mf13h/fzGADt/6Fvny93uN8EQRAEQRAEQRAEQWRQmCjkuhGMIKTXmYnspvd2GztGq/RYuk0yAS6lZHEcB3EcMynlo6vVasVs+6v931dCDWOpU0XCSicGXcfHzNbLJjePcgPJ1OaS/kKSHS7VlFRMU79HpjWB0tRzRnQw+2CQEODaJaTq//DUqmTiSQnGjHCl3D8xGpCxgAQQsACVoBeDlUEM9WzE+t6tWN+3BUOVYQxUh9FfHkJfeQA9pT70lPpQCXpRCaoIWAmcc53arVgNwZe2zV2vxoJ508dliTKuMNRu7HZdRW7srP4YBiprsLZnI+4bvQ0BL+HhyT3J5d7X11fat2/fcTq9odR1heakTMxwzbnXf1NKxQyXHXyxCz2xK586gJE2244AuA/AT61lvQCeCuD1UBOmneRCACcDuGNJR4ggusPVAP6yQ7EvB/ChDvf/MQDWdXgfNs9A50WhTqSOEwC+2uF+EwRBEARBEARBEASRQcecQhqmhR/zvil9nL0dAOmLCcytVeS6Kcwk/vT09JqhoaHHme0PTO7BnrE7wVlgTfIDSp1JhRq3lk+qAyhXT1rtx7iHktVozsCmXUAw9YqasbdTNXqUwAPJUlFKMmjNwBKxZCKpNUQDsaijFFSwvncbNvZux9bB43Hc2lOwpf84DPdsRn95DSpBte2aOO3iCi2t4i9kfV7sduoHtbN+vrFb7ascVLGudxMkYgABDk7vRS2eRSXoAWMMU1NTuwYGBkpCiDm1YdzaWEB2ykQ4riG7vZ1WLmsfRGFMA/i8/nkKgA8AOK6D+3sBgHd0+6AJYgn4JVQauWM7EPsyNDuMO8GzOhjbx9MBXNnhY+qEKPQDAAc72GeCIAiCIAiCIAiCIHIo1Cnkee1NA+dOXPsmxM1ra7LbuIvcuitMCMGllHJsbGzXjh07Tjbb333kJozMPIyABYkgk4g6XKWDY1zVAoJk2qBjKgMp11CTwpVGSOoTNcGQpJBLagTBiFEMkEnBniZ3kYTaLxhrSqjHGJQjSNQgJcBRwrbBE3Dahgtx/Nozccyak7CxfztKvPVpzHLl2O99jh13vYllv86i6Nh57dttm+cAatWXrP0AwHDPZgSsAgaGsZlDGJs9gg19W9W64eETpJRlKWUMh6x6Qr46QK7o46tB5ItPolBH+W8A5wH4AoBLO7SPK0CiELF6+DJU2sSi2QDgHKi6RZ1iqeoJGbYDuADA9R2Kvw7A+R2IS6njCIIgCIIgCIIgCKKLFOoU8r230r01iTr2One7jIls6W5jUmxJKVm9Xo/7+vouLJVK61RjiXsO34TZeAZ9pQFICJ3KTdcMEixx+jDGwLgWaIwIoPWbNIubEXhSF48t7LBkoY7JLVeSyUdnHCdJDjtYjiXW5FSSkKg1ZlAOKtjcvxOnbXwEzt/6BBy35mT0lQfnjH+W2GELG+57VyRpV+Dx7dN20/jStWWJKfOJ3cqp5FueFbv5wkptXb76Q3n7Mqzr3YpKUEFDNjArpnBoel8iCvX39++amZkpCyFqOn2cnQauqUaQua7Nte57b/A5ivLqDxEd4zBUOrlvAnhkB+JfAJWybrrbB0oQS8DV6IwoBCi30A0din0mgOM7FDuPZ6BzotClKDqvrOLqjo0GQRAEQRAEQRAEQRAtKUwUAubUMXEnpGUcxzwIAmEtY3bqOEfssesLMbOd7TSK45gJIZgQgk1OTvaVy+ULy2VVD3myNobdo7eiElR0fZ+0ppCUDJwbh44WfrSFiDHVbclNbSEtDFg1gFgaSG0oBRhXxYWkfm3EJAk7DZwZEOVMYkzXEJI8qT0kRIyGqKMS9ODsTY/FRdufiLM2XYKByto54+0KJ67TxX7dqoaOzxGz0NiuQORz/vgcRO3Gzuqb+7udmkATtSNoiBhrezbMOX7fdlmv1/dtQTnoQdyYQK0xg8NT+4D1al2lUtk8Pj6+Rko5KaV0XXLCeZ8p4mSt89UP0g47AWKpmALwXAA3A1hbcOwyVG2h73X7IAliCbgOwBiANR2IfTmA93So30vtEjI8A8BbOhS7E6njbgVwZ+eGgyAIgiAIgiAIgiCIVvAig1mOBu4u07/dmicme1qm08iXLs5uJ6VkQgjMzs5ulFKeaibqD07txUPjuxGwEnTlHt3e0nOkTgMHpK4eqVPGSZZux5h6xeYKD4DrImG6g647JT1gyNSdwrTaJKRELZ5GtdSDC7dejtc94j248hF/i0cdc4VXELLxuWGcMXL6jEyhxnUVuW3cuHltfLFtB457DFmxs47X7ut8Yxv2T+7BTGPSG9v8tDpOAFjXuwmVoAoJoCHqODKzP1kXBEHf+Pj4sTqOtz6WjS9FnFnucwuZFIu+9iCWkr0A3tyh2Kd2++AIYomoA7imQ7Efj4IfhrF4VofituIcADs6FLsTohC5hAiCIAiCIAiCIAiiyxQmCmWJPWYiWwtFdio52JPZdgzPZLbdzn5t2seVSmX7mjVrTjEbPDB2J2biSUgwCClgkrwxpmoJpanfjFVIi0VNwg9Uqjno7aXO9abtRWqN1KKSrkDEAKFLFNnp5vSeLHlKdUNAoCFnwcBwwdbLceWFf4dXX/g3OHXjhSjziu5Htjhiv7ZFjHZwHTo+V477YwskPgFmvrHtde3GztpXXmyfI6kez+KB0TvRXx7Kje0bV1ckWlvdiBIrg4GhIRo4MvOw3bZvenp6Cyyl0CfiZK3LEonMe/e+yYtNdJyPADjQgbgndPvACGIJ6VTNmX50JsXjdig3X7fohEvpGACnLDrKXKieEEEQBEEQBEEQBEF0mcJEoZxaQIlLCKkrSPi2BZpqEDFbPLInxs1rKSWTUrJGo8FrtdqJfX19SbqZ3SO3gMESM7QKJCVLUsExzgHBdLkfXQNIO4lSMYdpPcgoRulrqfaQHojenjOrjVWTyDRhusyQkA004jpOWHs2XnXe2/B7578Dp6y/YM7YZjld7N++Oj4+3DRxPseQixu7FXmxs1K9+Y7T3cYn7PjS0/li+5btHd+NkdmHMVAdmrMfX+y8FHzloILB6tpk2djsIcSiAQCoVCqlTZs2bavX60IIMa97zq2hldfWvU+IrjAL4LMdiEuiELGauAZAo0OxL+tAzGd0cCza4ekdiNmJcdoP4CcdHguCIAiCIAiCIAiCIFpQaBqVrElpn6CTt43leBCmphDcfGwaIQRvNBrB9PT0mUEQAAAacR0Pjt2thAlT9wcySRvHdP0gwNQVYtr9A53SjSfv9ZZJmjlAO4oEkviSaWkocR6pdHNKxGBJwjvG9L6kRE3UMFAZxuU7n49Ld/4WBipKz3Lr5bRDngjkE0pcwca3n/nsP0s0yovd7v6y0rbNN7aPG/Z/B8PVTWCY6wLKSkXnHwAADFjbswnAreDgGJ05hJnGFPora8A5R19f39Y4jqWUkkspWZaACjQLQVnrnHsm8/4gusK1AP6g4Ji93T4oglhCRqFqCz2xA7EvB/D2gmN2WxS6FMAQ1LgVRSdSx30FyiRNEKuRNQBOA7AV6n4dhPruNglVR203gLtR7H1MEARBEARBEAThpTBRKEvssesMGYeQKxL5XEZuOjpPSi0OAEIIJoSorF+//nTT+MjsfhyZ2d9U3YdZ0+ZSO4MgAMYBCCMOAUbdkVJ7i6QRhHTqOWnSyul2Op1cOiPPtcDA9H4ZJJNgejshBRqihl3DZ+O5p70WJ68/r2kc80QV932rlGa+dq6rxlc7KK/eUKtlWX1x9+fut53Ybvo6d1++483q48jMQdxx8Bd43hmvy4zt27cvltSesTWVdbpNgPH6CGbiafRjDRhj4JxvaTQaibuNMcbiOE5iuKni7FpBdlo4+16x7hnppo7Luq+IJeGXHYi5ZvEhCqUElS7rYgAnAjgJwPEAhqEErAHdTkJNdk1BTXjtBnAXgJ9COQYensc+lyscwMkALtDjcJz1MwSgqn8bJgFMA7gfwD0AbgfwQwA/AnCk2wezjLganRGFHgWgD+qaLIJBdMZVMx9KAK4A8JkCYx6t9YTWA7gIwPlQn1k7oe7V9VD3ar/VdhTADNTn1L1IP79+BuAXUM7Q1UwVwJMA/CbU34MTAWzQ62ahPs9ugvqs/w8AN3e7w0vMFgBPBvA0qGvu2Da3uxXAdwD8J4DvgoRUgiAIgiAIgiA6QGGikC/FmzMZLX3LTc0hO5YWfHx1VRgsgUhKyYQQPI7jvsHBwST3/f6JPZiOJ7S4kSpBMvX9pMKOAMCkcvDouj8q7Zty+CQOIanX2Z4MaVxBqo4QIFNnEjPxhEo7ByCWDTAAlx//Ajz95FdioLJWh/GnKcty8/hEnnZwHUi+bVvF9okivnpByUn3pHezl7v9yYvtbuOKNLawkxXbvP/53m+hLuvYPrgrM3bW8WWdm7U9GyEhwRnDTGMS0/VxoHez2WR9vV7vl1LOmMPJqyeUt8yXTs69/6iuUFd5EEANQKXAmMshLeCxAJ4PNcn1KDRPnub1e0j/bNXb2dwK4EsAvgA1yboSrlcGNaH8NACPhxKD5iPa9eufDTqOQQL4AVT6wc9CpdpazXwZwD91IG4ZwGMB/E9B8Z6CYu/1hfJ0FCcKnQJVJ6lIpgB8c0lHRBFAOameAyUynjyPbc1n12YAZzrragB+DnWdfgnAbV04NsNbAfzlPLcZhfrM/SCU+DAfNgH4YwC/B2BdRpsqlCiyBUo4ejOUi/b1XR6rTsOh7sXXQl1vC/nbfZr+eTWUc+hdAD4Gdc0RBEEQBEEQBEEUQmE1hYDUyeBzPdjtjBDkTmLbaeMyJsebnEZSKiVnYmJie7lcTp7EPjD5AGrxDBgCQElAEFAajpRGJNCN9W+hBSFTJYhrWUpabRhkKiYxgHEVW0LVEWLg5sWcfdTiGfSVBvCCM/4YLzjjDXMEoSwxJC+dnC2C2D++Nl6Hi9V+PrFdocVd7+tLltiV1Q/XuZPlLjJtW8W22880pnDdff+FU9afj3JQzU2xl+eEcrfrr6wFpNqmHs9iqj6RtK/X64P1en0AgJDmIvTcG+4y917JuJe4vZ7qCnUdCeUEKTpmt3gyVI2X+6Amp56I9gShdjgNwBsBXA/g1wD+D5SLY7nBoASgD0GJftdDTcQ+AcW5uBiAxwB4H5SL6MNQk/OrlfsB3NCh2EU6kJ7Z+aFoiyugBK8i6IRD61oU/7mYx0lQouI+AN8AcCXmJwi1ogIlcv8NlLj9K6i0oQOLCbqEDEF9fv0H2heUAgB/AuWWCpEtCGXxG/rnaOVJAG6EEgmfhGIe5tgF4F8B3AL1IAJBEARBEARBEEQhFFpTyJfmyq2B4qa3srd1UmNxaDdF1oS4EIILIeT09PROKWUySXlwai8acR3VoGRJPanrxxYghBELhFmfWoHUe+0sAiB0KjlTQ6ZZ9DD/gcpDJ1NxoSZq2NC3HS86K8SZmx7pHTtX+HHr2mSJNr5lefWAXMeR2Vd6HBJ5DqEs548dz3X3tBPbbpsnkvkEslbOJtPGbPfjB/8HB6cexOkbLvL2N6v/WZj2g5U1ynUGhlo8g4lamha+VqutqdVqTRPpbqo497WPDNdQ0/1lCUNNzjpiRTOx+BDz5slQwsfFS7S/06GeWv8rvd8PAmh04bhthgD8LtRk7wlLuN8KgFcBeAXUhOBbsDpTy10N4NwOxC0q3VsZSoxZDHUAh6HcKIthCEq4/EYBx9WJdHhLlTruYihXylOxtA7Ls6BEqHcA+AiAvwVwaAn3vxjeBCV4P5TTZguUo+hxi9zXTd0+2A5wHIB/hnIIdYpdUDW5rkLxNQsJTRiGfQAuAfBIKGH5RAA7oMTeNUg/U0ah/ibfBeBOqPSv34uiaHe3j4FICcNwDZT4fR7UQzanQv2t7Uf6QI+AOp8PQqUJ/SWUa/t7URQt5YMMnRqDXiiR+jIod/pJegzMtTwF9dDXzVCpjL8aRdGdHezPVqj0tI+GcuCeoPsT6CYzUN+JTHrlHwD49tF2b4VhWNFjcAnU9Xky1N/ZjVazKaTpt++GejjguwB+HEXRzHz2t5qhz/XOQZ+xTWNB9zSNxYql8H8w+2oLtWrrpogLgkC4k9xurDiOea1Wq0xOTmJqauq1W7dufVepVIKQMT70izfjp3v+F72VPq3TJEWAkpRy9ly/chJp6UcrR0b70RniLLdQqv0kRYh0exgxw0oxV4unsW1wF1529puxa53KPtKqVpBNXi0en5soOSZPWjV3H+2mY2s3tk/UahU7j6zYef3P6p95PVEbxd//8DUo8QB//Mj3o7+ypmXsrL655+6Wh3+Kf/jx61AOKqg1ZvC7570Vlxyr5gv37Nlz7/j4+AuOPfbYm6rVqgiCoA7rSsmqBeQKRs49Ye6VJN2itX5OCsYVylsx/7Q4rbgawLM63O9pAD0FxvsolEiwFJwIJUR0wi0wH27Tx/yDLux7LYA/0j9DiwlUEAcAvAzA1zu8n91Q/1Aqgn+EGr/FcB5UiquikVDp+w4vMs5lWHxKtOugxv3lBRzX+6DScy0GDuAgVH2wohBQ/0g8WGBMl51Qrp0XdnAf82EEwNsBvB+dT/v1Viz+7+SroYR4HxcD+C8A2wro60a0vg52Y3l9DuXxQihBbbCD+3C5G8qN9CcFxly1DvMwDIcAvADAi6Dcf4txXN4CJdx9Moqi+wvs4ycBvNiz6iEAL4yi6LtLN2Jt9fepAP4dc92EDQCPiaLoJx3c91YAL4ESaR+FVGyYL+MAvgjgX6Mo+nHHB23ucYwg/f4pAXwNwLOjKGrrYakwDE+H+ux7Ieb/+fRdAFEURdcUdCxVAL8N4JVQE4UL+bz5CdS/hf4tiqIlT6XpnA8zRk+ez6R2GIYM6nvj70Jdnwv9uzENlbr2EwCujaJoSevOhWG4E2py3+XGKIrOXcq+5PRx2X+ur1SO0s9YYHXf0zQWq5zCnEI+Ecdel+WEcEWfOI7nxHLcDwBU6jgpJYvjWPT29h4bBOrzaLo+hdGZg+Dc+nzSTiAwQEgBbn0XYQAkY9rcw/QaJRJx08AoQYwlIpEUZqXuD6AWmn0BqMsatg3uwu+e+5fYufY0qzvZNXhcfM4eXxo1X10dX2zf8izxZ76x89xLCxG1smL7XEOtYht+tOca7B69Bc84+ffQX1nTVuw87HZ95QFIpk8+BybrY0m74eHhfiFEf6PRQKVSSS6erHpBQFsCq7k/hGebo0EQWqmsR7GCEADsXYJ+BwD+HOqp8eoS7K8Vp0J9KfkrqMnVpXANlQC8BmqCdX23B8BiE4D/hpr0fhNWRu2lIrgBwB4AxxQcl0E92faFRcZ5VgF9+V8UJwo9E4sXhc5DsYIQoJ4+7pQgFEDVt3k7iv/cXQxrAbwHKiXmywD8tNsdasFj4ReFrgDweQC9BexjPzorDC4lAYAIxQoz7bKrS/s9qgjD8ESo7zy/jeI+O04H8E4AbwvD8CoAfxNF0a0FxH0t1GT68c7yrQD+MwzDM6MoWhbOxDAMdwD4NPwP1Ly5U4JQGIZnQn0/eh4WPklpMwjgpQBeGobh1wH8URRFt3dm1FrCoNJHPhbAt1uMw7FQn00vxMLF3scBeFwYhtcAeFUURQ8tJEgYhgGUEPRWqGt1MVysf/4yDMM3Afj3KIq6+V34cVD3ZEt3tp4sfS6U6/+sAvbdCyV4vADArWEYvhXA57o8HsuCFfa5vqI4yj9jAbqnaSxWMYXVFLJrCdnLzG83lZwvdZa9TdY+9EumRSHEccw555uSejHxFMZqRxBwnlp9pD5SbfmRSCf/hZUwLp3/Z6mFI0kTl3iHVFuuxYOm/6p9SgbUxAw29W7HK859SyIItapN0w55oosrZLgiTla8Vinj3Nh2WjtXRDLbtYrtrvfF9h23L9VcO7EB4PD0AXzz3v/EQHkI5255/Jx2ebGz6jbZx1diFZR5VaUclAzTlihUqVT6giDokVIKI2jCSvtm0yqFHDC3fpe7fVsXE9EpTu1AzE4X5t4K5Vh4O5aHIGTgAP4Cqh5J0RPVLhdCFY5/H5aXIGTzRqgnZ4r4Mr4SkFBPC3WCywuIUUQ9oa9DXd9FfNndAeCcRcYoYlxcOnUOtwL4FoC/w/IShGxOhRLF/hTL241xtmfZ06AcKUUIQsDRkzquAuBTIGFmRRKG4cYwDD8O9b3qFejMZ0cA9ST1r8Iw/PswDBdVhzGKojEop1DsWb0Fyt3ddbQI8Cn4BaFvAPj7DuzzmDAMPwpVz+uF6Mz3oycDuDEMw27f85lpZsMwZGEYXgl1Xf82ivl7cwWAX4RheP58NwzD8BQop/8HsXhByGY71Pfgr4dhuHGRsRZLy7p6YRiepcfhcyhmwtTlNKjUrt/VgsiqZCV+rq8UVtlnLN3TNBarksJEIRs33ZW9PGcZs4Uju429jamhAqgJ+Xq9PiClTC7ayfoopmuTYOBqcp6pOkDGAcQgwTxuF1MriCWyk1kmlZ4ESwBK6gWZhVKnj1PLhKhjqGcDXnLOG3H82tNb1rxp5UZx29u/beHDdg/Z67L2l1WXxxWBXIHFJ47Y27aq+WP/9u1Hes8PaxJ45hsbAP73nk/jofF7sGv4bBy35pSmftux3Ni+8fcRBCVUeI/qPwOmG5PJOs55hTHWI4SwAzDfPdEc0++8c51z7jZu2zYuLaI4OlGDp5OTaecBuB7AYzq4j8XyBCjXUCf+AViCegLsx/BPjC43XgqVlmW13NedqkWzWPHjXKhaIothD1Ru7YNQwkERPGOR23dCFOrEObwASsRdbI2bpSCAEq6uwvIVr05Dc3qV8wF8FotLueLy624fZAEEAD6D5ZOmkJgHYRi+BGrS8OVYmocrSgD+L9Qk4rmLCRRF0Q+hapb5eF4Yhi+eT7wOEcL/XfIggJcWmQZGiyCvhTqfv4sOzWlYVAG8KwzDT+p6Cd1gbcZYrIFyPr8fQF/B+9wC4NthGLb9/TgMw+dA/buikzVJfwPAz7R7oVtkppcOwzAIw/DNUCmQH7UEfXkMgBvCMHxZF8ejK6zkz/XlzCr9jKV7msZiVVLoze1OVue5gtw6QgBklpjka2+cFrVabbBerycX7XRtDHU5qybvk8l+PcEvtQeIq3IrSs9hkJIl3iDZVDtICz9SO4y0HJWITJIl5YqEFotiESPgZTz31D/AqRsuVLE8oo3PceKKOva6LFwRxF7uW+dz9vj66IvtCkdZsbNqELWqz+M7Dnd8slLvtYp9x6Ff4od7rgFjAS7cdhnKQXlO3/Ji+9L4uXAWoBSUk2trpjGVrlOiUMXpp8y71oHme8EWTX33int/ufcasWQ8ueB4R6DyGXeCy6AcQkXUiug0Z0K5Aop08WzXx/8mrCz3ze9ApdVbDVwHYGyxQTycjMWlpSvCJfQlpA6hLxZ0XIsRhSpQ6WmK5DYAdxQc80kAvodinz5eCl4I4Bosbf2ZdilBFQkGgGMBfBXFOYQMv+r2QRbA+wE8p9udIOZHGIaDYRh+Dv46Ny41AN+BSsH1IqgUKifo7Yb1zwlQgvQroJwQrT7jTgDwozAMFysmvhPZDxD8s04d1hXCMLwIwNsyVr98oSnIMva1E+r74D9DFTTP43oA74VyWpkUfMPWzy6oB49eDyWsTLaI92IA/6ZdUUvNWs9YHAP19/DZnvYNqBS1f6qPcad13FsBXASV3u3foArBZ7EGwDVhGG5GC8Iw/D9QT40PZDS5B+pz9HegHj7YjOb76gkA/hDtnYsdUIJVt54g906aagfTN6BEXF+pBgmVUvbvoD5jHgH17zAzDpuhvqP+hh6LTwN4sI3+9AP4RBiGq+LfB0fR5/qyYxV/xtI9TWOxKimsphDQLNz46ga5k9RW+zlt3G2tdXZdIdTr9d56vZ588ZhqTKIez4IxrkQbJlW9IAmASbNIiUHa5ZPahCx3i0hrDYGnKeQY17GgtwUAATAmICHREA089aSX4JJjr2gam1aiQt76LJHEVy/IV28oa9t2RZB2Y7tp4OYbO+/Ysuoo+VxPLjONKXz1zo9iZOZhHDd4Ms7cfMm8Yrd73kq8jErQg3E5AjCGumiugymlLBkx016elQLOJ/z4Ui3mpZsjQWjJ2Ybin7T/LvwpQxbLo9GZib9OcibU5PkTsfji7RdDTcpv6fZBLZA3Qk0OfbXbHekwNagUa8/vQOwnQqUhWQhFiEJXO6/fVUDMC6HEzna+YLtcguI/D4pOHXcZgK9geaW5nA9PgBqTpwKYWmSsojkTwO1QNYQ6IbitdKfQawD8frc7QcwPPWl+DVqnNvk2gI8A+FoURaMt2o5AFVr/HvTfEO2keAWA34N/Eq0HwKfDMFwTRdGHFnIsURTFYRi+CCqNzxpn9RDUhMkTlzr3fhiGA1Bp43zzCv8YRdHXCtzXbwD4D+SnFD4I4F8AfLSNwvAjUELFdQDep4/lxQDeDPW31McLAdwH4P8VPZYtWOuMxTG637ucdoegJmk/GEXRwznx9gH4GYCPhWHYA+W0+Av4HxTbDuBjUH+7vIRh+Dvw16YDgP8C8A8AfpBzfY5A3VfXQYmc5ly8CdkP8WwAcG0YhhdEUXSk8BHPZ86kaRiGp0HVAN3haX8vlCD2mSiKWtWKPQDgTihR75917EugRLyXIN/F++dhGAZRFC319blkHE2f68uNVf4ZS/c0jcWqpGPp49y0Vb6UcLajyN7OasPdbYIgEEjTxzEhRD9jLBGFpuuTaMg6uE4bZ0oKMW4cPloVMo4g00h7hZjUggaT4IyZMkK6rfotE+cMVDY5ruLU4lmctekSXHFitrOtVf2gPPeQT7jwbeeKGu52bs0fF18tHXedL7a973ZrGdnv243tSyPntrfXX3ffF3Drwz9FiZdw9pbHYl3P3Aed8mK7opEvTV/SVjvOGICp+oQ7br16e28dIf3DfSkWTRhfKrmc+2e1pJdaTvxfFP+5+pUO9PM0HXclCUKGx0I9LbtYTsbKFYQMH0VnUuotNzqVQu6yBW53HFTaxcUwCvXUouEuAEUVrn36Eo9HHkWeuwuwsgUhw6VQqeSWmzvxLKgn/S/qQGwJ4OZuH+AiOBPAe7rdCWJ+hGF4PNTnbN7E4bUALoii6LIoiq5qY+LQSxRFv4qi6A1Qboz3AfClSuMAPqiFnQURRdFuKIHSx2UAXlf0OLbBPwA4ybP8BqiUcoUQhuGfQU1IZU1W3g/g1QCOi6LoL9uYrJxDFEUTURR9AKoeXN4kbxiG4ROLOrY2WWvtfCPUk/y2ICShrr0Toyh6ZwtByD3uGX3cZ0DVcPBxRRiGv50xGBfD/5DNTQAuiaLouVEUfX8+gqV1Lk4B8E85TY8H8PHCRrl9miZN9Rj8EHMnTPdACQsnR1H07jYmTLPG44dRFL0SwIkAPtmieRiG4eu7MCYd52j8XF8u0Gcs3dM0FquTwiYv7RRxvsnoPLHHxnE/CLPM/Jg4QggWx7EcGBjoGRoaSnK0T9cndM0fPVnP0ml6KZlervK/GcuGSRWn5vbNpD9PasNIWxuSSGoSMaMvSaAe17G+bxuec9qVqJbUPKtXNGghaLSTAs60d9OytRJT8vbnq+eTlwIua3sbX+ysmkhZ/Xb7m7eNzzV0z5Gbce09V0ECWFNdj0cf2/yAU544lbfM3k9zXyQYGIR/G/fEz0mraNr4RNQgCIQruPrem/bmN4lDS8bpAK4sOGYN6qntIlkL9aT68CLjdJM/hUohtRg+BeBH3T6QRbIJwF93uxNLwDVQaVCKZqEiyGLr9phjqjvLinLVLLR/RYtCB6BqdRXBFihBqOh6Cd3imQDe3u1OOLwQnXsq824sP2dUu1ShnppdrvWgCA861dX/QqX48fEwgGdFUfSbURT9oqj9RlF0MIqi10Pl2d+d0eyjYRg+chH7uAoq5Yp3tX6ad0kIw/DZAF7lWTUF4IVRFM0WsA8WhuH7oFI/+eYQZgG8BcApURR9MIqi6cXuU09c/j5UyqMsPhCG4VI+pLBWj0cf1N9DW4jbB+DyKIpeH0XRyCKOewTAbyNbBP9rt96Hrmn0ecx9uvtjAC6KomhR37WjKJqKouh1UE6mrLpUz9S1jJaSZNI0DMMLoYSItdZ6CeAfoa7LT0RRVMj32CiK7o+i6KVQ3yMO5zR992I+Z5YjR/Pnejehz9gEuqdpLFYlhYlCvlom5r09Qa0XN9VM8axvWucsZ1JKrn8k57xSLpeTLyez8bRuBEBKMMhE+IEWeJL1Sg2y0sGplHIsfZvu1HIdmfYMTItFAowx/Oaul+DYNSdZ27Q3F58lOvja+eLmpV5zRaO8WkY+ESYvjZu9Pee8aTv39WJiZ9VDyquTxBjDVH0CX7r9XzE+cwgAcNamx2Db4Alzjjsrtq/WkE8EaxpfQKUsBJKrPMcxNSeNXIaoM+c+dV1Bui33ufMohdySMAhVfLroLy6fRX6e74Xwr1BPYax0PoLFOZ0kVC7blX5/vALqKfajmRE0u2qKYjvUk2rzpejUcYaiXIGXIzuffxYDAIr+cv0VZE/gzAcO5axZaTWEWvHnAH6z252wOAFN33wLZSWnjnsD1NPzxAohDMMSlJC3K6PJ9wGcHUVRp1yoiKLop1Duxh94VlcBfFZPpi+UK6HStfhifyoMw/I8482bMAy3QX0X8/G6KIpuL2AfAVTNmz/MaPJrKEfAO6Iomin6GKMoeh9USjUfu1D8w2B5rNW/PwGVAtnwSz0G3y7omCVU5gOf8LgT6gECm7/H3PRufxNF0SuLPCdRFP0bVMH7LP5hiQvUDwFAGIYnQ7kr7Pv5AIAnRVH0R1EUdeSBiCiKvgyVCnx3RpMA6rNgvt8HlyWr5HN9yaHP2CbonqaxWJUU6hRyRRx74tqa7Lb3OSfVlc/ZYLkhOPQEHmNMCiEY57ynVColE4Mz8aSanOc6ukkHB6XocKnTysESg9IqReb/YExqV5Deo1DN7B+p04TVRR2nrr8Qjz5GuVB8YkOW66aVIJTlMmqnvo/94+JzIdmx82oA2e3dOO72bl/d48/aNi921nG4+/qfuz6J2w5ej4CV0Fdegyfs/K2mY/LF9Dm1fC4qt5/NlzTTaeTmjrmHpuveuIYc0Ud6amvBbJfhKpLmXiOnUMfph6pNc3YHYr+v4HgvxNx/zBXBEajUDS8CcA5USrNhqAKeZ0LVg/kQgLEC93kcgD9eZIyfI3tCY6UQQE0uH+0UXZvGMN/UBENQ6b8WQx2qTpLLj6DydC+WCoAnz3ObS1F8OrOiztnroWrxHI18DBnFXI8yftXtDiyQbVD1LIiVRYTsz+mrAfxGFEX7Ot6JKDoMVUz5u57VxwJ49yJij0HVZfDVnDwf6qnujhGGIYOaSPQVeP9sFEUfLWhXg8j+e/ZRAI+IoqjTqSn/Csqd4ONPllCIWBuG4esAPM9a9h0AT1hoyp4stDD0avgn5P7AvAjD8Ayoeis2H4yiqCPfS7Uw9P6M1cdB3RNLxdowDNdBPQCzwVp+I9R1+c1OdyCKotugPuseymiyCx3+LFhCjvrP9S5Bn7EpdE/TWKxKCnUKuT/2cmuyW1jrhNvebGNvay0XaPEUY5PrRzJIpoUTkyyOpWnljJ2DMSQFg5K6QToVWFL9xXEQJUYjCPQG/XjyrpckaeOyRA9fbZ9WNXjaFVSy0r5lpaVrVe/Hfe+L7WvvS73WTt2idmL71mXF/sVD1+Gbuz8LxgI0ZAPnb30CdgydPGfbrHHxpcLLSuHX9B5IfQfOlerpa5OrR1/rvuvbCKU+4dSOkaRbzKvnRRTKyVAFKTtRi+OrUAVgi2IdVFHIIhmDEma2Qz29dxXU5N9BKHfHEag6Ep+DKtC9HapmRa2g/b8RKoXaYniz7mtR4/FtqEK774B60jIE8HdQOdofWnjoXH4LR5+LwmW51BV6KvzFtOfDdfA7AAWAogpyz7euUNGfYdPI/gfefDgOxdQQy2M/lID1HqjPgzdAfU59AOrzfdHpj3LYBuAvO3x8y4GV6hR6K+bvupsP34KqAXMx1N+yYQDrAZwLlcLpA+jc342jkjAMH4fsB0auBfD8IlLftIt+ivbZUIW2XV4VhuGCa3hFUfRDqO8aPt7Y4dQqfwT/QxW7Afyfonai05m92VksoJxIr+rEk+uePhiBxPfddTuAZ3W6D5qTAbzLen89gGcutF5KG8c9AXWeXR4RhqFxWb8Nzf92vR7ZjoOi+FOoIvQ+/qTD+7ZZC5WK+mRr2fcBPH4htVYWShRF9wG4AtnfVf4wDMPjlnBcCmc1fa4vNfQZ28Ra0D1NY7EKKdwp5C7LauPWQjGT3taENnPdEzpM0wT3HC2nFUUAAIAASURBVGGASeXgEdLSfdJZeiGVrmQcQNK4iYSyBUlpUoBZbg+mU8UxQDKZLJeQqMWzOG/LpThlwwVJf9Tmfu0qK+1ZVl0d37qsmjc+0cJ9necwch1C9jJ3XZZY4zqgfI4cty9un/Jq+Lhj4HPr7Ju4D1+47f2YjafBAKypDuNxxz0TnAVzxs83Lq3G0B47n4DWLCw29dV3UTS5fgBIz72UaJCu4Grau+4hOzY5hTrCGqh/CP0Siy847yNG8U8n/wWKrSN0I9TE1T9ATQC3wwTUJNujUcxEVz8Wbys/oPu0UKahCiJeBiW8XQb1xfYtUE+L/R2UMPRCqPQaV6D4p+bLUGnkjmbug7rmiuZSzM8h06nUcYai3DVPm+dxXV7Qfg3Xov3PhTwidKaOUAxd7wBKUH0m1GTSXwF4L9RnwmsAPA7qc/NFUJ/3neAP0PyPrqORm7rdgQWwFaqGRSf4NlSR7MuhCqj/FKoWwghUDvUbodLkvAbq78YLAdzZ7QFZ7ujaA1mFq28B8Jwoiop6KKVt9JPlL4Df1bPYuoDvhCr+7BIA+GQYhv1FH08YhucA+FvPqhjAizogUnwYyo0uANwOlbbmn4o+rjyiKLoH2c7y31mibgwjrdvzAICnd0oQso77aiihx+VZYRgeg+bJ2hjAS6MoqrcTexF9msbcSWzD6WEYXtDJ/VucA+Ap1vsfAvjNTp+TjDG5AdlZA3qwgh8+WaWf60sNfcYq6J6msViVFCYK2WQVt/ekxXJdQcISjYSzDbfdEhbMnmxPUrux5jpADBJMCzqMSST+IZk6iJj2/jBALU/zxKnKRFIFNlvHsoHB6jo8YedzwVnzUPpEHV+qs6z17dYj8glE9rq89b737cTOS0tnb5cXez7HZO+/VeyZxhT+49fvxv7x+1AJKmiIOi7YchlOGD6zSU7MEtZ8sVsJaWZdQ9Qx05gCdK2pMq80xZNSzinA5nPVQV/jjsNnTr0hTxvkxScWTQXqqch/BfAg1KR/p4qevxvFCgcnAnhtgfF+BeDx8Oezb4froSbjjxTQlyux+ALg78f8XVmjUMLgcQBeCjXJF7fYRkDl5X0E1IR0kTy34HjLkU64hYbRvrC7kLRsPvKEn2tRjJNuHYDHtNl2I4pPf1nEuToXnUl3eaM+3ldC3fet/kZOQ7kgL4T6HC168qEM/wTr0cIogLu63YkF8AbMLZxeBO+A+i7RrntKQDlNz0bxKWWPNv4IwCme5dNQT5JPdqtjURRdj2aXh+HyMAzb/az2xY2hRGtfet4TM/a5YMIw7IGqNeNL5/OX2r1UKFEUySiKfhdAKYqiU6Mo+lbR+2iTrEnSp4Rh2Kl/D/iYgnIIdTxVlsaXru3JUA8j2Q+ffCCKoluXqE//AWBPxrpOfG9oxc0AruhUfY02eS9UWmwfvxOG4fou9m0x/BFW2ed6F46DPmPnQvc0jcWqofD0ce77jDRXttMhN6b11ttWSslks1UIJtebShOndR1pDEMsEYqSoDodnL1M6m3MQtmUP04JTrGIccr6C3H88BnW8rm1cdz0cL731vHMWebGdo4/07GSFycrzVs7fWkVez7ts8hzIuW5hL50+wdx08M/RqXcg4ZoYG3PJlx2/Av0OZTe48yK7e7DrbPkupqkFIhlQ72XEr1llXGEIRmTWTSLmrbYCSCpByTcelyus860dV1CTjpGRi4hL7ugvmC2+vlLKJfHZ6AmDseh0iG9Gp1NJ3MLlNhQJH+G4ia3RqGeql/skyJ3IL9gbLtsxOJt5Q2oNADtPIltxKCdUG6ChdSAqUHlYP/6ArbN4nyoXNZHM51KIdeuS+ZSNBfaXAg3QD3hm8UEVEqpInhGm+2KTh0noNJfLpb/W3C/AJUb+1FQn7MLOa5/gXpyrug0Jc/C0esW+ieoz9iVRBUFpsCyeCfUAyViAdvOQNXXKvIBj6MGXWz4TzNW/9US1ERoh78FcMizfFHnNIqi3VCuMh+vDsPwKfMI14q/A3CGZ/l16LC4rVMMdQ1d3+AXnlUVAJcsYVf+OIqiTjlXfXwecx+GuAjNT+/HUM7eJSGKogaUOOnjN5ZwbAD174CnduMJemdMBFRabR89KObfXEvKav5c7wb0GZtA9zSNxaqiUKdQVmo4TVL43mrP7RRxZlvXTWTVI2r5QSXNv7Oknthv2kLbfpIEcFwtEQCTUrmJwMCZcgMl6efMa+3hMA6kEi/j0h3Pad6/R+zxuX+yUr3lOYTcuLY44YpReeKM24dW6drmG9ttl1U/qN3Ybp/m/NbNr737M/jmvf+JCq9ASgEhBZ5w/G9h6+BO75jbx5h1nnz9zXJz1UUN040JMMYBBlR4NbnspJSxdgq5Az1HTM0Scnx1u9x7wrnvyCXk50yolGetft4K9UX0hVBPiC9FkcNJqAKyRT6JsR7FFl79M/gLzy6EL6GYGirPW3wIPAjl4PkXqMk3l/ughMKdUNfGyCL3J6AmcYpMs/HYAmMtR36J7CdDF0O7otCzCthXO8LWVwo6rnZFoaJTx/0IKhXWYtgO4PkF9+sGHXOxgs63oOq9FAmDmvBf7twB4O1QT4mfAOW0GwawGcpx9xyoFA/vA/D3UPXOVmIR2GcAGCo45v8UNBb/ApXmkGjmtVDfd1zuhroWu46u3fBez6rnhmG4qPqIURRdhexJ8o8U8RStFpd89WIOAXixdi0d7WT9fV4qV8A1yE6l1RF0baFvO4t7AZxqvf9iFEUPtB+1ED6fsfzsMAw3zCvSwhEAXqDrXnSdKIr+F9mZD17a7f4tgFX9ub5K6fZnLN3TNBarjkJFIUcMakqBZdc/sTZpmgx3Y1lvsxwPDOrJlORLaMmat5XaEmQcQmYOnxkzEUtyywGcJanhJCQ4rNRzRgUympIEGqKG44fPxK7hs5o7lCGG5Ikd7YpDeWnofA6YVqKPvT93G1+dn6w6RwuJ3ardvGIz4OcPfRtfufPDCBCAM45GXMfOodPwuGOf6d1H1hi7bVudQ3vZbGNK9Vk36SsPJu3iOJ4RQsywPNXPg1srqFXdLhKBVjQCaqJxIU+w5/EqqH+8FcGtyM73u1CKyLt8BYpxb40i/QfII6HqsjwOSgjaCTUZOlLgse9G9j9qF8KjCoy1HJEoruaOzWOgnAF5MLQvsuSxlKLQiQBOb6Nd0aJQEY6u16DY1F11qM/XogrmXg2Vg71IXo7ihYiiuAnq6etToMTx/4FKHzqifw5AiW5fBPA3UALXnwH4Alqn51uOFPkgBaCuu98vcCxWYjq+jhGGIYMaXx/v7Ea9iRw+grnOuTKKeejgSvjT+m6DEhMXTBiGG6FqTvh4ZRRFDxY7TMuWH2QsP3eJ9v+nXXqa/7st1v9HF/r0C2Snoe5EvVcff9PFVFtZfDBj+ZlhGO7qdufahT7XVy3d/oyle5rGYtVRmCjkEW2S+ieuUOQ6huwYrnNI//Y6HhhjTAgx02g0kn/k95QHrH9xKXuPKfcjheqW0ne0yMHSHHFJKjlpqgap7ZU4Yaeak4ilwIVbL0c5SOvG5LlnfK6ePEeML42b5/ibXufV+ckjy/lix3TTp/naLyS2u24+sQ23HvwZ/uPX78ZsPIWABxBSohxU8JQTX4rB6nASz62JNJ/xcQUhX0q88dpIUq9KAuivpnM7MzMzU/V6fToIAskYSzbyXddZ6RV9ziCfs6jd9IzEsuPVKG4y2KbIya2/xcLS3uTxQyx+gqsHSrwpiikAP4FyMX0PyiXUKb5UYKxzOtjP5UInRKFetBbULoByryyGB6DcTu20u6GgY2slZO2EcnwUSRGiUNEuofcDuK3gmG+CcncWRR+UwL3c+Huo9JT/2+2OLBH9aC6uWwQfRGf/jqx2LgNwvGf5/QA+1e3O2eg6MP/jWfXMAmKPQX3n8zl2nh+G4WKKdX8MyhHo8i9RFHUqtetyJKumQTsPYBRBt2o65NXdjKHqZS4pOp3QTzJWF10nMYuiH5Qrgv9AtiN60Z8zSwh9rq9Ouv0ZS/c0jcWqo9CaQnZ9E2tC2l4m9MS2sFPCuRPbpn0cx9yzPpnoZoyx6enp+sTExKxZ1lPqNdYg7QxikEK5fxg3E/xqeVp/SLmETFo5BuUiYpB6OSCSQkNAQzawrmczTll/vuqQk1bM6l/T+zzni4sr+Lhx7N++Za2EJFd8aUegarcmUF7sdvuZFc+N/cDYnbjq1+/CyOxBlFGBZEBdzOCCrZfjnM2PzdyvOya+2D5Rz+0XY4nWiYn6ESi5UTFYXpu0HR0dnZicnJzknM/rnmunJpDrJppPfGJZIKAKnhf91DmgUjucWVCsMRTrarG5toAYS5lruEiKzAu/s9sHswRcB1Xfq2hauWWKcAnNR9AqSvxq1e+iXUJ36J/FcBaAkwrsUwPAuws+TkClyPv4oqM081sd6OdieAWU42el1QRaDJehWJeaBPCebh/UUU5W2pCP6Nojyw3f5/tlYRi2cqy2JIqiHwJ4R8bqfwnD8Jj5xgzD8NVQzmmXmwD8SScHarkRRdFh+GtJHtftvnWY23PW3dDFAuRZ2RWK/A6xooiiaBLANzNWF11DspPQ5/oqZBV/xmZyFN3TNBbLlI6kjwOaJqeblnlcQO5Etl1fSOj2dj+TtowxNjs7OzU1NZV8EektDyQVg6x2aomEmn7V4g4DIKWxAKmF6iUDJLd2aG0vASFiHDt0MrYNnpDEb0WeaJQlOBRBlgjTSgyaz/6zBJcsAca3vFU/fE6shybuw7/f+Dd4aPxelLkShBpxDRv7j8MVJ74cAS9lxjbxhBBzYvvcSnnn2KwZnTmsLhEpUeEV9FcG7WZjjLHJdtLH5Qk7vnspy3lHrAgmoKzlH+tQ/GcVGOsadO4JxSKEkUd2qG+d5i4UV7R+O4qdzFyOzAL4egfithJHnlXAPubzNPVXCzquR8L/dHe7x93JY8yiaGHkWnSmFhVQ/Gf3FVCOoeXAHwL4RLc70QWeVHC8b0E92Ux0gDAMOYCnZqz+RLf7l4FvQqMHxbkb3gnlwnYZAvAJnZapLcIwPBV+UXMawAujKCoqJedKwpcqrxqG4XC3O9ZBHkB2Dcwbu9ivrIdQtnWxT8uBrO+Qj5rP/d8t6HN91bMaP2NbsaLv6YKhsSiYQtPHWWKOtB1D+jXzpb9y3UXGTeSEt7eznUIol8tT5XJ5wizrLQ2gHFQBZmc40qKONgRp84+uF6TrDhnDkNS/IQCdNs6YicABcAnOOE5adw4443Pq7ZjXbk2epoPxCBz2MbntfMKIvY9W7hu3FpEdN692UNb+7P65KeCy+uKrSTTf2PbYHJ7eh4/f8A7sHvk1KkGPPmfqXD75hJdi6+DOpmN0x983Nu4633j4RC2TbHBk5mEwKIdZiVfQU05LnJTL5YlyuTxlUseZ365I6gqlTp0uryPPEk+Z5bKbk4qRWHbcCuVu6UTKOMMTCoz1jQ7289cFxFipX7olVD2OIuAoprbScqcTqWouAjCYse54KPfKYhiDcjm1y/UA9hZwXAz+J7zNuqKfqiri3Dy+4D59tuB4Nr8EcE+B8XqgrsVu828A/rnbnegSlxYc70vdPqCjnIvhL0T+yy4Uvm+LKIruhr8WygUFxY8BvAjq747L5VCCb0vCMKwAuAr+upRviKKo6BqYK4X9GcuXa024RaPrGB3MWH3vfGIVTNa52NLFPi0Hvp+xfB2Ak7vduTagz/XVzar7jG2DlX5PFwmNRcEUmj7OvHYnqDXJZLWdNs4ss2PZzgc7fZxZzphSfBhjKJVK00EQJKJQT9CHMq9ACDPBLyGZqiOUzOXrmkHKKQRVd0hZPFRNGJN2zqhEpp1UMaulXpy07lyYPmSZP2zBwRUW2nHMZLmLXIdR1o8Pn9jSal9Z9X98x5m1TV4qvXZjm21Gpw/iEzf8Fe4+fCPKQU9yddXjWZy/7XI8+rinerf3HbMb2z1fef1ytzs8sw8Ah4REhVfRG/Qn7YMgGC+XyxNSSs45l9BCp09AdcVT33v7t/s6LxaxLJBQ9S0uhEq90Sk4inXP/LiDfd1XQIyNWD5P2M+XscWHSFgNX5ivQfHprAJkixFF5Cj+OrKfsvUhoWpaFUFWCrkzkO8imi8PA/jRImOUADyiwD4B2WkGiqLoWjut6lt1mt0AXtvlPnSLKorPW7/ktTZWGU/MWF6U27JT+NwVhT3cEkXRbgCvyVqtHUCteDuA8zzL/yuKog+2sf3RSpa7e023O9ZhskShIh5gWSiHM5b3dLFPy4FbobJR+FgJD9HR5/rqZrV+xuax0u/pIqGxKJhCnUJZE9FZTgXX8WCnjfNNZAdBIKBL/nDOhZSSl8vlsSAIElV+oLoWlVIPAKGEHsbAoIQek1aOMQYwlT/OVHiRTKcMk6bSkEorZ9KBSb1cSIk1lY1J6jiDz43jLje/feuy3D3tiDi+1Gf2tj6Hiy++KzJlxfbFbKeGkc+V4xOishw5jDGMzh7Eh3/5Ftxy6MeolHqT5bV4Fpv6jsFzT3stSrw0J7a7/ywhyjfGrqvK6xaSEgen9gGSQUKip9yH/nLT362RUqk0rUsKzXHL+d77nD6+tkYsdV1FvvZE1/kx1NNPf4DOF4s9A8V9eZqA+gPcKUYKirOzg33sJEWKQqvhH8JHAHyvA3GzUqkVIQotxEFTlCPqN+B/0rvo1HFfhUrSuxjORrHi7n3oXOo4w2KFMJdui0KvBzDZ5T50i7OgBOKiOAjg7m4f1FFOloj8g253rAW7Pct2FLmDKIquAvBpz6oeAJ8KwzAz3WwYhk+Aqifm8gCAVy3dMC1LahnLj/Z03ll/3ztR57Fdsr4/r+bJY0RRJJCdmvuUbvevDehzfXWzWj9jM9H39C8yVq+Ee5rGYhlTqFPINyHtOoZsd5ArCDlCErfjWL+1ZwfgnMtSqVQTQhwybXtLA+gvD6mUXtrpIyRrqjMkpdTvzeQ+g5Qm8RdTriJmzdszBsYAIQEhGzhmzQnoKfU1xbPxCRJZ+IQWd3netj5RJm9bX/w8USkvditBKGvbvPV5YtOByT34wM/fiFsO/hRV3psci5AxykEVzznttdjYt61ljSPf+qxxb1cIOzJzADP1CXDGIGSMwco6VIJ0Di6O44c559K43Kzlc0QenxPITh9nt9fvpe9eI0FoWfFzqJokjwLwsyXaZ5F/FAcAxEg/f4v+OdJ+V3I5tpMD2kGKdL2sBlEI6EwKOZ9Isg7AYxcZtwHlbpov30Ix9aZ6oIShdo53MRRxTs4suE83FBxvKfZR9BjMhzH4iyWvFs4pON5S/b1fzZybsfwn3e5YC3zuik58h7kS/vReFwD4C98Gum7DvwNw/x0hALwoiqKivrOtVDr9UNdyZSRj+Xxc0MTScWfG8pO63bE2ODdjOX2urw5W62dsK+7KWL4S7umiobEokMLVVl8NFHs5MNcJ4WzHjfhjvfamzGKMSc45q9fre4VQc+29pT4M9WxAI46hi7eob7RS1X5hMO4PJIJQs3bC1HaSAVy1l9pxBKa22Ta4C5zxJr+HW3/GXua+zqoFlIUd201DZ+JZY9K0nRBijuBkr7e3sYUQn7DkE7qy3E55wpTtSPK192374Pg9+PAv34I7Dv4S1aAX5qRKIVGPa3jCzt/ChdsuT7bL66u9zFfryD0nriDkG/f9k/dhVkyDMw4hYqytbkCvFg7jOMbExMS+IAjswWC28KnbzbkvYP2DrFWaRdNG30ur9kmKZcaDAB4NlSquE5PYeZyw+BArjt7FhyBWCJ24n86CSkNo82Qs3jnwHSzMDTeN4lKTPd15zwA8pqDYADAD4NoC4hxfYJ+A7CLURXJ7wfGORbFulfmw2tPNHldwvDsXH4LIQosXvgm3PVEUjXS7fy3w9W9b0TuJomgMwIuhHuxx+fMwDC/2LP8AgGM8y98RRVEnXLoEQRRPlku16O9ZhUKf6wSRyYq8pzsEjUWBFJo+rtU62xHkikWWy8F2FQm7jR2LMSYZY7JUKvGDBw/urdfrAgCqpV6s69kEob/7MvMfpmsIQSS1hcycvnmvtB/rjWS69pCpLSRQYiVs7NuKNLi/9o693H2dtU2WANNOrSB1HK1FGduNk7XtQmO7YpfdPq/uUp5DijGGu4/8Gh/+xZux+8ivUS31gXGW1HiqyRmcsfFRuOLEV8zppx3bTQPnjq9PHMqre+T+3j+xB7ON6eTCWtu7GZyrOZ1ardY4dOjQA6VSiXHOBUsuMmTWFAJSZ1xOSkaZc9/NEVGJrrAdwD+h2No+7bIaRaHBLu+/AuBUqAn4NwD4BwCfgqop8TOogvQj+mcKqVPq8fPf1apnN4BfdSCuey6uKCDmYpwXRbk2no7m73ynAxguKDagBKEiXE1Ff5nfXXA8HzNQ9ZSKogR6srRbHLP4EE3c0+0DOsrJEvGWQgxeLD53RbUTO4qi6IcA3uFZFQD4ZBiGSfqLMAxfBuD5nrbfz4hBEMTy5N6M5Zu63bEW0Oc6QfhZqfd0J6CxKJBSUYF8DiE3lZw74e26fyyXA8vZRzKpwRiTQRCwer1+fxzH0wD6AWBdz2aUeAlgKnUcIMEZICUDGEeqO1nqkNGCdGo5nVRO/VembptSUMVw75akre5Hum1GHRv7vU+AyXPUZG2blY4tq52v3lBWnCzaie1r52vvq3PkbnPj/h/gM79+Fw5N70U56AESsQZoxHVs6d+B55/xevRXBnNjZ/Ujb1zytnGPde/4vajHs6iWehGwMtb3bbGbTFar1b2MMW4JQrmCTd59YG+blW6OxKBlxflQOZDfBCDC0j2JvXHxIVYchf1NawMO4DQoJ9glUKkBT8QqznfcBa5G8QUlLwXwef06APCUgvq5UL4G/czKIvuwCUqc/qF+X6RLaLHHaFP0pPy+guPl7afIz9xjsDSCFtHMSr3+VitZ4ullYRiuxO/BAx2M/U6oNKKXOMtPAvAuAFeGYWgeZHI5AuB3oiiKQRDESuFQxvIN3e5YC+hznSD8rNR7uhPQWBRIoZNXtqPBntB2HQ4ZaeS4ee1OaDuxBABpnEIA2MDAwANSyqTI4Yb+bSjxCoSU4DBig3aHSAFIgElYywBINRhMp5NjzDhKJBhXNYmEjNFXHsBARdUutB0o5r3vt8F1DbVy//icQ+1s50uHlrWtT8xpN7a7n1ZOplbuKHccv3//V/BvN74Dh6YeQomrMhlMSnAwxKKO3lI/nnvaH2D74AnePmTVdXLdQu7rPDHLdx7q8Swentqj10lUgyo29KZO4Xq9Pt7X1/cgU5jrdo77zeDeO771vhpC9rZ2G6ottCzgAP4GwH9h6Wq+rMZUap3+x0IvlOPiI1CTfb8G8EEALwNwMkgQWmo6UfvkUuv1RVA1hRbDjQDuW8T2+wD8tKBje6b1+tEFxQTUfffVgmIV6V4CiqtXttT7KXociPYo+gnDQ4sPQeRw1DnqwjDsyHd2Lei8CKpumMtrwjB8MoC3we+4/r0oih7o9tgQBDEvsv7+rA/DcCkfopsv9LlOEH5W6j3dCWgsCqTQCaysyWfXzZDhYvC6iNw4bvo4zrmsVCoj09PTSWG3TX3Hoifog5RCR0ZSgyYRQ5K96uxydgUXqc1DQgKSwXg7GICeUj96SnMF/zwHjyvAtHKw+NKvtXLkZAlI5neeK8hXS8gX2xZTstLi2fHyYmcdC2MMdVHH1bd/GJ/59bswURtBmVftM6ZSA0qGp570uzh/66XeWK1qIvn6l3UcPhHJ3sfhmf3YP3k/Al6GEBI95X5sHki/z0xPT98XBMEk51ya9HG2eJrl6vE56WzHnU8wcrfJud+I7vAsAF/A0jha+hYfgtA8BsDHoFJEfRnAK7E6nVjLjZ9D1e0qkjOQntunFhCvCOHqKwUd29Os15csOMpcfgTgQEGxik6zsVJFIUo30h2K/tt8uNsHdJRztN0nE1EUdew7exRFuwG8JmP1RwG80LP8Q1EUfaHbA0MQxLzJeyhhObtX6HOdIPys1Hu6E9BYFEih//jxiTp2Sjg3vZXPEZG13Hrtpo+TjLH6wYMH79ywYcP5ALB54DgMVIYw2RhTUoKEqgnEmFVbCEkyFrNKaoFIAOCqwJCuM8QgISGkQCXoQTVoftA/TxTxLW/lpslb5hMxfPVxfGKRIa9WTrdiG8ZrI/jcLe/DDx/4Gkq8jDKvQDJpykJBSonZeAZP3PlCXH7885v65huzLEEni1bH59vHwckHcWhqH0q8hLqoY011Hdb3punjDh48eHt/f3+Ncy6klC2fFPG5f3wp4sz7vHus1b5WKddAPS3pYxjAeQBeiuan6ovkCgB/D1VzhiiWIut6VKCKM/8pVJ0gYvkhoUSX1yw2kMNFUGnbfrOAWEWJQu8sIM7pUE9gjgHYVUA8Q1Gp4wD6Im+gcegORdelE90+oKOcoW53oEBiKBdyR4mi6KowDK/A3O/BvmLotwD4o24PTKcIw5AD2ApVw2SH/lmvfzbq32uh0tMPQE1W02czsVJo5KxbzpkN6HP9KIE+Ywtnpd7TnYDGokA68rR6q3oowNwUWfbyLMeQ3sY4JDjnXHDO4yAIavV6/WbTrq88iE39x2D/5P2QzLiAlLADqdPDQalApsq3cQNJCVV/CFK7iJh2HHFIACVeQomXddvUjZLlDnLxOW/y1ru4ac58bbMcPm6tHV9NJN/7vP230xdfLHtbptW5+8dux6d/9fe468iNKLMqAj3m6jyp8zbbmMEjtj8Jzz71SgS81PZx5PXNPYa8ekO+9ncduQkNOYsA/ZCQ2NJ/PCpaONQOqVuDIKgHQRBzzudMEDhiaKJZeoQeFsdxk/hq2vnau+uJhDqAkYx1I1CF6/4LwG8D+CRUXZGi+SMA/w1VnL1TNBYfYsWxd/EhwAG8CsCbcRSmMDgKuRrFi0KPgHK/nL/IOA9CuZkWy6+gUtDtKCDWk1B8rZoiRSFCQalGCKI1Wf/w/3MA/9rtzs2TqSiKaku0ryuh3KLH57SZBfDCKIqmuz0wRRCG4bFQf9vPAnAm1EMSJ2Npa1ESxFIykbNuDZavk5U+11cg9Bm7JKzUe7oT0FgUSGE3qcflY3770sBx33KPAJS73KSQK5fL9Wq1evvMzEzc09MTcMZxzJqTceP+76cHqIUhrfUo9Ucv4lClhsCMUCABycGMdSjJKac2SzZtkZrM5zqx3/scNK1imrZ2LLe9Lfq4dY/c7XxiSatUaln9c0WVvG2a+sSAHz/4dfzXre/Hken9qPJemFJParVybM00pnHS+vPw4jP/FL3lvtxxMOnqWgl2WQKSL7ZvP7Fo4K7DNyJgZe0qk9ixNjUVTE9P16rV6t2lUim26gnNuZbtYQT8qeN0Pa05Yo/93l1mbUvC0Pz5DNTTLe/uUPwPQX1hmupQ/InFh1hRTAC4aZExLgDwAQAXdvtgiLa5DsA4in3C/3wAj8PinzT6Moqrc/VlAH9YQJzLANxQUJ8A4A4AtxcYj/5WKchhQhCtyfq8mI6iaKTbnVuuRFE0Fobhf0OJQ1kEUI7pFUkYhrugnPmPgaqht73bfSIIoi3oc30FQJ+xBHH0UJgo5JnETpabCWprcnrOxLibJs633t2nrikkyuVy0Gg0HhgdHb2/p6fneADYNXwWOOMAY2BSWkKO+q2zw2mBiAE6RZmQUpcfkk3PaZo0dMbKYeOKKD6BJ492UpU5x50p8mS5gXzbufvOchFlxfa1yxKXfHEYY5iojeJrd34C1933eTREHeWgF4CETPwyasDr8SyOW3MqXn7OmzFYXdfUF98+88Qcd1zc93luLjfW/skHsGf8LjDGwZhEiVexcygVhSYmJnbX6/UHy+UyLFHI66TzpYJz3UO+tmZZK+cQsSDeC+B3oMSCotkB4E36pxN0SmxarnwIC3dHMQAhgL8CWY5XGrMA/gfAbxUY8yQAjy0gTpEOmq+gGFHokSjWhVK0S2i04HhL5bgpej9FjwPRHnG3O0DMi9XoiF40YRg+FsCrWzQrAbgqDMPzoihaEd8nwzB8BJTL/6lQT6gTBLHyoM/1ZQp9xhLE0UmhTiF3maceEIvjmFuOB25t3xTLty2AxC0BretwzkUQBBBCHJiamroT2gq/ZWAHhns2YnT2CDjn2t6TmpdUyjgOk0COQWoBSflSpJmKNw4iqN8CEpK1nmPPS9WW5fDJi+O+byXW+Fw8Nr5Uaz7XTCvXUFYKtqzY9vb3HrkZn7/1n3HnoV8i4CVUeAUCWpSznFuzjWlsGdiBV5z3FmwZOC7XHZWX1i4rnVxW6jhf311uO3g9puvj4CyAEA1s7DsWG/vSByWmp6fvAHAgCAJYqeOYcw/ILEHHnL480dQVj6xl3H7f8qIlfAioVG/f61D8/wuVou62DsQe61Cflxv3Q7m63rLA7fsAXIXO1ZAiOs/VKFYUOgHqybfFMA7lYiqK76AYR9QuFJuvu4iaSTYzBccbLjjeUu2n6HEg2mO84Hh93T6go5wsR3TRtaGOGsIwXAvgU2jvAZiTAbwHrQWkbh/P/wHwCiys/mMM9T1yL4A9+vd+qNQzhwEc0b+noT6XRwH8C9TEKEEsZ/I+B4v+W1ck9Lm+jKDP2GXFSr2nOwGNRYEU7hTKWm5NVNvrRFYNFN9EttNe6TTKLSQHBgZG4zi+OY7j3wiCAGt7NmL7mpNwaP/3UeU9SGoKaWFISz86MRmDZAxMqvRf0ioyJG3RAwy1xjRm69PoL69pOk6fKyavlo8vhZnZ1iYr/Zy7Lq++jy8tnbu8HYePGzurvbsfl1o8i+/c/0Vce/encHhqP6pBDxjjSmwTyrjFtcRRF7PY2HcsXnb2m3DcmpO8sbNEq7xlWdtmHafvfDVEA7ce+hkaoo5KUEItruG4oVOwprperW80UKvVft3f3z/GOYedOs6+3s01b5b57iU3HZzZxokhHJGoyb1HLJjvA/g8ip10NlQA/BNUnY+iua/AWN8B8KwO9HGxjGJx6aaGoFwmF3f7QIhFcQ3UPzqKqv9VAXDRImN8HcrFVBQ1HfN5BcTaXFCfDkLVXiqSonNAr1RRiHJhd4d6wfGOpoLZy5GsWg093e7YMuZfoIp+u/wzgJdg7jX7+2EYfi2Koq90u+M2YRhuBvCnAH4f7T3oIKFSnf4SKoXqzVDpT3dHUTSv+z4Mw1VRI4RY8eSlf1zOrlj6XF8G0GfssmSl3tOdgMaiQAp3CvlcDG4b33vbCWReOwKSG0cyxsA5F5xzWa1W5UMPPfSLWq1W6+3trVSCKo5feyZu3P9dLfIwZaOQgKktBG55hyRTLhUtCBn5SO9I1RcCQ03MoCaaH+D0uVWyRIus1GS+VGhZDpd2hBq7P1nbZok5rkOolesoa50vhd6esbtw9e0fxo37vwvGGKqlXp3ST6bp+fQms40ZbO4/Fi8/5y9w0vpz5/TZd/x5IlneGOQJXr4xBIC94/fgvpFbEfASGJPgLMAJw2cg4Gpesl6vz0xMTNy4ZcsWpq9T4UkfN+f+yKg1ZO4v4bZp5z4jYWjR/BmApwOodiD2EwG8EMB/FBy3SFFoB4CRDhx7N6lAOUxIEFr5HIZy813a7Y5YFO2gAVQKuSJEoaL4Kor/4r274Hhbl2YoCt9P0eNAtMfDBcdbKlFytbI/Y/mmbndsORKG4Yvhf/p6EsBfA/gxlIvI5aNhGJ4VRdF+dJkwDMsAXgflDl/TovmtUA+NXAfgB1EUHel2/wliCdmYsbyB5Z2ilj7Xuwh9xi5rVuo93QloLAqkMFHIJiuVnL3erUHk1hqC43IwqbDMMtsJwTkXpVIJQRDcPD09vae3t/cEANg1fCYGymsxK6bA9aEyrQxJzpoKC5n0cCqbHAOHqjNklCQhgYAFmGqMY7Lmv87y3EBmve99lviyEFqlpfPVAJpP7aN2+umLXRc1fO/+L+Hrd34Kh2f2ocSrquYTBKRM3VtC13aqNWrY0LcdL8sQhPKEKfdc+Nr71mfFzjqvtxz8KY5MH0CZV9CIYwxW1+GE4TOT7aamph4IguDWUqmEUqnUsJxCXhePe627KeRMO9dhZN8bdmw3PrEo7gXwj1DiUCd4D9SXqiJTvu0uMNYOqKdHj6Y/sn8P4PEd3sd9UE9L/Vq/fgBq0nFU/5gnp74KVaSTWDhXY/mIQjHU/Vw0X4NKablc6l4VXU8IKF4M2dn5YUAfgPUFxpsGcGAJ+k3MZW/B8Y5bfAgihwczllPBa4cwDHcCeH/G6jdFUfQQgE+HYfgszHXGbwTwsTAMnxZFUdf+XRGG4UkAPgvg3JxmdwP4GIDPRf+/vfOOk+Qoz/9T1RN2ZsPlk04nnXQKp4RyIIOIxsaATTA2BkxGP7KFcRNMMsFukzE5iSRysGUhQOSkiHI4SXe6ky7nsHFSd/3+qO6emt7qntndmd29u+fLZ9mZ7uq3q6vDrerp5309b91c9ZWQeUCaK3zHXN7HHcDn+hzBZ+y851C9p3sBx6KL9Cx9XDIlHFrrASGZNi7RvqVtiDUVVpg+LnAcRw0MDOzat2/f7YsXLz4RAE5cdCYWl4/CloPrIaUDJaO0cTpcJEUEUJCRMAOFAAKTZuIFIIVEpT6O/ZU9el3CgRL2p7XTGfVvomWdiC1ZbqC0ekBpwodNUOmkfVpNnuQxqdBVFXV3/b47cNW6y3H37usgIFDIafevUCpU6UScsk8qoNKYwPL+4/Dyc9+DkxefnTnWtuVp45ZM6Wc7Tlts27mqNCZwy47fQAoJIQWCho/l/StxrJHibu/evbf09/fvllIqIYSKXELmtW4KQMa9EITrJjmAUtLIxfdKwkkkfN+nMNQ9PgDgJejNm0orALwHwGVdjHl/F2MJABcC+FUPjn0ueAT0W1Ddpgot8FwF4JfQuZM7gUVVZ87/AvjYXHci5A/oTfqvfdDpLB831wcInff7mh7E3djleKfOwlh0ex/dHgPSOd0W446f6wM6zEn7N/aYue7YfMJ1XQfAFbC/9f0zAJ80vl8K4LGYPOHyVwD+H3T6ubk4hmcD+BrS0xj9DsD7AfyKE0KEAEgXUbZOKcrsw+f6HMBn7CHBoXpP9wKORRfp6tumGbVOWlJmOY4TuSBkMmVWuC6wpceyxZVSKsdxfMdx/Hw+Xx0bG/t9EOg58r5cP05adA4gtPYgVCg+ABCQgBAIQmeQ0h+gQkFIRXJQKFZEqeR85WPvxHYdI0WESBNTTGyp1ZJxku2TAowtLZqtfVr6umTatLR9psW2iSbNH+BgdQ9+uPbT+NSN/4K7dv8ReVmA4+S1M0sBKqzfpPerP9f8Co4dOhmXXvCfOHnx2alp8mw1j8zfaf1OHmdaKr/kcSbb3LP7Rmw5uA5S5qILCmsWn4+8LEApBd/3MT4+fm0+n6/ncjk/Sh1nXsPRfZF0C9nqbJn3jemuSwo+CTFJURDqKsPQVupe8QYA53Qx3h50Lkp0wiU9PPbZptviwU4A/wLgaOg3bL+K7o49ac9GAHfOdSdCeuGgibhqrg8u5BcAxnsQ97Yuxzu35yMBnNfleLfOQp+JnW6mXQWAM+f6gA5zdsBeB2pNKIQQzdsAPMqyfA+Al5gTfJ7n7QXwipQ4H3Zd9/TZ7nyY9u77sE9WrgPwVM/zLvE875ecrCQk5rSU5d3+d67b8Lk+y/AZe8hwqN7TvYBj0UW6JgqZ4o7hUpDJNHGJ1HIqLU7iu0jbF6DdQqEopKSUd+zdu3d71Pb8FU+AhARih1A46a+0CCERm1UglIBQrb0T4f/CLaGUj60jD7T0OSk8mJ87SQ1nE4jShKS0z5F4YauVY9tHUgBq53ay1TtKi11tTOAPm67ER657LX66/muY8EdQcEp6jINQnAMA1XopVBsTOHHxWbj0/P/A8QvWZPbF/Jw2tma/beNiq9mUJSxFv/2ggRu2/gw1vwIpJJRSyMsizj368XG7vXv3bs7lcrcVCgXfcRzfSB1nTRlnwyb62LYzHUSdxibT5kvo3cSzA53aY+Z5JJvc0MVYT+/Rcc82j4N2CnWLrwBYA+AjOPzqLh1q9KKOz3TopSjUy9hToVdjvQ7A3i7GOxa9d2s8auYhWri+x/0l6aztcrxzof9tJz3A87wGdDHrJCUAJ811/+YDruteDO1Et/EyW50gz/OuAvBlS/sSgG+5rptV4Lnb/f9L6LfXbXMWnwdwtud5v5it/hByCHFGyvK75rpjWfC5PrvwGXtIcUje0z2CY9FFuuoUskxCm2myYnEnreZQUuxJQST2E6WP8/P5PIQQD46MjNwUrTxhwWlY3n88Gip64SCc9BcKAgoqrBukSwspBELFLiHtXwni74ECHJnHloPrUfUnWg/UEBTSRJroty2NnK1dcl08ABbxJk3oSIuZdMik1Tdqdf+IzL4FKsAdO6/Fp2/6V3zzTg87RzehmOtDTubjuk1CQjuvRPhd6O1qfhVnH/UYvOr8D2DF4AnW4zb7kyZ6Zf3YBKTkeevEefXA/jtw754/I+fkESiFelDHqqFTsXKo+XfK2NjYTVLKTblcTjiO40spA3TIdMQcikGzhg/gzT2M/2gAL+1ivN92MdZ5AGb9DdEecGkXY70LwMvR3VpQZPrMB8HkTvQ2/df90MLJXKIA/F8P43dbFHlyD/sKAE+a58dPOqfbotAggLPm+qAOc25LWX7uXHdsrnFddwDAt2AXJj/reV7Wc/yfYa/xdi6A981S/48G8E3Y5ysu8zzvUs/zKrPRF0IOJVzXFUjPPjFfXPVZ3Jay/Ny57tjhBJ+xhw6HwT3NsZjHdE0UstQUCpBwC2Fy7RSVTAuXWCaT6eSiz2ZMQLuFcrmc39/fPzo2NvaHWq0WAEA5P4hzj34c6kE9dASJMEWcgILULiCFsKaN1GIAgGaeuajejRYGpHCwZ2Irdow8qHeeEBQikkKK2Tb5OWqf/N2u1pDN7ZN09CRjpolFNgEmLbbNsXTf3lvw+Vvegc/f8jbcs+cGSCGRkwWoAGhm4gu3E4BSWonzlY9A+XjMcc/Ey897N5aUjp4UO/nddtydjIuNLMEr+V1fMwq/ffBHGKsfhCMcXYNK+Tj36Mei6OhaSdVqNRgZGfljf3//WD6fbxiCkGojeFrpUCxtu550jV+gtymcPACLuxTrZ13u22t6eNyzQQHdczz9ATq3Mpk//BndLxQ/VWbDrTTXjqjroVMm9opfdzne83rY14sAnNDFePvR/RR6pHN2o/t1hf5qrg/qMOe2lOWXzHXH5gGfgP3N+nuhU96m4nneCHQdTdt/QL3Fdd1LZqH/H4T97+EPep43X2oIEjIfOQ3A0pR1t8x15zrgtpTll8x1xw4z+Iw9dDjU7+luwrHoMl11CpmEE9QttYSM5S2fE8uk4SxSZmqsZNtIPIrSxzmO45dKJdRqtWsnJibiFHJnLX8UBvOL4Ac+oASEUqFzRUEFWv+JhSAVppGTAk0NQ0S2IQglUKmP4d69OuV7O8EmKRrZBJo0x1CnYlCyfbLOji2Nmtn3tNpIabHj5VBYt+92fOnW9+Czf34rbt72KygVoJDriwUU7QwK0/ApPd7R1nW/Ckfk8fRTXoYXnPUWDBQWTtqv7SetRlLy+NLGqdPYk8ZGAOv23o67dl+LnNSZE/yggYV9y3H6sofHzSYmJjY3Go3rCoWCjK7LqJ5Q8hpuhymAJt10yXsjWXOL9JR/AdDoUeyl0H+kdYP1AO7pYt9eDmBFj457NngE7IWWp8OHYZ8sIXOHwtwLJrOx/166dDqh146sH3Q53lPQuxRyL+tyvB+jd/+2kM74U5fj/d1cH9Bhzm9SlvfaITivcV33ubA/n2oAXuB5XtuacJ7n/Q72GowCwDdc113Yw/6fCi1KJbkFwLt7tV9CDhMuSVm+0fO8TXPduQ7gc73H8Bl7yHFJyvJD5Z7uJpekLD8Sx6IrdLWmkK2uiQ3TDWS2j1xByeW2mMnaRJEwlMvl1MDAwOadO3f+Llp54qIzsXrRmWgEdSBKBicUlBBQApDh76i2EEI5K64CEwkDYaq5QAVYu/dG+IH+73ZbLZrosynQZJF0BWXVuUnGbueUSYuZ7F+72NH2jaCOO3ddhy/c/E586sY347otV6NSH0XB0WIQLInSAqV0CSGhhbd6UMXCvmV48Vlvw7NOfSUKTtHqQkpzXKU5sNIcP+a6tHFJxk4KaY2gjl9u+DbG66Ph+ACB8nHK4nOxKqyBBAA7duz43eDg4OaonlDWeTfvmzShJ1pnfk/eQzYxyBaPdI37AHymh/FfBeDhM46iuaKL/SpB1845VOlWQfgAwK/m+mCIlbkUhbYDuGnGUdrzR2hHyVzR6zHehO7WQ5MA3tKDfh4F+39Qz4Tv96CfZGr8vsvxzkF369gtAPCmWRuN+c+d0M/eJKe4rnvKXHduLnBddyV0LQgb7/A879YphHsH7C8XHQvgcz08jFfCXmPzXWHNEUJIOmkO1W47sXsFn+u9h8/YQ4tD/Z7uJhyLLtOT9HG2VHDJNmbb5KS1WX/ITC+XnBg3axUZbqFGX19fbXx8/Kf1er0OADmZx/krngBH6pTKAjp9mQgTmikoCBW6gaDFi9AYFLqK4vxnABQcJ4dNB+/D5uH1Op7FaZOsT9OuVlBSzEhLHZd0GKU5kNJcRml1h8z+psWeqI/iui0/xaf//BZ8/ua346Zt16DmV1Bw+uA4uSgQhAydQYjNV1pXC/RYT/jjOGHBGXjV+R/Aw4/9i5Y+2MYp2X9z/JJjkVYPyHYu0sYl7dzcvvOPuHP3tcjJPAQkBADHyePCY54UHi1Qr9fr1Wr1mmKxWHccpyGlDMJrM5bKkmJnmtBjkiW0mveILTZrDPWM96J3E7MCwKfRnQLVX0d33zz/BwAv6tFxmxQAPAd6YuOn0O6BN2NmTp9uFSgdATA2C2NAps6vAYzO0b7/D7PjHvMB/GSOjnEdul93xcb3uhzvUqQXJZ0uHoC+Lsbbg/S3Y8ns8dsexHxvl+KUod1k58w00OGC53kKwM9TVr9wrvs324S59r8Oe0qgXwP46FTihfUkXgz735HPd123V2P8HMuybdB/DxJCUnBddwGAp6asvmau+9cJfK7PCnzGHiIcDvc0x2J+01WnkPk9TQBKfk+mxjLaqJRaKpP24zhOIIQIpJRBLpdrFIvFQEp5+44dO+Kcgucd9TgsLx8HXzXCGRuzewpKBKE4ZK5SoZqhWnbvyBwOTOzE7Tt+F69KihBpzp+0dWntk5/NZWnp52wp6JJiSFJMMT+3xgY2D6/HVesux39e+yp89fb3446df0IjqGlnkJCxyBb3JazBpKIhDHcboAE/8PHY456F11/8EZy8+OyWY0oKO+bytLFJHo/tuGxjkRYrbdxHqgdw9brL4as6HOlACIV6UMexg6fgzKXNF0C3bdt2E4DbC4WCyuVysSiUlgIx67vN6ZP8bFuftS/SVfahexM9Ni6AnsicKVsAfLfLffsyul9cPSIH4BXQqe9+AO2aehr0H68fhs4zfew0Y3crdVyxi8d7FliIvJtU0f1aWp3S67RqJnOVQm62jvHL6K6450A/B8tdivdcAP/U5WP+LPT1S+aW2wFs7nLMpwJ4/gxjLIZ+tj1hLgZlnpPmsHuh67o9S5U+T3kzgCdalu8D8GLP84IpxoPneTcDeF/K6k+7rntCNw/Add0VsNdq++10+k/IEcbzoF+sSzKGuXuhaDrwud4j+Iw95Dhc7mmOxTyl606hZEorWw2gaHlSEOrEWYRQLLLtIxKF8vl8UCqVdo2NjV3daDQUAAwWF+HClU+BH/ixxKMi1SL2DOnfQkT1hHRdHF0Tx+iKAgpOCddv+RmGa/uaixOihi0tm9nW/J0UbWwp4ZICRlIASpKVSs22XzP+wcoe/GHTlfjczW/Fx65/HX609tPYOfogpHBQdEpwRNN1pTcz+h76rITQV1gAhao/gXJ+CH9/5mV4yTn/hqHiYiilEATBpH6Zqets4o6tv2ljmzXmtjFOE6B+seFb2HjwHuRlQbufAt324SufhlJezzE1Gg1MTEz8rL+/f3c+nw8cx/GllAGA6LqX5vUeXb9mH5L3RVr6uE7WUxCaFT4D4P4exv8AdIqimdLtlG956DeJXt7FmBLA30MXQP4igONS2q2GflO6m2/oT5U+AMu6EOcc6Dd3F880EGlhNsWZiDHMbkrBnwOoz8FxztbYHoQWhrrJwwBchZkLQ0+EfhO/m9Sh3aFk7lEAftSDuF8AcO40t70YwM0AHjtHYzLf+Tn0G85JTgTwjLnu3Gzhuu650H832niV53lbZxD+g7CnRx2Cri/UDWd7xMkpyx/q4j4IOVx5fcry//M871DKcsDneu/gM/bQ4nC5p7sBx6IH9ERlt6V6MyfC09qF32WUEs74jKRQZJkEbxGG+vv7MTY2ds3Y2Fj8tt/FxzwFy8rHwA9qaBqOZLixiBcpqFgw0mnlBALVFIogACkd7K5sxZ82X6W3aVM3qJNUcZ1sm+YCSsaO2qS5b8IDbdlm7/gO/HnbL3H5re/DB//4clxxp4ebtv0SY7Vh9OXKkDKHSC8LKzMhULpeUBQumTbODxrwgzrOXPoIvO6ij+CJq59ndewkRaqsdG7txiptW5trKq1uksldu67Hbzf9EIVQEIIAGqqGYwZX4/wVl8TtxsbGNo6Pj/+8VCqJXC7XMOsJhddrfO0mRaLEcrPOUOo9mlZ7yBab9Iw69FuZvWIBgA91Ic6tSLfhT5c8gC8B+CG0UDNdigBeCuBuAN9GZyneLsT0ctlXunj8T5zh9s+Arg2ztIt9IpqrYa1u11N+htl1eRwE8LsZR5kaewBcN4v7+wS6L3w9AcC1AM6cxrYSwBuhz3Wpy/36OoCdXY5Jps8PehBzCPqe/dspbHMi9EsS18P+Vi8B4Hmej3Sh9m1z3b/ZwHXdEoBvwf4G7Zc9z/vhTOKHNSZeDPvfUY8B8NYuHs6SlOXDXdwHIYcdrus+CcDZKasvn+v+TQU+13sKn7GHCIfTPc2xmL/0LH2cbV3SEWQuMxwS0fIgqsOSdFYk66QYKeSU6RYaHBzctH379qujdisGTsC5Rz8egTFXJIQKxZ5IOGimQBORP0jo5UKF7cNeSkj8ftP/YM/4NmsdH1tdm+T3rBo/tm3TauIAdvEoq7YQBLBzbDOu3fwTXH77+/CxG96AL9zyTly79Sc4UNkDISVK+X44Tk4fsgIQimMqVNCk1IOmFCBFKAYpAaUC1BoV9Dn9+Os1r8SlF/4HTlx05qR+JgWrrFpCaQ6htG2T4lOayyhrTA9O7MH/3Pd5VOpjcGQulhKVUrjgmCdhSenoeNtt27ZdOTAwsLVQKPhG6rhkLaHUNIspwqe1LlCa04jMCVcB+GUP478IwOO7EOft6E29k2cDuA/AN6BTyuU72EYCeCSAT0G/BfYVAKdNcb//hPS3RdLY08XjfiumV/OpBD3ZfSWAgS72hzTZB+APs7zPK+fgOGc7hdxPoOsZzRYbkV4sfSacA50i7CsAHg57oV2TMvRz+FYAH0dnz7ipUAHw7z04TjJ9/oTe1M4agnYh/QHAS6BfqDCvv0UAHg3gTdB/V6yHTqfKv/Xa81nYReSHu6777Lnu3CzwYQCnW5avg76eZoznefciXfx5j+u6F/X4GLuV/vNw6QchMWE9sf9MWX03gF/MdR+nwZH+XJ9t5suzbb70Y045TO9pjsU8pOvp42xprGzLk2mykstsk93RpHrkKLJ0Q4Vikp/P5+ulUimoVCo/GBkZiYvBP2bVs7CobzkC+ABU0+WiAAQ6LRggIIR2wChEy/RsavgRSgGOzGP32Bb8bP03MlO0Jb+bqdGSTpW07bNS0CW3yaq5M1YfwYZ9d+MXD3wbn7zxzfjo9a/D1+/4D/xx05XYNb4Zjswj7xR03RzIsH/NNHFaNAvFllA0E1HpJQCQCj4a8JWPhy17JF570X/hmWtejnJ+wJruLsulk5UGLss51IkDK20czc9+0MCP7vscHjxwN3KygPDSgK8aWNJ/DB6x8i/jfo+MjOyr1Wr/Wy6X/UKhUDNSxyEhggbGvZHawXYOH1uaxYR4pOgSmlUuQ2+dCZ/GzCcib4F29vSCPHThz19CT8j/FtrJ814A/wztpvr3cNmvAOyFflv/tZhZ6rSPYmqC2YNdPOZzAXwT2s3VCWXoyb11AN7QxX4QO7OZQi7A3OQxnm0hai7S8r0b+nnRbRxoh+L1AHaEx/YRAO+AnkB9D/RkxO+hn2lfR/rbaTPlQwA29Sg2mR4KOj1sr3gM9FuNGwA0ABwI97kP2kH6MeiXLCgGdYjneZughV4bH3Nd97CdZHJd9+kAXmNZ1QDwQs/zulmf7ZMAfmNZngNwheu6/V3Yx0TK8uOmFKUHuK7rQtc0IAQATpnrDhi8EDqTgo2PeJ53yM0LHMnP9R7DZ2w6vKc5FkccXU0fZ9YEsqW2AlpTxiWEH2t7yz6CyBmUjBc5jSJRqFAoBPl8fv3WrVvjt2lXDq7GhSuejLqvU8jJKKmX0jVwVJj+DBCQUkBCQcooc5zS7SEgJSCFQN4p4NotV+PW7c0sLknnj+23zSmUxOYcsm1rpkyzuWP2jG3DTdt+ie/e/XH89w2X4RM3vAnfu/tjuHPXn3CguhtCAEWnhJzIx6YpAQCBghAKEpE7Kh4sSGjRrFlTCPADH9XGBBaVluN5Z7wBl174H1iz5LyWY0jrt+ngsR1T2niljUsydtJRZBurZOxrNnwbN279KXKy0Eybp/RxPuKYp2F5/8q47datW/8nl8ttKBQKgZk6znYtJ2tt2dIqmvdCWtpFU0RNu7+S+yI94070TnABdKqjN3UhzlsBbO/xWAxACzWvBvAuaOHmwwDeGS57IoCFXdpXDsD30PkfsXd3+Vj/Hlrk+RCAv4R+63th+LMSwKOg6y5dAe2I+mK4nPSe2RQw/ojeCBfteBDAXbO0rwqAa+bgGPdBp2zrJcsBPBNa3H8/9IT8uwFcCl3DpdjDfd8HXauDzD++Dp2msddIdP5yAcnmg7Cn8VyF7tdWnBe4rrsc6WlT3u153o3d3F848fIS2NMMnQL9N99M2ZWy/LwpRekyruu+A+lvKpMjky+6rrtwrjvhuu4x0E5mG/dDv8R2qHLEPddnAT5j0+E9zbE44uiqKJQ2+Zx0BaW4iFrEpKSQFP221Ssy1kkASkoZOI7jFwqF+sDAQGViYuLHw8PD8YTNY1c9E8tKx6AR1EOhA5BChr8joSFyo4jYGQMlQteMggqiAZSoB1X8+P7PYfvog7pZG+dPOweLzWGUtW0yndr+id24b++tuOr+r+CTN74ZH7n+Nfjqbe/DNRuuwAMHbkdNTaCQ60PBKcBBDhKy6fRRUc0gQMhQ/hECIlLPIldQ7BrS+6w2JlBwSnjcqr/Fmy7+BJ5y4j+gL1du6X/WuHRSPyjLjZU1pmmim7kuuf0NW6/BT9Z9BSq8NiK3VD2oYcXACXjMqmfGbffv379rdHT0h4ODgxP5fL4euYRM4dKMnRRP00RQm5POTJ9oE4zMdeZ3kNngnQBGehj/XZj5Gzz7oN0qhxPLodPx9HXQ9mZ0v+7LMgD/Al3HZgOA/eHPFugURF8C8AJw0m+22YDui4BpzIWDJmK23EK/AjBXBTyvQG9qvMw1daTX6CBzzzCA/5rrTpDOCd8qTxNZL3Vd9x/muo/dJEyncjn03yFJ/gDA68V+w3FOE+tf5bruM6cSz8L6lOVnu657dC+OKQvXdR3XdT8N/dIAISbHA/iG67o9qdPdCa7rOgC+hvTMC5d5ntft+oyzxpH2XJ8l+IxNh/c0x+KIo+snODlxnRR0os+JNHEtopFN+DEmt0NJogVD0gCEELFbqK+vD4VC4ZbNmzdfFTU+ZvBEPPzYv0KgfD3ZLwAlFFSYzStQ5m7C6jlG3SEFxK4iQKAgC9g+ugFX3PkhDFf2tzhf0tKkpaVES3MO2eoORYzWDuCe3Tfh5w98E1+69d346A2vx8evfz3+977P4a7d12JfZScC+Cg6JRScvjAtXHhQcRdEy1cBEdYQUvFCnVKvOdyBClD3q/BVgHOPfhwuvfCD+Kdz3o6jB46fdEw2kseUVQcpOVZZ4zHV5UlB6K5dN+C7d38UtaACKZolQwKhoBDg0cc9A0vLx8TLt2/fflWpVLqrWCyKSBQSQrSkQcyqAWQTdqLlWU6fdrFtohHpKbsAfKCH8QfQnTcwr8bcv4XTbS6ETk3Xjhr05DY5MpgtsWYu6glFzFZdobkUvgDgZdBvgx1OvAVAV9/iJ13nkwB2znUnyJTwANybsu7Lrus+ca47CACu665wXfczrut+wXXdpdMM8/8A/JVl+UEALwoLtfcEz/O+ivR/F748k4lFz/NGoF2USQS0+3rWCNPh/Qj29HyEAMBfY24dK58B8OSUdVd5njcX6Y27zZH0XO85fMa2hfc0x+KIomfp45LLk78TjoeWVHA2F4Tv+zJyFAFIpqcLkvsWQqhcLtcoFAq1gYGBxsTExLcOHDgQu4WecMJzcMzAavioI5KAVJw4Dgjn9AEldG0hpYUSEQknIhQ9hDYbFWQB9+25CV+94/0YqR5ITRmXJnwk1wN2kcRXPkZq+/HAvjvxswe+iU/d+BZ4f3o1Pn/L2/Hdez6B67dcjV2jmwAI5J0+5KR2AwkhdfEfNIWfQClARgnhAKGax6eMcjdB2BcVAFIKBCrARH0CgMKaJefj1Rd8EK++4IM4Y+nFsXMoS+CJji1ZMygpDpm/k2nhstxTU4ltjj0ArN1zE752+/sxWjuIvMwjEsCEEGj4dawaOg2PPa7FJbSzUql8a3BwsFEoFGr5fL4eCkLWeyC6zm1jYopAtppbgD23fPK+arcf0lM+ju7WrUnyXABP60Kcf8PcTmT3Ah+d1V/49lx3lMwasyFk3IP0N+5mgxvR+0lrhdkTn9IYAfB0AHvmuB/d4ksAPjHXnSBtGYV2gpJDBM/zqtAOPNuboyUAV7mue8lc9tF13ZcAWAst6rwSwPdd151S3UjXdc9A+kTNpZ7nPTQLh/JK2J/JSwFcHjqZpkvaCzz/7Lruolk4NriuewqA66DTi5rcMBv7J4cUb3Jdd1ZTwbquK1zX/QiAV6U02YVZnuDvFUfKc32W4TM2G97THIsjhp5YwaJUbmE6NyRTZJnLs2oPmctN4cfcV0pqrDiFXD6frxeLRb9cLq/dsmXLFb6vX5pa2LcUTz3xHxEEoQQStM4mRiIQwtpBLaYaIG4vVCQiOcg7Rdy+8/f40q3vwp7xbdaxsdXDyVrf8OvYMboJt+34Pa66/yv4wp/fgff//p/wX9e9Gj+691O4bcfvsGPsIVT8cRRzJRRzZTgyp+PEao8I+9kUvaIzHxuglIodUFEXRJQjLkqnBx81X4tBZx31aLzivH/HZY/4b5x/9ONRcIphny0nwxCIkmJRVl0hc9u0sUzbPi12cr25/I6df8KXbnkXDlR3IScLYSq90D0W+JCQeNpJL0Z/YSi6RrF169Zvlkql+4vFop/P5+tSykBKGYucyWs27Rq2XO9JQSg6U0iLbbsfmDpu1qkC+Nce7+O/0VmqtCx8AP8Ae7HgQ5FvQf/R0Mn1/j3owvLk8Ocm9L6G1lw7aAIAvX5L6gbMj3tmPbQwNDzTQHPMldD1isihwTehHbbzjWCuOzBf8TzvJugaYTZKAK5xXffVs90v13VXu657JXTKNzOl7CXQtcw6jVOETqtp+1vwCs/zvjMbx+N53m7oyU8bTwPw2hmE/1bK8iUAPtXL43JdV7qu+0oAtwI4K7H69QDe08v9k0OWt7mu+8kw3VFPcV23Dzql0mUZzV7qed6uDkPOew735/ocwGdse3hPcyyOCHqZH1AhrBMETBKArBN3CWeDSKaSi9qkTXQnnRGGW6g+MDDgT0xM/GjPnj3rovUXrXwqTl92Mar1CiCbtXSiHqpIVwlr5yAWS3S9nUhR0ZqKbtDnlHD37uvxmT+7uHfPn+0DkyF0TDTGsGV4Pa7b8lN8666P4BM3vgn/feNl+Pwt/4Yf3/sZ3LLz1zhY3QspcsjLgq4NJItw4IRGIGWqOloAiQQtFR5H1AyI0+eJ6FhUM2OcCjdo+FXU/SqKThnnr3gyLr3Aw2sv9HDhMU+CI3OTXDk2ki6faJmtTTJGp86grNhp4x61u3bz1bj89vdipHYAeVmMByYqJ1XzKzjv6Mfj/BWPj7fdvXv3PdVq9cf9/f1+Pp+v53K5hogtZq3XZNIFZEun2K6Oli0loy12ch3IbPN96FoyveJkdEd4Ggfwtzj0haEvQr891mmalBqA/5jrTqewea47cJgxGw6XuRaFMAvHOJ9chTcCeAoOXcfQjwE8D50/r8j84JWYH8JoxB4AT0VnL0IckXie9ymkT2zlAXzOdd0fzEb9BNd1F4Zv2a4F8IyUZlNxnH4AwLmW5Rsxyyl4PM/7HwBfT1n94dDRNJ24f4KeMLTxAtd139mL43Fd90LoN9e/AKDfWFUH8MLwuuLfaiTi04nvrwfwa9d1V/Vqh67rng3gzwBelNHsHZ7nzceXGWbEYf5cn1X4jE2F9zTH4ogj14ugZnq45LJEPSHTSRQk2gdmXSFbWqwoVlSXCIn/OIpqCxUKhVqxWMwPDQ1t2Lx581cWL178gXw+L4u5Pjzz1FfioQNrUW2Mw3GchB1I6do6UDCyyQEIxQcFKBm1iA01KDhFbD54Pz5381vxuOOfgyec8Bws6ltu9gsAUG1M4EBlN3aObcb20Y3YMrwemw6uw8HKbkz4Y/BVAwIKAhKOyKGYK8ep7qKaRiJSeqShXGmbE4RqikEi7LsKohpKocspPAZTLdJikUI9qEMKByv6T8BZRz0KF654MlYvPKOzBE3AJIdOGkkhx/ydJTIl92Nra3Mp6TOoxbJqYwI/f+Cb+NkD30BD1ZFz8hCB0DWmlB6LhmpgYd9yPP2UlyEntQu4Vqv5W7Zs+eLQ0NCmYrHoFwqFmlFLKM0NJKNrNFFTC2lpE5P3kk0UTd4DifsiU0glPeNN0JOXvRLl3gb9lugDM4xzEDof/dcA/N1sDU6XCMJx+BCmPjH2GegaJefM9UGEjEH/8dPA/JqAPxz4X6Rbz2fKTmg30lxzDYAKZu4gTGM+CF8mNwJ4DICroEXyQ4XPAHgDKAgdimwD8GwAvwVQmOO+7AHwRAB3ArgewCPnuD/zmTdAv0GelmLkOQCe7LruRwF80vO8A93cueu6x0OnEroUrW+QJ3mr53kf7zDmk2B/ezaAnlCbCyflGwA8AcBxieVFAN9yXffhYfqnqfJWAD9PWffvruuuBPAmz/MqMz0A13XPAvAO6L+Fk3+77wPwHM/zfht+39KTUSSHIh+Brvn6T8ayxwG4KxQM/tvzvLFu7Mh13eUA3gX9PMl6W/+TnufNaqqnWeawe67PIXzGTob3NMfiiKMnohDQmrYqreYJUibIbaJSMrY58R3+RhQj+h6mDlO5XK5RLBar/f39ubGxsas3b978lyeeeOLjAODkRWfh8Sc8G1ev+wqkKsVPKCVV7KQBED+6lJFSTMjQpYLIpYKwbo9A3imi4lfws/VfxV27rsPjVj0LZy57JEZq+/DQwXuxbeRBbB99EPsmtuNgZQ+qfgUQCjmh6/84kHBksXnQYWeiFHDxp0jPCQWMSLRCoOsdwagbBERiigqPQafHE2HquCDw0VB1CCkwmFuE1YvOxPkrnojTllyAJeXJL1yYtXqase2kpW9LOoiS68xtkm4gm6Mo+d2M07JeALvGtuDH934Wt2z/DYQQyMm8jmmk1guUQhAEeNLq5+O4BafEmz/00EO/cRznF+VyOSgWi9XIJRQ5hVKuZZvTp0XMTApA5vKo59G1brlPrPcZBaE54c/QKWdeNNNAKfRBF8B+ehdiVQD8PfTbQu9H9j/E84Vt0H+g/HKa2zcAvAB6crl/mjG6xTroyca7oP9N3gGg52+4HUH8Clp068V5/j/MjxRO4wB+DXvB8ZmyHrpu0nzjPgAXQ6freNZcd6YNFei367401x0hM+I6AC+B/re9l5kWsrgP+j7fEH7/P1AUSsXzPBWmqDmI9DQkCwC8F8CbXdf9NvT5/ZPnedP62zmc2Hge9N9Vj0b2y0FjAF7ued53O4y9GNqVY4v5fs/zru39qE7G87yDYT0NW42Kc6D/tnzLNOJe47rut6D/XrPxagBPcV333wB83/O8xlTih26CvwnjPzal2VoAz/A8L34JKzzeUejJMnJko6BfPFqMVrfIIHRWgre5rns5gMs9z7t9qsFd15XQf+tcCj2ZXmqzyX9BT/Qfthxuz/W5hM9YK7ynORZHHF0ThcxJ8OT3tHW27c3PSeGn3Xrb8qi2kOEW2rt3797PLlu27JzBwcEFAPCU1f+A+/fcjAf234G802c85oV21RjCUOQYijO0CSCI8szFJh09zy8hIGUBW4bvx3fu/hgGi19DpTGGamMMCtqJIoV2ARVyBUPwQew+itK76axwej9ae4pWmJ1CXAdHGf1TLZGbtiEFLXr4QR2BCtCfH8IpC87DaUsvwDlHPRYrBk6EI5v/3ZvqujHElqSwY7bvJKVbO6Enuf+02Lb6Qmb7m7b9Ej9Z9xVsHV2PgixCCCcea2U4q+p+FQ9b9kg8YfVz49gHDhzYvX///s8uWbLkQLFYrEUuoaiWUErKxDRxdFLtoBRBNG5vS6uYIvxMcs+RWeVt0G8rlXsU/6+gxYQfdSGWAvCfAP4A4KuYv2/fKwBfgS78fWCGse6B/uP+R9ApB+aCb0K/bTYafm9Ajz//4OkeVQA/g74Xu818ctD8L3ojCs2nY0yyHzoF5iug32YbnOsOWbgZOr3lfBTWyNT5NrQg9HXMvjD0K+j/aN5nLLsSAN+YzCCcBHyz67prodMOFVOaDkFPgL0awD7Xdf8A7cRaB+3K3g89CRlRBLAcwAoApwA4E8CjAJyNzlzi1wL4J8/zppJe6AsAjrEsvw7A++ZifCM8z/u167r/DS2AJ3mz67o/9Tzv19MI/RoA5wM4LWX9idC1MT7huu5Pocf1Vmgnb3S+cgCWonmuzoMWU9u5xa8AcKnneaOWdVsy+kSOIDzPq7mu+1zo/z75x8TqIQBvBPBG13W3Qju774D+m+BB6L//x8O2g9CT4KeEPxdDu0KXdtCNGrSj47NzPR6zwWH2XJ9r+IxNwHuaY3Gk0ROnUFL0saWRi9JpOY4TWJbHrgiEk9o2IckmFCW+KwAQQgRSyqBQKNRKpVJ+YmLixo0bN37zYQ972GullBgsLsQzT301Pn/L21Cpj8OROUR+oKjejjmzHjuIwj3qnGCh9NKiIgFQAjlZgILCaHUvAO1IaTqLEOo0eju9KKxlE9X7CaMjPKBYFAlVDC1M6X0JoaACoKUrSiEIRSoFBT9ooBE0kIODYr4fqxediTOXPhxrlpyPVUNrUMy1E2nThSBzWbJdsr3N/dNJ7CySsZMxdow+hJ898A3cuPUXaKgqCrLPGE899kLo8+AHdSwoLsUzTn0lSjn9knkQBNi0adM3SqXSreVyWSXTxiWvxWTaxKQ7KC3NnO/7qeKRRWSN7yMzRR0saezIrLIVulDif/VwHx+Dtn13xboLXQvpbGhB6y3oXTqq6fA7AG+GnmTtFldBTyp/B7P7NtJu6PQHtmLQX4Ae+0PBsXWocCW6LwqNw/5W9Fzxkx7Fne/pDBV0XbErod9GfxnmzsVhsgvAvwH4MuaHm4x0jysAbId+fi+bhf3VoFOufBSTr6W7oevIrJ7rQZnveJ73Jdd1r4N+XrRzVy2GdiD2woW4E8A7AXzZ87yOnw2u674M9n/HRgG8aKpvcPeIt0LXujo1sVwA+Lrrumd5nrd/KgHDN8afAp268aSMpsugBfgXd+E4dgN4red5389oswkUhUhIOHH6Iuhn8vtg/xt+JYCX9mD39wJ4ged5t8440iHGof5cnw/wGZs6LrynORZHDLPyH87hpHhcP8j4HU+YJyfNo3RbwGRRKc2JYa43XRn5fN6P3EJ9fX3VoaGher1ev3zHjh03A1o0OGPZRXjy6n+AUkFYSyZymDR/oql2ZUzTC0T/hSaa4k64Ugjt4tEqgIAUEkJII0Cz7o8Ki/1o05Ey6gYBQZy7LhKkwppBIqxnpAApRLODElG1obAAERCoABV/AlW/goXF5Th7+aPxt6e/Fv/yyM/isos/iaef8lKcsvgcFHOluD6PKaokxZZkCjfbMrNt2nbR5yh2MmZy/7a+ZMWO+jFc2Yefrf8GPnr96/GHh65EoBrIiQJ0fajmOEXp/6D0uP7FyS/CSYseFsfcsWPHDbVa7YqhoaFGoVCohqJQIKX0bSkTk9/DazNIu4ZNMdN2Pdtcc5EgFLYPssRSMut8GMD3ehh/FfQfod1kAjqn68kAPovmGx5zgQLwU+hc9Zegu4JQxE8APBzpxTa7iQ+dQup02AUhQE/wfW0W+nIkcRW6PzF/DfS9Ml/Yiu7fH3uhheJDgZ0AXgn9duL3MHd1e3YDeDf0W3BfBAWhw5VfQ79Z+5se7+cXAC6E/lsi7Vr6ylwPxqGC53l3Q9cjew10qtbZ5EFoF81Jnud9cYqC0MnQKYNtvM5MuzOXeJ43Dj1haHv+rgTwuWnG3QKdeuj3PT6EOvQ4n9pmshJgXSGSwPM85Xnef0Bfq3fOwi4noCdoLziSJ0wP1ef6fILP2NRx4T3NsTgi6JoolFVDKDmhbU5y2+I4jhOkbZd0YdjimCKTsX0sDBWLxdrAwMCurVu3fnx0dHQ4EiOecuILcNZRj0YtqCCIvDlRhjbRTBkXEbl9GkEdjaCKRtBAI6jDVw34QR1Vv4ogcqAILe6IxKg396NdPBLGfpSItQpAp3rTApIIhSoV1zHSdY10qjgowFd11Pwq6n4NftDAouIyPPq4v8ZLz30XXn/xR/DGh38cTzv5RVi1YA1yjq6ZaworzeNrFWyi5VH75HLzJxknic3VY4udFIDaxTa3G6+N4Ncbv4+P3/gm/PCe/8bB6h4UnD5IOEZCNkCE/4SrQAt0Vb+CC1Y8CU84/tlxrOHh4X1bt2796NDQ0O6+vr5asVishmnj/Kk4cpJOH5voaUsR12ls89qnU2jOUdB5dD+I3k1SXgbgjB7E3Qr9B/ax0M6V2Zx02ASdq/Y06JRYv+3x/u6BtjG/Eb35D4oAwHeh0xC8EnqyPYvLoO3XpDvsg06N2E3mY1q1/+tyvKswd+LKdLkDwPOh0118CNrRMRvcDH1vrwLw7wDmotg7mV22QKe++AcAm7sc+4/QNQOfivb/8f1R6DqGpAM8zwvCFCQnAvhndP/cmdSgn8vPBXCK53mfmmpRZtd1c9DuNFtdvG97njevXiLxPO9GaNemjb9zXXdab5l7nrcd+n57M4CRLnd7HMBnoM/RGzt0M/FvNGLF87zroF9QeQ30Cyvdpg79MsAaz/PeFYqxRzSH2nN9PsJnbObY8J7mWBzWdL2mkDEhLUwXQyT0JJwOk2qepNQPammXcBshjG9Lw2Vuq6SUQT6fr/f19VV933fq9foft2zZ8qVTTz31MiEE+nIlPPeMN2Dn2BbsHH0QBaeoxQLZTBcn4qIzAkoFqPt1LC4djTOWXYQ1S87HQGEh6kEN20c34u6d12Hjwbt1qjaV064gAZ3rTUSpygRUKP7ExWwQHa2KO69T04V9QKK2TyBCo5JCza9CqQADhQU4rv9YnLDwTJy1/FE4fsFpWNC3xHrubPV52tUPsolEZjxbCrh2sW3xstLSZdUV2jW2GTdt+xVu2HoNto9uhFI+CrnWTFjCvApDy5cQArWgilVDp+K5Z7wOeacYXXPYtGnTZ0ul0g0DAwN+sVis5vP5uuM4PhLOnuTnZMq3LEdR8hpO+z7T2GRW8aFTv3wJetLwKdBOkW4Vvs9D51N+Yo/6vx/6LeUPQ+cGfi70ZNU56N6LBRPQOfF/A+3cmYs3QhrQby99EXpS+SXQb8PM5Bjvga4b9DUA26aw3UHoNAivA/BMaNFv0RyMyeHE/wJ4fJdiBdCCyXzjSuiUld1iPgpfnbIJwL9CpzN6NHSayKdBC83dcNBOALgJesy/H+6PHJl8B8APoItQvx7AIzC9a2wz9HPl8wCmUrB3HNpJ+1ZogeqkKWx7xOJ53gSAj7uu+0kAjwPwQgB/DeCoGYbeCf0iyzUAfjzVdGkW3g390oqJgn72vGR2R61j/h36Ovx7TJ5r+JTrun/0PG/DVIN6nucD+Kjrul8F8FrodKEnTLOPdejz9AMA3/E8b6pC/hcBPBn635WepOMnhy7htfpZ13W/Av3fFC+Cfs4UphkygBb/fwjga57n9WIy9pDnEHquz0v4jG07NrynORaHJV1LLWWpmQKENU1sNYIsKbCUTeQx0snFNVMigSlqZ9RRaUmlZW4bfQ6CQNZqtcL4+Hh5dHS0f/fu3QuWLl36idWrV18SbXfbzj/iy7e+C3W/Ckc6YYmgppADaNdOI6jhomOeimeseQVWDBw/aUxqfgXXbr4aV97/RYzVDsCReURp5VSoQiglWh1ILcJQKMBAIYCAjFPL6cMNggABfARBAAignF+AVUOnYM2S83Hy4nOweuGZ6EvUB0oTbGykrTOXJwWfTrbPwha7k3UAMNEYw/17b8XtO36Pu3Zfh30TO+FIB1LkICNRDbGmF4+xCtUhAaDhN1DOD+BVF3wApy+9KI79wAMPXH3gwIG3LF26dHRgYGCsVCpNFAqFmpQySF5zSTEm6QxKa9eOtDjJZYTMEgPQExUXQaeaWw39lvwy6FpEpgp7EPrNql3QDqSd0GnS7oB+C/oBzE9HwmJose1CAGeFx3hUuDxiAkAF2mH0AID10K6B34TH2k0G0b7W0AimP5ZD6J7QV8X8Sq+WR/eEWIXWwrTzBQFgQRfjzeRamq8shE4XeT70/XxC+LMYusCwWVvsIPQ1vBv6ebUR+v6+EcAt0ELyfCD5vJ0J8+HaPtSfQyugJ6Euhv5348TwmIrQ4zsMPcYPQb84cDd0zbxuvRU7nefAgVkeo3mL67qnQb9AcCa0sHEy9N81ZTSLmY9CPx8PALgfwFoA9wG43vO8e7vcH9v9UA0nP+c1rusWoMctyYTnedUuxBcALoCeOLwI+oWr49D6HK9Au7O3Qv+Ndie0oH9tN95ADp1c0f5GwsmybozdAtjnaYbnKkWV67oDsE/OjnmeV5+jPjnQfxsnCaYxCZ21nwOwP1dXe573YIcxytAC/iOhX1BZA/3vRT+a98kE9PNlD/Qz5V7oF+V+5XleuywDs4LruhL637Qkvud53XaYdKvP8+q5fqhwmD9jD4D3NMeCAOiiKBRhEWtgEXE6mty2pZBL7stMUZc20W7GbjQastFo5Ov1en5sbKx/eHi4uG/fvoetXr36M8uXL4+VnZ8/cAV+uPZTcKQE4EAaggKgUPfreOzxz8ILHvYvyMl85pjcues6fO3292Okth+OcOJ6P5HpCJbPiErbQECoAEqIcDuFIPDRUDXkRB4Liktw7NAanLb0Ipy69AIcVT4WxYQQlEZa2rV2bTsRepLp4GzrkzWEphI/Yri6H1uG1+HuXdfj3r03Y8fYJlTqo8g5eTgiF6cAjOsGhfWhhIzqM4VnQwj4yodQwPMfdhkuCdPGAcD27dvv3bRp0+uWLFmybnBwsNrf3z8W1hLyc7mcn7y2067BrPVZdHJ9Tzc2IYQQQgghhBBCJtONSdMO9iEP1Zo0hzIc9+lxqI8b72mOBWnSdSteohZKi6Bjpo+z1EoRAEzXD6JtzUam+yctvZZtcjz6LoRQuVyuoZQSxWKx2t/f79Tr9XseeuihDw8MDHjlcrkMAE9e/XzsHt+K3zz4PRScEgCh680AaAQ1rF54Jp5z2mtTBSFT9Dhr+SPxFye9ED9Y+8lI64mdKkIoBEo0y8dGwgUUoCR0tSAg8Bvw0YCExFBxCU5efA5OX3IRTl5yNo4ZPDF2MNn2n+bmSbpw0rClf8uKPRWHj+17FtXGBHaMPoRNw/dj44G78eCBe7BzdBOqwQQkHDjSQdEphfWVEIppAKBi0c0U+JRQYcMADb+Gp5z4jy2C0Ojo6PDmzZs/NDQ0tL5cLjf6+voqkSAkhIgfbLY6WmnpDaci3iTrA2XcP6AwRAghhBBCCCGEHDpwwnRu4LhPD45bezhGTTgW85uu1xQCWt1AtvVRm0SIqB7KJCHJ0l4lJ8vNbWyT44l1QS6XaxSLxWoQBHJgYCBXrVZ/vnbt2hPPPffcf3YcB47M4dmnvQb7J3bi9p1/QMEpAkK7SnIyj8ef8Bz0F7RzNq1Gjil4POq4p+O6zT/F1pH1EDIXaj86056AAmRYcCiqOwSBQDXQCGpwRA6L+pbjuAWn4qzlj8aaJefhqP5jIUR6dg2b+DPJgWO4Z3R/Ey4li0CT5vBJLkvWD4q+J/uS7FP03VcNVOrjGKntx/7KbmwdXo/Nw+uxbWQD9lV2YKx2EHW/hpzjwEEBBadP70NF9ZX0cQihjGMLBSKhhTYIIFIga34VFx3zFPzNqa+O+1Kr1dS99977iWKx+LuBgYEgEoSklIEQQmVdf8nlNhHHvC/SRKROYpvr0+45CkWEEEIIIYQQQgghhBBCelK0y5bOKqoFFK0H0p0NRl0i5WSkkzPbZfXDti6sBeMXCoVqqVRyFi5ciL17937t/vvvP+HUU0/9WyklyvkB/ONZ/4qx2jDW7b8NRacEpQIMFpfgzGUPzxyDpDOmPz+E05ddhIeG18IROUCpltJBkT4DKAQAVOBjsLgYpy45D2cuewROW3oBFpeObtlH1a8ACqgHVdT9anMkwsBSRK4ZGedPK+aMtPNGpacWp5FoPYbkMaV977RN3P/GBMbqwxirjWC0dgDDtX0Yru3FwYld2DOxE/smdmJ/ZSdGqvvRCBoQUg+WhIQUEsVcKXRchU6lqG6QaF4SKgiPTwIirNfUFIz0tlV/HKcvvRh//7DL4vHxfR/333//N4QQ312wYEG9VCpNFIvFquM4flRHKCu9Yco9IJJijklaKkSbwGprY9sXnUOEEEIIIYQQQgghhBBCInoiCkXY3D3mcltNoGT75HJTXApjtQhNGY6lpHikcrlcAwCUUpUgCKTv+8N79uz50ObNm1ccf/zxjwCAxaWj8KJz3o7P3/w2bB/ZCCElFpePxkChNe1i0pmTdMYAwNGDJ8CRDlSgDOFFu1uiOkNKAAsKS3D2UY/GqqE1yOeKaPg1/GHTlThY2YuR2j6M10dQ86sI4EMAaAQ+/KDedB+F7hgBibzMwywdlXPyEJBQSqGUH0BeFgAF9BUGkBc5QACl3CAckdNtCgNwRB5RfrtSrh95pwgo1dSfWoQfgUZQxXhtBBASftBApTGGhqqjUh9DpTGG8fooJhqjqAc11P0Kan4FVb+CWqOCajABpXwI5OBICSlykMJBwXFiJ5MIx0mn2Wt6roxTCxWE3YprNel6TAj0tiIs4lT1J3DCwjPw4nPejgXFJXGEjRs3/mJ8fPyTS5YsGS+Xy1UjbVyQdm0a1+gkgSh5PdrWm23SnEPtYqc46wghhBBCCCGEEEIIIYSQ7olCtknotBRwtlRyaYKRuT78bW4vfN/vKEbSSWHE9PP5fL2vr6/i+76zaNGi7du3b393X1/fJ4466qjTAGDl4Gq84rz34Qu3vAObR+5HQRatDhgztVpLnZ1QPXEgm26W2BcUCkIqgJKAI3KQQuDm7b/G9Vuuho86Gr4f1hhSUMIQQFS0vQKE1FpQixAS9glhF+KUcJGgIwypTMQGGyF1nwMoSIhwH+GAC0ApLTyFxpswjV0Q7i86NhXJMKGYo2JFTildKUlCAJAQQkAK/bvglOKRiQsDtfQfgAhT0wlABcpsFu46dARp9ScWyeI4YUcr/gSOHVyDl57zLiwvr4zbbN68+ea9e/e+f9GiRXvK5XKtVCqN5/P5upQyQMKVliYM2dZHgmZC5Ex18iS2tdbJsomhncQmhBBCCCGEEEIIIYQQcuTRVadQmnsizeVgLks6HWAIPgCEma7L9/2oFEzLdtE63/dhmUAPonVhbG04EQK5XK6hlBJBEMjQMbR+/fr178rn8x9ZvHjxcUoprFpwCv7p7LfjS7e9CztHN6HaqKKc18OXVUtIN9C/Dlb2oBE0UHTyWqgItHiiHUKhEKMC7K/u1rVxwtg5Jx8eLaBkqHEIZSgl4T6laJqClAAQQECGNXR0saJIWNF9lM04ceehhScRiT0KQZiaLdpWSN1rrb1EopcDBUBKLXAhdD4JM2YcQzXdRcroMgwdSAmtMwkVW4NEGEyFdYMMbS2UxlRcGKlpCwvCc9EUsQCg5ldw3OApePn578GxQyfFh7979+77tm7d+m8LFy7c3N/f3yiVShP5fL7uOI4vhAii6zlLhElLIwfDLRets22fdq+Y91IydlIUzRKqCCGEEEIIIYQQQgghhByZyG4FykqnFWG6dFLqCMFYH5ifEy6fwIyXiB0kJ86N2NF+ox8AUFLKIJfLNQqFQq1cLo8PDg7Wh4aGbr733nvfceDAgb2RwHPKknPxinPfi2KuhPX7bov7HglCLe4gtIpFgQpw/77bIOBod40SukZOKFPI0AEkoCCFhBRaYGmxwQilNRIhACVjQUaE6dBi4Qdo1tiBPlIVaBVFhV6XaF+InTfRPhAKSrrvSjVjB4FxvGHKOwHt2DHHQkWCFkLJSwAS0lBxZCwWAc2aSnqcVGQ6Cvskw2MFgiB0Rkmdci8wriAVpZBTkUgWpY/T7SKHEQDU/CqOGzoVLz/vvThu6JQ4xt69ezetW7furYODg/cNDAzUy+XyeLFYrOZyuUZYR0g5GendbKkOLbeBSH5uV2PLJpraBCXbfigOEUIIIYQQQgghhBBCCInomigETBZ2zOVproi0lFhpIlPo9pk0mW5+b5dKy9xvJBJJKYN8Pl8vFovVcrk8PjQ05A8MDFx39913v3Pfvn27ojinLDkPLzzLxUMH70XNrwJAXDsoEoQiIcgUiO7d82c8sO8O5GQOUQK3pjIlmuneIsdQtCyI0q016+cESmn3T1PzMdLBqVgQCYx1zRpGoW4ihF4fikCmiyYy/5i1gppp7/TypqunefpkWPBHRIV/BGJhSoUCVJQ6zjBWRU3jsVRRCrxQjGo6l5rp66I0eqaYpdDctkVLi8QoJVANKli14FS89Nx34bgFp8Tnavfu3ZvXrl37jqGhoTuHhoYapVJpolAo1CJBCM1wVreObZ1Z7yq65hKipUreA2m1hmzXrSkimT9psQkhhBBCCCGEEEIIIYQc2fSsplBShDGXpYk6HU5gT5pAT6ags/XLFKZShKjAcZzmTrTdpV8pdc3atWvV6aef/v7FixcvAYA1S87DYGERto8+iOOGToHUlp9JdYYiQWR/ZReuvO8LGG+MougUQ0ElSq9mFAIykIbgI4WMawEBIi6RI4TQqd1CEUSnW2uWCYqcOtqbA0TGIGk0UNFOhBZazHRuCMUnGKnsoBRUoOsORYKQjNOzqVgo0pvFSd0MB1JUE6mZ4C3qF6CPIaptBKUQZrCDMo5LmsenjK5GsYPY7GQcZ4C6X8GaxRfgxee8HSsGVsWi3a5duzbfd999b1+4cOG1Q0NDfrlcHu/r66uEaeMCNB1m8bVtXDeZTpy0Wlu2+yS5rBOXT5bjjjWFCCGEEEIIIYQQQgghhJj0pKZQ8nvSFZRV/yRtktz8HW1nW5e1PK2tsT6QUop8Pl83agz1A/jl2rVr5emnn/6exYsXLwOAFYMnYKw2jH0TOzFYWIhirhT3NxaHBLBj9CF85+6PYuPBu2JBCABUoJquGkMcCfOcIQhCsQcIa/qopggSCUahaNJSRqhFeGlFZS5oKjNx7aAwUmy0UZEIpDsSH0tLPaVWUafpODIy9kWp3ERraaR4VdQyrhskYmdVnIEu6q4QEKrZcaGUdltFApfQqftqfhXnHv04vOist2Jh37L4PO3evXvTfffd986FCxdeFwpCY5EgFDqEgqxrPksMTVuW5QZqF9u2/XRiE0IIIYQQQgghhBBCCDny6KooBEwWbtLEmUSNFEMZSRdtjHUt7Y3vwvf9ZHsJwBSeBELnh00wklIGQghVKBRqRvwygGvWrl3bOPXUU9+9dOnSYwCgvzAEQOHOXdcCEDhu6GT0FxagHtRwsLIH9+y5Ab9/6H+wd2Ib8rLYMk5abDHsOiL0DQldACcpksSem6beZDQIU9chTM9mpk+LNjENSaHzRild3UfF1iP9f3H6u/j/YOaoM0SpRMo5FR1VKCdFqfTihqFog6bw1BSWROwMMjSelhGL9havj+oehWtlVNspTE8nAPiBD6UCXHL8c/CcM16Hcm4gdgjt3Llz3bp16/5t4cKFNw8NDTX6+/vH+vr6KrlcruE4TiCE8JPpDJPXZVrKRNv66HunotFMY6fVKCKEEEIIIYQQQgghhBByZNJVUcg2+ZxM8RYtS0xWt0yC29LNReJO1D4RL7DFMZcZ/QnMvkWxjfovEEIgqjFULpfHhRAKwIAQ4lf33XffCID3LF26dA0A9BcW4PRlF+MXG76FH679NEr5MpRS2DexE2O1/cg5ReRlCaYHJnIAaQEmgJZmwnpAgYIwc8dBNWviIFJShHbDxBWJ9P/pSM1mTUdNaJmJRB+hDNOOarYPACFbtbYo/VuUvk3EqeIQBddp7KAgRVgHyaipFMUWKnTvRL0OEAtAcRo9gZZaQ003UBAdJYLwuITRIDrWyF2kAkBKoO7XUJB9+KtTX4a/OPEFcKS+3IUQ2L59++0bN25894IFC+4aGhpqDAwMjBaLxWqYMs43BCEJI32cLT1h4lpOCpaTSBNqZho72Z5OIUIIIYQQQgghhBBCCCEmXXcKAS1uHiCcxLa5K2w1hRLrYlcPgI7cGR1MrNvqHU0SqcLUYQgFISilhBCiLIS4cd26dW+sVqvvXbly5cUA0J8fxN+c+mocVV6F7639BPZNbEcpN4CiU24WvpEiFHxgCDJAU95QTdGlxbgTCUSi6RISCAUkxDV8IhdOnKotyqAWpqhTkRQm9H6CsAORMBPtS8B0CSkocz2aQg8QuYz0PmS8JWLpQrSIPLH6A2mmwAuPOd6vIRMqGS5XAk1ZKD68WCdr6XsYu1KfwFEDq/DcM96A849+fHw9KKWwcePGX+/cufN9CxYs2DIwMBA7hKKUcVLKwLgW2153iWswNbWb7XpNXvcziW2LT5cQIYQQQgghhBBCCCGEkIieiEIhLUJPQgAyxZ6YpCvCcZwgzT1k26HpLDKXp21rSwlmtIWU0geAKJVcmFquXwix/qGHHnLHx8fdk08++WlRDaFHHveXOHbBKfju3R/F2j1/hpKAo5xYoIndLJFxR+g0ciowDkckRZhwoQjTooUrAgVIGaZcU2ZOuABKiNhSEqeAi8SiWDcJnUlI1OkJ28YiTWCUBIrPrIAQKha1VChGKUOMEsa+pWx2L3IqiSirXKgcRYcZI5suJZ0bLh4eIACU6Rsz5MeGasAPGnjY8kfi7858I1YOnmReH7j33nu/c/DgwU8sXLhw9+DgYK1cLo8nBCE/cS3F6Qdt9arSBJ2sNmnXbbdiJ8VVCkOEEEIIIYQQQgghhBBCgB6JQjZ3TqI2S5SqLa7z4zhOkHRF2Gr+JLYz1yVdHaZsMAmbQGTGjD6bNYaEEEoIoaSU/VLKLXv27Hnn2NjY1tNPP/3FxWIxDwDHDZ2M11zg4SfrLsdvH/ohakEVeVFAi4IhlHa+RMYeI/VZs2yQlkTi1Got6eBMfxFiFUkLNeGayEGjDMUExk6ib4FZUyisxROlfTPGq0WkCgUh3UxBRj3RhigoEYpWgUAgmr3V4k+ghSARNgoVMqG08wmhoBWoZl2g2F0VO590OrpIlopS5NWDKvqcEp548ovxlye9GH25ctz/8fHx8XvuueczjUbjm0uWLBnt7++vlUqlWBAKU8YFyfNvCpPRNZNWqydLuDQFpmRbW+x295LtfotOblIsojBECCGEEEIIIYQQQgghBOiiKNSJOyfpGjKwOiI6qVGU5qjwfd/8nDkpnnQjJT4r3/eFlFLk8/k6oFPKCSHKjuPs379//8dvvfXWB9esWfP6xYsXLweAcmEQzzvzDTh58Tn43/s+j83D65B3CnCEA4RuHxmE7hqlXTsiFmYApURcY0drJk2bkYLS6dZUVI8n9v3EjhoBEa8zpJNmSjcjt1wAFZX6ASAgRaBrFgUCSmgBRwjtBtICTejsUQJSKSBKLxfpM0GoQykAMhSMosJBUkEFQvdPNPsl4903883F7iVAO5OgjDpKoWAk9fdG4KMR1HDCgtPwrFMvxdlHPbrl/O7cufOhDRs2fCSXy/1yyZIltXK5XCmXy+OFQqFmiH1BhqMnVtJszjXbtZR2P1j2MdXYk+oKJWtz2WITQgghhBBCCCGEEEIIIV13CiUntM1J8DSHQ7v0WrZto30YMYJkmjrTmZFWvyhyZ5jxkp/Dtn7kFAK0MBTWnsHw8PD3165d+9Cxxx77z6tWrTovSid33orHY9WCU/GTdZfjxm0/R9WfQF4WdOdl0sETpVuLBJvmKhW6fUQo5EQz/VojEU0zkIzaRwJT6z5EWN8o6p+CrnEU7U6EMpIIFSYRflZKISp1FIlMkYiVVCO0q0c0XUfCWB6mwVPCcBVFPYlqLwktVEXNW/YSClNRUKUUan4FpfwALjn+2XjayS/Gor5l8XgGQYAHHnjgdzt37vzEwMDA3YODg365XB4vlUoTxWKxmsvlGqETLACQ5mIDEqkOfd+Xvu/b6lnJ8HqxxYiXJ673pHMoM3bUlzTRybw3su4dQgghhBBCCCGEEEIIIUceXReFssSgdk4ItNYREpHbJ1qe3Idtvwj9JeG2k9wZlrRxLWnmstwZQohASolisVgN688EoTBUyufz12/atOmykZGRV5x00kl/VyqV8gCwpHw0XnzO23D2UY/GT+6/HBsP3g0pcsg5uVBlUYa1xuiJULEYBDSzrelUcjKSb8JUb7qukBJN146QselGbxsoCClj91AsPoUjFjmN4u5EBx2LU4bQE67V3VcIlIIUMvYkKaUgJRAE5kiKyNqknVJoHqe5QxFooSquJRQKRiISw8IuN1QDKvBx8qJz8FenvGSSO2h4eHj0gQce+NrY2Ng3Fi5cuHdgYKARCUK5XK4R1RBCQmRJXEeTBESbAJkg9VrvsP5PZuyU+0qaae5sfaEwRAghhBBCCCGEEEIIIaRrolBy4jyZ6qqTGiy+77d8NtbH29gm7c39h1+Vk5KqLtFukoMpa6IfgIjcQvl8vm7UGAqklKVcLrdteHj4Q7fffvsdJ5100v9btmzZCdHW5x79OJy06Cz89qEf4bcP/gj7KzuQd/rgwAEg4hpDkXYSp4QLF+pMbaHTJoicO2EtIYgwbVxTv1HKqDGkoFPAxaKNXhfV7hFxGruEPhWJRZHdx3D+IExjFyWvU4a7KRKkorR3kdsoGvGoqXGUzcxxYd44oaLexhYlfX5UAw2/jsV9R+OJq/8Oj1v1LPQXhuI2Sins2LHjjg0bNny6UCj8afny5dVSqTSpfpApCJnXjHEdWNMJJn8nxaLkhWNzqNnunbTYRpvU2JjsNqIIRAghhBBCCCGEEEIIIWQSPakpZAgvaaJN5vbmMjO9W4iAnsCfNEketovFIFutoWTbNv1PEotNUsogl8s1hBDKcRw/+snn843h4eH/uf/++287cODApatWrXpGsVjMAcBgcRGeseblOO/ox+NXG7+Hm7b9ApXGKPKyCCFkLHzENYQilSaU1+LaPcIUZwzNJK69E4otoc0nSv1mVpcxRRkViUZKxfHNGkbRFsmTEClJkeEpSi6nwtRwUMJU05pp6JrlkmLnDwLE9YmiNHFRWwVABQFqQRXl/CAee9yz8KTVz8eKwRNaOjQxMTG2YcOGHxw4cODLAwMD2wcGBoJSqVTp6+urFIvFaqFQqIViUJCVyjB5rWSR1n66okwnfWgXm4IQIYQQQgghhBBCCCGEEBti5iE0lrRsk9wKkXvITHVla5NVP6hNfDONVkv6r+Q2afufyvFG4+f7vtNoNHLVarVYrVaLExMT5fHx8fzBgwdLUsonHXvssa845phjTheidbjv33srfrnhO7h7z/WoNsaRk3lIkQtr/zSPwPgYEvtzdA2eAJAyaqtbxs4bNGsFRSnpWorlQAs2OnWcFpGUMN07YTzj/2O9SgntcQpdSCIUsFSLeiRa09XFhYbC9HgKEFK0CEym+uSrBhpBHaX8AM5e/hg88YTn4eTFZ7eMYxAE2LRp0007d+78IoBrh4aG6qE7aKKvr69SKBRquVyu4TiOnzj0FtKuhU5Sv2WkRIRt/VTSyk0htoTheEq4mCgUEUIIIYQQQgghhBBCyBFO10ShJIkJ7BYhKLF/lbbMNpGeITal7idNTEpzESXbtTlOqZQSQRBI3/eder2er1QqfdVqtW9iYqIwOjoqR0dHjx0YGHjuCSec8LxFixYtawmggLv3XI/fbfof3Lf7zxitHUQhV4CAM2lAYqEntOKIuC6QduFE9Xlsg6rjCCidqM5IBRdt2+rMEeaODUkoWVsoqmMkIQwvkdCp64LwAEVTiIrS1YmW9ipOIxcvUQFqfhX9hQU4a/mj8NhVz8RpSy+cdEx79uzZ+uCDD14xPj5+5dDQ0O6BgQHfdAdF6eKEEIEQIh4WQ3RJvd7Srrk0ASfr+kxb1sm6Tq/nTmITQgghhBBCCCGEEEIIOXLpuihkczMkXQ9thJ1JbWzbpi1L2zarT9H3qRyfRSQQSinRaDRyjUYjV6vVCqFrqDQxMVEcGRnJ1Wq1sxctWvT8E0888S/K5XKxJW7QwLp9t+O6LVfjrl3X4WB1LwSAnMzr1HJoFWpaRSJdxwcI3TtapYnbtZ7sptsnSg+nHUyxn6glvVtctCZUgFJjR/GM9Haxw2mSsIQ4ZV1LgjoVoBHUAaGwoG8Zzl72aDz82L/EmiXnQiQu1dHR0eENGzZcdeDAgR+USqV7BwcHg76+vmqpVJqIUsVF7qAwxV+cbrAT4SZ5DdlEoTTBaCoCYztRx7zW0q69qcQmhBBCCCGEEEIIIYQQcuTSE6dQmrOhTeqsSY4NYxur+aWdG6KDOkGxRtHOlZSRyktEgkPoGoJSSjYajVy9Xs/XarXCxMREqVKp9I2Pj4uxsbFyo9F4+IoVK56/cuXKx5RKpUKy31tHHsBNW3+B23f9EdtHNsJXdeRlAdqPY4g6QEt6OfOIojo/ylyuTOnHGASjzk/U0ExZ11K/KFoRoEU5ElFfwrPVUpsIQBCoOMVd1FinpgMUtBjkiBxWDp6Es456DC5e+RQcM7B60jkdGxsb37Rp02927979vUKhcOvg4GClXC43isViNfrJ5XKNsN5TEApCnTh3ot6hE9HRdi1artf4d5qDrZ3I2UnsdvcGxSFCCCGEEEIIIYQQQgghQA+dQp2k3TLb2bZJEV6yUmlJ0xFi269lgh0dxk6tgWTpowyCQAZBEItD1Wq1WKlU+iqVSrFSqTjDw8OD+Xz+MUuWLHnOqlWrHlkoFGSy3/sru7F2959x247fYf3+2zBaPQAfAXLCgSNzEJBNiSdKBQddG0iFKdwi0UghNvg0XTdhGjjAEIZaahEZzh9EbiFjHbTbR4U7Ec1iQ0DLvlSzlFC43A/q8JUPKRwMFhZizZILcO7Rj8VpROtVMQAAFw1JREFUSy7Agr6lk66r8fHx6ubNm/+0b9++H/q+f92CBQsm+vr6fNMZVCgUao7j+FLKQEoZ2M6rTWBJu0an4h7LajuTWladxE4eFwUgQgghhBBCCCGEEEIIITa6Kgq1q8Uy1Vi2bTMcOzHt0nGZ/eskVqfp7pKxlFKxOFSv1/OROBQKRIXx8XExMTGxUCl10VFHHfWso4466hGDg4ODyT4EKsCOsYdw967rcc/uG7FlZD32V3bq9HIiDyEc0zjUTOWGVhuJSKaIk2ntWj+osHaRUMb2ZgcFmutEq5tIGO6gRuDD9+uAEFhcOgorB0/CGcsuxlnLH4Xl/cdBikm6GA4ePLh/586d1+7YseNHuVzu9nK5PNLf368KhUItqhtUKBRqoQjkSymjdHGq2wLMTLafal+m2jeKQYQQQgghhBBCCCGEEELa0TVRqN2kd4ZbI+qHdTtbuq4UEcZMTqYs2wonUVcGk51C0nSXmKntzPRflpR3k2KHbSQAKKVEEATS930nqjdUq9UKoXOoUK1W5cjISElKed6CBQuesnLlyicvXLhwsl1Gx8Lm4fvxwP67cP++W7Bh313YX90FQCEIAgghIeFASgkpBFQQ1e7RvQ2UgoxcRa1Ff1pORPKExDWAYstPYptwndaCAgRK/0DpmkVCSCwsLsfJi8/GmsXn4cRFZ2Ll0MlWIQgA9u7du33btm3XHDx48BdSyrv6+/urpVLJLxaLtb6+vko+n6+bdYOklIEQIuhGfZ2sGkKWc2y9rm1C41TrBE03dlp7QgghhBBCCCGEEEIIIUc23RaFWsSRaHkHdXmsaeTS2lqWT6rZYqtb1G6iPGuCPq2/nTiioj6GziGRFIdC91ChUqlgbGysTyl1bD6ff/zxxx//F/39/af09/f32+IGKsBo7SC2jWzAun2344F9d2DvxHaM1g9grDaMml9BzslDwoEjJIRw9ElvqUekQrFHO32aNYSahYaiekHGr2bRIKUQqAAKAXzVgB/4KMg+lApDGMovwNLyMVi96CycsvhsrBw8CQOFhU2RClrkir6PaO7dsmXL1b7vXwdg68DAQK2vry92BlnEICWECJBIA9fmXLQ9x+1iTVVsabffdm076ctM0tQRQgghhBBCCCGEEEIIOfzpevo4m7MHmCyiJJdF2yPFrJLYPnIFTUn8SbqJMlLKiaz4yeXGWFq3MccHWhxqcQ5FaeVqtVqxWq3mK5VKrlqtyvHx8bKU8vylS5c+slwuP3zlypWnOY6Tec5GavuxfeRB7BjdhJ1jm7FnfAv2TuzASHU/hmv74Ac13ck4V5wIU75pcUYFgJBRLSLRkpYuFnCUggrFooJTxEB+EYaKS7C0vAJLyiuwYuB4LOs/DscMrMZAYUHmNVOr1fzt27ffPT4+ftPu3buvlVLeWi6XK319fX6hUAgKhUItShGXz+frCWdQVC4JKded9Rpqdx2nuW7SrgPb9djunkiruZUmjk4ldnI/7Y6XEEIIIYQQQgghhBBCyJFBz2oKRUzF7WBu06H7pqP4NiEnTaQy12fFS5ugz9qf0VYCQBAEUiklfN936vV6PhKIIpGoXq/nKpWKmJiYyDUajWOklCcVi8VHrly58oKBgYHjS6XSgOM4mcfeCOqYaIxhoj6Csdowhmv7sH9iFw5U9mC8PoKJxhgqjTE0VAO1xgT8oK43DMUfR+ZRyJWQl3kUnDLK+QEM5BdgqLgYi0rLsaC4GKXcIMqFIZTzA3BEoj+RBBf1p9FApVIZGR0dfWjr1q03ViqV64Ig2JDL5Xb09/c3+vr6ELmBTFdQJAYJIZSUMkjswSRZHin52SoIZm1rc4VZrtc49WDaNdap48wWG4YTKuv6TROIKA4RQgghhBBCCCGEEEII6Wr6uLRUWGkT3sBkB1CYBq5lEjwtjllPKEoflzEBb60L1InTI9k+uS65XZqLxGxn1jRKOodMkShMMZev1WpOrVaTtVqtMD4+PiiEOHVwcPCsgYGBM/v7+09ZsmTJyr6+vvx0zl2ggvC3D6UiXUNrIkJISOFAQhh556ZGpVKp7d27d9v4+Ph9IyMjdx88ePAOIcS6crk8WigUaqEjyC8UCnXTERQJQTZnkG3Ms1L6tbs+212zncRqh83F1q2aP0wXRwghhBBCCCGEEEIIIaQdPU8f184lkVxmW5eVrguWFGHmdrb4Zpq4pJjUSb8TMaw1kJJjYsawHJsEWsUhpZRoNBq5yD0UCUTRslqthkqlIiuVSr8QYpmU8jjHcU4eHBw8bdGiRScNDAwsLRQKCxzHKeRyuZY6Pr1AKQXf91Gv16u1Wm14dHR01/79+zeMjIysDYJgQxAEm5VSu/v6+sZKpVKQz+eRy+UakRvIcRw/KQZFriAhhEq6cLLOUdY56OQabndOCSGEEEIIIYQQQgghhJBDkZ4pBVnuijZuIdFO2Elz8yAUeabQPnXCvxOxYbrjkRY7+qyUkuEPGo1GLhKIIieRIRQ5vu9HDiJZr9dzQRDk6vX6wMTExLJSqXRsuVw+tlQqrcjn88uEEEv6+/sXlUqlBblcbshxnGI+n4fjOG1FI6UUgiBArVaD7/vVer1+cGJiYnhsbGw/gL31en33xMTEttHR0S3VanVLuVzencvlxqSUjXw+3wjdQIHjOH4ul2sRgMw6QeYPEm6xrOsrbVlW2+Q1mHXttrtWzPXthMCs7zOJndZ3ilqEEEIIIYQQQgghhBBCgN7WFGpJ1xaRkrbNWuclrd4PJos/LfViEu1lIvakfVn6BCTcR1luI7RWzlEp7dBhm5bYSikROYgiF1EQBDISiUyhyBCOnCAIUK/XRRAEfr1ez9VqtXKj0Sjl8/mBXC7XL6UsCSHKjuMMBkFQVkrlo99KKQEAQgglhKg7jjMOoC6lHPd9f0QpNR4EwXij0Riv1+ujuVxuolAojOdyOd9xHFksFgMAIvzuJ8Wf6HNSBAr3F6eIm4q4MRUxZKaiT9o1n5ViMKO+1JRiW+6FzFpYFIUIIYQQQgghhBBCCCGEROR6ETScwE51Yxi/I2EH4e9UkSoxuZ2cfI9EnknbWD6nTr6Hv1Vy0r1NLaGWYzCPz3I88fFnpaMz24dCCaSUgVJK5HK5RhAEslgsViNRKBKLfN+XQRA40XJjnR8EQVUpdaDRaAjf90UQBCoIAhkKQBKACIFS+lAj95BSKhJrglwup0IRRziOo3K5nArTvCFy+0R1gMLvvuM4QXJdeMx+uB+FDFdQyjXQ9pqZKe3cZo7jtO2zTfCztelFbApChBBCCCGEEEIIIYQQQky6PqFucdwAiQn/TtLHdeKg6HRdJy6SrHRiiePK/J02Jt2KbY6rIeogchKZdYmSy8wf04EUbi8Mh5A+aU1xSEkpFQCYjp6k0ydaF4k/5vcwHVwUKzAOv63w0clYZY277brqNLbZLm3bTq7ZrGuvk9hp1zYhhBBCCCGEEEIIIYQQ0ildE4Usk9eT6vtk1RRKiZE5cR+t78QRkSYQTCXFWFrar+mkI+tEpGonTJjnMRJ0AC0QAYAp/CR/p7W1XBPKSOsGU9AxRR/jN4QQQbKtmRbOds5ttZWS10iny3sV20x52E7kTFvXJrZot/10Y4MQQgghhBBCCCGEEELIEU9XRSHze1bdk7QYWRP80baWSXFbHaEpTZanTc4bY9RR/E72163YlnjJ2kYxpvATLTNEIJjLbPuJBCHzu7nMJhgZ/WlJmZc1BlMdz3bLuxHbPDc2piq+JIXPTmN3Ep+uIkIIIYQQQgghhBBCCCFZ9EwUAia7HyxtMiftLUJClvtIolWAaHF0pE2YZ6XtSvYh69gT28Z9mUrsrLR2yePsRFhIiGaTxlopJTENDNdPixCVdm7MvmS1MY9nqi6uXsVudz7buX3aXWu9iG0sa7knpnOuCSGEEEIIIYQQQgghhJBJ+L4vbMJQtMz8nfyxbZ9cl7Y/yzYy2d7W1myftQ9b323rUraTye3axJadxE47vqmcq7Rz0clPu5id7Dvteyf97Xbsdsc21XHtBb2MTQghhBBCCCGEEEIIIeTIINeLoDZHRof1cQSA2BWU/GzbJsWNJHzfh7kvs2/J5WmChhnb5uhISYeWWvclQ1BpiZ2Rai0zzVybVHVmv+LxSdJpirapiDM2R9RU+t3Jcc4ktu26sZ2HtN9GKOH7fuq1nlYLq03MjmNnnRc6hQghhBBCCCGEEEIIIYR01X1gTGpHIkdLSq92Kbs6SauWrKFjSzFnLk/uy1KHJ057loifWgOoXWxbX5Kxs/rSLnbWGHZyjqJ4tu9zEbtdm7R2ndbk6TTV3lRiG+1kdM7SxMBOji8tNizp39Kuj6n2nRBCCCGEEEIIIYQQQgiZFlnp39LaZqUny0hHZ00Pl/Y9Lc1cVp/MNll9i/rSzrXTLnbKmMisMUw7jrTx6CTtXdb5bDd2U4ndLk6vYneSwq9d7Km0mw5ME0cIIYQQQgghhBBCCCGkV3RtAroTp0VUM8d0w1jSa0nTuWPGM9un9CFybchwkbLto9N48xVbmrF26flS0uy1daB00j7LOWWL3S4FWlZsm2NqurFtMVOu29RUfh2kRJzU1ta3LsWe5Exr5zAjhBBCCCGEEEIIIYQQcuQwW44HkZYWzSSReq7jlFgpooCwxUluN9N0bFNtO53YtrGIxhWJOkcJrOnuOhBfot8qGSu5g6zxzojdybGb10xqbNvxdjN2OxEq2SZLVLIt62Rdu5pVU4lNCCGEEEIIIYQQQgghhMyYDtOtRd9l2vJ2aeSS2ybiyGSf2qWDy+pnJ8eVsU7aYqWlsUtLZZa136zzMNV1aX3sZuysdtPd70z71y5FX7dgyjlCCCGEEEIIIYQQQgghc01PJpOznA3Jdu2cELZ4ZrtpOIiSx5/pbklLN9dByjLZaWxzLGyxk+uzji/NBZR1bmzOknaxbX2yOW/SXCtZY5FxvDIZ23bddJImr9PYtmPISpWXSF0YjYXVKWeLmbZsprHpGCKEEEIIIYQQQgghhBDSdVGoA9dCS4qvqUyyt5vkzxI3UmrTxDWObP1vJ7Ak2ifFkJZ+Z8U2j6HdWGalgss4J7Hg0cnYpZwHq7CQjG3bpp3gldHvrOuiG7FTr8W0ay0tVtqYpp276aYmnO55IoQQQgghhBBCCCGEEEK6ylTSnHUSK+2zmSauk/1lpLGzpXeTttRv7Y63Xaq4cJkZW043tu1Y26VOa9e3Ts9Fu9jt2qecz47Tvs1l7G6PU7did6PvhBBCCCGEEEIIIYQQQkjHZNXLsbXL+knGa7c+/B6LLe22TSw3axTJZP8tbazLbcdt265NG9lun2ljmjzWqbS39dF2XmezL/P9OC3XUcd1j6batlftCSGEEEIIIYQQQgghhJBpMRX3S/K7bQI+q21aO1MUMtfbYieX2faZ1qfk9lOZtG8TW6YJH9M9J+3Gv1ux08a4V7GnG7/TczydPs7kmNr1sZPY3RojQgghhBBCCCGEEEIIIYcnXZ00TtZjSanjk1abZlJtHhtGvR5lq6Nii2+ZHBcwahR1Ujuok+NObjfV2O36nhZ7Km3Szolt+17FTtu23bFZroOOYifX2753EjvrvGe1s53/Tq6zTvpgi50cB0IIIYQQQgghhBBCCCEE6JEoZNLpxHSamJAl3NjidyKsZAkNaTE62UeaGNFOtOrkuCxtkuKZ+T3+bBxvtJ3ZBrZtLNhiC8dxgrBP0tKXKLYtbjJesm1PY8MQBJPHlNYXU+RMuYbiPpvnOfk7eQ47jQ2LCJpsn3JMiNaBEEIIIYQQQgghhBBCCOklWamt0tKZZaX4yqr7kvU7q0ZPJ31J61O7NF227W2fs443K/VYVio0Wz/abd/JuZxq7A7PT9taP+2uh05+dxJ/OmMzVXqd3o2p4wghhBBCCCGEEEIIIYQkkTMP0cQ2Ed/GJRE7NoxtJGBP72XEk8YymWyXkqbO5qiwphdL9jvpUrKlDcua5Ddj2FxDaS4oc31a7SXb+KctN/eTdl7aiTBpZMVuFydql+Zm6SAdYGbsLHdW1vh3ctzTJbnfXsTvVWxCCCGEEEIIIYQQQgghpIWsyfU090zyd9o2ybjGj+x0H8n2Wf2fiqujE8FiurHb7SOtbZaYlDaevYg9nb73MnY7l1anY5LmlEpbN5XzP5XYaX3vdEwIIYQQQgghhBBCCCGEHN7kuhksMQEtYLhzovWmKySqF5OsG2OrkZJw8kizfguM+imW9snYEs36LJNqvhhC0SRnUcoE+6R6NGk1jGyxk21SYic/Txr3LLdLcl2aq8fmKEqLnXT32LbvNLbNPWW5VnoS27imhC12B9d5y7nK2s425lnnM1kfqJ3Ak3Z8hBBCCCGEEEIIIYQQQgjQ5fRxEbbUb+ZyY+I6iMQZW3uTNg4IZcaxtTE+TxI4kr+NfsXtonRfllRn5r7jdRmT8tZ1Ke3NfVpjp6VMm8I+kCWsdBo7jU5iJ0WqlFAiK3bW/juIndpvW9+TYxH+BGlxbN876ddMY1McIoQQQgghhBBCCCGEENJTTFeM8ZOaOi4tpVtWWq1O1yX60tZl0Ykolfa7XdxOUtVNdR820auTbbPS9nXSJi3tWru+pLXJ+ulG7OlsZ7smOjkfnaRrs8VpN6adxm9XG4oQQgghhBBCCCGEEELIkUvXJo2TaboAiMjhYEsBZ26bXJ7mLsnatl3fzPadpNmypRhLS6PWLsXaVGObyzoZO0u6MauLJs1Z08nytM/tYmS1TzvO6fax17HNlIdTSdfXyZgY34XpDOpWbBBCCCGEEEIIIYQQQggh3aJTF8N022S4M2TShZPlCunEXZPoi7Ts0+pm6cSB00nsjL6IjO/S3DbLndVubDuJneXGmW7stL7PNPZ0nD+duLM6WT4VehmbEEIIIYQQQgghhBBCCOmqUyi5rAOXxqQ6P7btbS4Ki4OmxcFh+S5sjiTbd9vxZLl+LP0S0b5nEjt5HGZs2/h04iZK9iFrWQ9iC8dxgk7dL2lurpT9TTl22vm07E8icY3axiPL2ZXm3uly7OS1Ic3vIIQQQgghhBBCCCGEEEK6wVRqmKS5VtK+Z7lyLG1kyvI054zEFOi0Zsw0Y7dtnzZuU3GZtKtbM53Y7ZxRU+1LWuxuHedUY2e5mcxlWU6vqcRud61PJzYhhBBCCCGEEEIIIYSQI5tcL4Km1eyxuXt835/kdDA+w/d9wOIQSu4vipuMYzos0pwXU6mFk7HPlu2iNlmT8jaHh20M02Kn9Snt+IxzIcJxndR2qsfciRiTVvdoOrHT+j7dczXV2LZ9GcvaOnOSfelm7HYxQAghhBBCCCGEEEIIIeSIZkpOlk6IRI52Qks4UR0kJqtNIUmZ620pyczvyThZ6c7SJshty8NlUYzMtG9ZYlBa26i/ZmzbJH4ydtZxJI87amv0S5nb21w5tpRtts/JvtnGuN1YTDF20KvYMK4bW3vbGEfurmhcE+s6ruOUEn9KsTtxaxFCCCGEEEIIIYQQQgghM6aTFFu2dckJ7nbpvJLp4aK2ts/J+Mk2U+lHJ6nqZnKMljYyawxtx9puDJLHPpXzmbXPqcZuF6dXsbPSE3YaeyrtpgMFHUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCyJHC/wcOsCYRDlnHRQAAAABJRU5ErkJggg==
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/gradle.properties
VERSION_JWT=0.11.0
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/gradlew.bat
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%" == "" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if "%ERRORLEVEL%" == "0" goto execute

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if "%ERRORLEVEL%"=="0" goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
if  not "" == "%GRADLE_EXIT_CONSOLE%" exit 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/LICENSE
MIT License

Copyright (c) 2019 - present Alexey Lapin

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/Procfile
web: java -Dserver.port=${PORT} -jar service/build/libs/service.jar
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/README.md
# ![RealWorld Example App using Spring](example-logo.png)

> ### Spring Boot codebase containing real world examples (CRUD, auth, advanced patterns, etc) that adheres to the [RealWorld](https://github.com/gothinkster/realworld) spec and API

[![CI](https://github.com/alexey-lapin/realworld-backend-spring/workflows/CI/badge.svg)](https://github.com/alexey-lapin/realworld-backend-spring/actions)
[![Codecov](https://codecov.io/gh/alexey-lapin/realworld-backend-spring/branch/master/graph/badge.svg)](https://codecov.io/gh/alexey-lapin/realworld-backend-spring)

This codebase was created to demonstrate a fully fledged fullstack application built with **[Spring Boot](https://spring.io/projects/spring-boot)** including CRUD operations, authentication, routing, pagination, and more.

We've gone to great lengths to adhere to the Spring community styleguides & best practices.

For more information on how to this works with other frontends/backends, head over to the [RealWorld](https://github.com/gothinkster/realworld) repo.

Actual application is accessible on **Heroku**: https://realworld-backend-spring.herokuapp.com/api

# How it works
This application basically uses Spring Boot Framework with Java 8 with some other principles and modules:
- Ports and Adapters architecture
- Command and Query Responsibility Segregation (CQRS)
- [Spring Data](https://spring.io/projects/spring-data-jpa) with Hibernate
- Json Web Token [jjwt](https://github.com/jwtk/jjwt)
- H2 in memory database

Some other highlights:
- [Liquibase](https://www.liquibase.org/) for the database changes management
- [Open Feign declarative http clients](https://github.com/OpenFeign/feign) for integration tests to show how to utilize separate api package
- [Github Actions](https://github.com/alexey-lapin/realworld-backend-spring/actions) as CI
- Execution of [Realworld Postman collection](https://github.com/gothinkster/realworld/blob/master/api/Conduit.postman_collection.json) is part of CI
- Deployment on [Heroku](https://realworld-backend-spring.herokuapp.com/api) is part of CI

# Getting started
Java 8 or above is required

    ./gradlew bootRun

To test that it works, open a browser tab at http://localhost:8080/api/tags .  
Alternatively, you can run

    curl http://localhost:8080/api/tags

# Try it out with a RealWorld frontend

The entry point address of the backend API is at http://localhost:8080/api

# Run test

The repository contains a lot of test cases to cover both api test and repository test.

    ./gradlew test

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/settings.gradle.kts
enableFeaturePreview("VERSION_CATALOGS")

pluginManagement {
    plugins {
        id("com.diffplug.spotless") version "5.15.0"
        id("com.github.ben-manes.versions") version "0.39.0"
        id("io.spring.dependency-management") version "1.0.11.RELEASE"
        id("org.springframework.boot") version "2.5.6"
    }
}

rootProject.name = "realworld-backend-spring"
include("service-bus")
include("service-api")
include("service")

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/.github/workflows/main.yml
name: CI

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - '*'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8

      - uses: actions/setup-node@v1

      - name: Cache Gradle wrapper and dependencies
        uses: actions/cache@v2
        with:
          path: |
            ~/.gradle/caches/
            ~/.gradle/wrapper/dists
          key: test-${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle', '**/*.gradle.kts', '**/gradle.properties', 'gradle/**', 'buildSrc/src/main/**') }}
          restore-keys: |
            test-${{ runner.os }}-gradle-

      - name: Build with Gradle
        run: ./gradlew build

      - name: Run app for testing
        run: |
          nohup java -jar service/build/libs/service.jar &
          sleep 5s

      - name: Run postman collection
        run: >
          npx newman run
          https://raw.githubusercontent.com/gothinkster/realworld/master/api/Conduit.postman_collection.json
          --delay-request 200
          --global-var "APIURL=http://localhost:8080/api"
          --global-var "USERNAME=username"
          --global-var "EMAIL=username@example.com"
          --global-var "PASSWORD=password"

      - name: Deploy to Heroku
        env:
          HEROKU_API_TOKEN: ${{ secrets.HEROKU_API_TOKEN }}
          HEROKU_APP_NAME: "realworld-backend-spring"
        if: github.ref == 'refs/heads/master' && job.status == 'success'
        run: git push https://heroku:$HEROKU_API_TOKEN@git.heroku.com/$HEROKU_APP_NAME.git HEAD:master -f

  coverage:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8

      - name: Cache Gradle wrapper and dependencies
        uses: actions/cache@v2
        with:
          path: |
            ~/.gradle/caches/
            ~/.gradle/wrapper/dists
          key: test-${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle', '**/*.gradle.kts', '**/gradle.properties', 'gradle/**', 'buildSrc/src/main/**') }}
          restore-keys: |
            test-${{ runner.os }}-gradle-

      - name: 'Run tests with JaCoCo'
        shell: bash
        run: |
          ./gradlew --version
          ./gradlew --scan --no-parallel --stacktrace --warning-mode=all jacocoReport

      - uses: codecov/codecov-action@v1

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/build.gradle.kts
plugins {
    `kotlin-dsl`
}

repositories {
    mavenCentral()
    gradlePluginPortal()
}

dependencies {
//    implementation("com.bmuschko:gradle-docker-plugin:6.7.0")
    implementation("com.diffplug.spotless:spotless-plugin-gradle:5.14.3")
//    implementation("io.micronaut.gradle:micronaut-gradle-plugin:2.0.3")
}
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/settings.gradle.kts
enableFeaturePreview("VERSION_CATALOGS")

dependencyResolutionManagement {
    versionCatalogs {
        create("libs") {
            from(files("../gradle/libs.versions.toml"))
        }
    }
}
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/jacoco-aggregation.gradle.kts
plugins {
    java
    jacoco
    id("project-conventions")
}

// A resolvable configuration to collect source code
val sourcesPath: Configuration by configurations.creating {
    isVisible = false
    isCanBeResolved = true
    isCanBeConsumed = false
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("source-folders"))
    }
}

// A resolvable configuration to collect source code
val classesPath: Configuration by configurations.creating {
    isVisible = false
    isCanBeResolved = true
    isCanBeConsumed = false
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("classes-folders"))
    }
}

// A resolvable configuration to collect JaCoCo coverage data
val coverageDataPath: Configuration by configurations.creating {
    isVisible = false
    isCanBeResolved = true
    isCanBeConsumed = false
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("jacoco-coverage-data"))
    }
}

// Task to gather code coverage from multiple subprojects
val jacocoReport by tasks.registering(JacocoReport::class) {
    additionalClassDirs(classesPath.incoming.artifactView { lenient(true) }.files)
    additionalSourceDirs(sourcesPath.incoming.artifactView { lenient(true) }.files)
    executionData(coverageDataPath.incoming.artifactView { lenient(true) }.files.filter { it.exists() })

    reports {
        // xml is usually used to integrate code coverage with
        // other tools like SonarQube, Coveralls or Codecov
        xml.required.set(true)

        // HTML reports can be used to see code coverage
        // without any external tools
        html.required.set(true)
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/java-conventions.gradle.kts
plugins {
    java
    jacoco
    id("com.diffplug.spotless")
    id("project-conventions")
}

val hasIntTests = layout.projectDirectory.dir("src").dir("intTest").asFile.exists()

if (hasIntTests) {
    sourceSets {
        create("intTest") {
            compileClasspath += sourceSets.main.get().output
            runtimeClasspath += sourceSets.main.get().output
        }
    }

    configurations["intTestImplementation"].extendsFrom(configurations["implementation"])
    configurations["intTestImplementation"].extendsFrom(configurations["testImplementation"])
    configurations["intTestRuntimeOnly"].extendsFrom(configurations["runtimeOnly"])
    configurations["intTestRuntimeOnly"].extendsFrom(configurations["testRuntimeOnly"])
}

configure<JavaPluginExtension> {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

spotless {
    val headerFile = rootProject.file("src/spotless/mit-license.java")

    java {
        licenseHeaderFile(headerFile, "(package|import|open|module) ")
        removeUnusedImports()
        trimTrailingWhitespace()
        endWithNewline()
    }
}

tasks {
    if (hasIntTests) {
        register<Test>("integrationTest") {
            description = "Runs the integration tests."
            group = "verification"

            testClassesDirs = sourceSets["intTest"].output.classesDirs
            classpath = sourceSets["intTest"].runtimeClasspath

            shouldRunAfter("test")
        }

        named("check") { dependsOn("integrationTest") }
    }

    withType<Test> {
        useJUnitPlatform()
        testLogging {
            showStackTraces = true
            exceptionFormat = org.gradle.api.tasks.testing.logging.TestExceptionFormat.FULL
        }
    }

    withType<JavaCompile>().configureEach {
        shouldRunAfter("spotlessJavaCheck")
    }
}

// Do not generate reports for individual projects
tasks.jacocoTestReport {
    enabled = false
}

// Share sources folder with other projects for aggregated JaCoCo reports
configurations.create("transitiveSourcesElements") {
    isVisible = false
    isCanBeResolved = false
    isCanBeConsumed = true
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("source-folders"))
    }
    sourceSets.main.get().java.srcDirs.forEach {
        outgoing.artifact(it)
    }
}

// Share sources folder with other projects for aggregated JaCoCo reports
configurations.create("transitiveCompiledElements") {
    isVisible = false
    isCanBeResolved = false
    isCanBeConsumed = true
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("classes-folders"))
    }
    sourceSets.main.get().output.classesDirs.forEach {
        outgoing.artifact(it)
    }
}

// Share the coverage data to be aggregated for the whole product
configurations.create("coverageDataElements") {
    isVisible = false
    isCanBeResolved = false
    isCanBeConsumed = true
    extendsFrom(configurations.implementation.get())
    attributes {
        attribute(Usage.USAGE_ATTRIBUTE, objects.named(Usage.JAVA_RUNTIME))
        attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.DOCUMENTATION))
        attribute(DocsType.DOCS_TYPE_ATTRIBUTE, objects.named("jacoco-coverage-data"))
    }

    // This will cause the test task to run if the coverage data is requested by the aggregation task
    outgoing.artifact(tasks.test.map { task ->
        task.extensions.getByType<JacocoTaskExtension>().destinationFile!!
    })

    if (hasIntTests) {
        outgoing.artifact(tasks.named("integrationTest").map { task ->
            task.extensions.getByType<JacocoTaskExtension>().destinationFile!!
        })
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/buildSrc/src/main/kotlin/project-conventions.gradle.kts
repositories {
    mavenCentral()
}
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/build.gradle.kts
plugins {
    id("io.spring.dependency-management")
    id("org.springframework.boot")
    id("java-conventions")
}

dependencies {
    annotationProcessor("org.projectlombok:lombok")
    compileOnly("org.projectlombok:lombok")

    implementation(project(":service-bus"))
    implementation(project(":service-api"))

    implementation("org.springframework.boot:spring-boot-starter-actuator")
    implementation("org.springframework.boot:spring-boot-starter-data-jpa")
    implementation("org.springframework.boot:spring-boot-starter-security")
    implementation("org.springframework.boot:spring-boot-starter-validation")
    implementation("org.springframework.boot:spring-boot-starter-web")

    implementation("io.jsonwebtoken:jjwt-api:${libs.versions.jwt.get()}")

    runtimeOnly("com.h2database:h2")
    runtimeOnly("io.jsonwebtoken:jjwt-impl:${libs.versions.jwt.get()}")
    runtimeOnly("io.jsonwebtoken:jjwt-jackson:${libs.versions.jwt.get()}")
    runtimeOnly("org.liquibase:liquibase-core:${libs.versions.liquibase.get()}")

    testAnnotationProcessor("org.projectlombok:lombok")
    testCompileOnly("org.projectlombok:lombok")
    testImplementation("org.springframework.boot:spring-boot-starter-test")

    "intTestAnnotationProcessor"("org.projectlombok:lombok")
    "intTestCompileOnly"("org.projectlombok:lombok")

    "intTestImplementation"("org.springframework.cloud:spring-cloud-starter-openfeign:${libs.versions.springFeign.get()}")
    "intTestImplementation"("io.github.openfeign:feign-jackson:${libs.versions.feign.get()}")
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/ArticleClient.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.rest.support.LocalFeignConfig;
import org.springframework.cloud.openfeign.FeignClient;

@FeignClient(name = "article", path = "${api.version}", configuration = LocalFeignConfig.class)
public interface ArticleClient extends ArticleOperations {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/ProfileClient.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.rest.support.LocalFeignConfig;
import org.springframework.cloud.openfeign.FeignClient;

@FeignClient(name = "profile", path = "${api.version}", configuration = LocalFeignConfig.class)
public interface ProfileClient extends ProfileOperations{
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/TagClient.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.rest.support.LocalFeignConfig;
import org.springframework.cloud.openfeign.FeignClient;

@FeignClient(name = "tag", path = "${api.version}", configuration = LocalFeignConfig.class)
public interface TagClient {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/api/operation/UserClient.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.rest.support.LocalFeignConfig;
import org.springframework.cloud.openfeign.FeignClient;

@FeignClient(name = "user", path = "${api.version}", configuration = LocalFeignConfig.class)
public interface UserClient extends UserOperations {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/ArticleApiTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest;

import com.github.al.realworld.api.command.AddComment;
import com.github.al.realworld.api.command.CreateArticle;
import com.github.al.realworld.api.command.UpdateArticle;
import com.github.al.realworld.api.dto.ArticleDto;
import com.github.al.realworld.api.dto.CommentDto;
import com.github.al.realworld.api.operation.ArticleClient;
import com.github.al.realworld.rest.auth.AuthSupport;
import com.github.al.realworld.rest.support.FeignBasedRestTest;
import feign.FeignException;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;

import java.util.List;
import java.util.UUID;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.catchThrowableOfType;

public class ArticleApiTest extends FeignBasedRestTest {

    public static final String TEST_TITLE = "test-title";
    public static final String TEST_DESCRIPTION = "test-description";
    public static final String TEST_BODY = "test-body";
    public static final String ALTERED_TITLE = "altered-title";
    public static final String ALTERED_BODY = "altered-body";
    public static final String ALTERED_DESCRIPTION = "altered-description";

    @Autowired
    private AuthSupport auth;

    @Autowired
    private ArticleClient articleClient;

    @AfterEach
    void afterEach() {
        auth.logout();
    }

    @Test
    void should_returnCorrectArticleData() {
        String user = auth.register().login().getUsername();

        CreateArticle command = createArticleCommand();
        ArticleDto article = articleClient.create(command).getArticle();

        assertThat(article.getSlug()).isEqualTo(command.getTitle());
        assertThat(article.getTitle()).isEqualTo(command.getTitle());
        assertThat(article.getDescription()).isEqualTo(command.getDescription());
        assertThat(article.getBody()).isEqualTo(command.getBody());
        assertThat(article.getAuthor().getUsername()).isEqualTo(user);
    }

    @Test
    void should_returnCorrectArticleData_when_favoriteAndUnfavorite() {
        String user = auth.register().login().getUsername();

        ArticleDto created = articleClient.create(createArticleCommand()).getArticle();

        ArticleDto favoritedArticle = articleClient.favorite(created.getSlug()).getArticle();
        assertThat(favoritedArticle.getFavorited()).isTrue();
        assertThat(favoritedArticle.getFavoritesCount()).isEqualTo(1);

        ArticleDto unfavoritedArticle = articleClient.unfavorite(created.getSlug()).getArticle();
        assertThat(unfavoritedArticle.getFavorited()).isFalse();
        assertThat(unfavoritedArticle.getFavoritesCount()).isEqualTo(0);
    }

    @Test
    void should_returnCorrectArticleData_when_delete() {
        String user = auth.register().login().getUsername();

        ArticleDto created = articleClient.create(createArticleCommand()).getArticle();

        articleClient.deleteBySlug(created.getSlug());

        FeignException exception = catchThrowableOfType(
                () -> articleClient.findBySlug(created.getSlug()),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());

    }

    @Test
    void should_throw403_when_deleteNotOwned() {
        auth.register().login();

        ArticleDto created = articleClient.create(createArticleCommand()).getArticle();

        auth.register().login();

        FeignException exception = catchThrowableOfType(
                () -> articleClient.deleteBySlug(created.getSlug()),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.FORBIDDEN.value());
    }

    @Test
    void should_returnCorrectArticleData_when_deleteNotExisting() {
        auth.register().login();

        FeignException exception = catchThrowableOfType(
                () -> articleClient.deleteBySlug("not-existing"),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());
    }

    @Test
    void should_returnCorrectArticleData_when_update() {
        auth.register().login();

        ArticleDto created = articleClient.create(createArticleCommand()).getArticle();

        UpdateArticle updateCommand = UpdateArticle.builder()
                .title(ALTERED_TITLE)
                .body(ALTERED_BODY)
                .description(ALTERED_DESCRIPTION)
                .build();

        ArticleDto updated = articleClient.updateBySlug(created.getSlug(), updateCommand).getArticle();

        assertThat(updated.getSlug()).isEqualTo(ALTERED_TITLE);
        assertThat(updated.getTitle()).isEqualTo(ALTERED_TITLE);
        assertThat(updated.getDescription()).isEqualTo(ALTERED_DESCRIPTION);
        assertThat(updated.getBody()).isEqualTo(ALTERED_BODY);
    }

    @Test
    void shouldReturnCorrectCommentData_whenCreateDeleteComment() {
        String user = auth.register().login().getUsername();

        ArticleDto created = articleClient.create(createArticleCommand()).getArticle();

        AddComment addComment = AddComment.builder().body(TEST_BODY).build();

        CommentDto comment = articleClient.addComment(created.getSlug(), addComment).getComment();

        assertThat(comment.getId()).isNotNull();
        assertThat(comment.getAuthor().getUsername()).isEqualTo(user);
        assertThat(comment.getBody()).isEqualTo(TEST_BODY);
        assertThat(comment.getCreatedAt()).isNotNull();
        assertThat(comment.getUpdatedAt()).isNotNull();

        List<CommentDto> comments = articleClient.findAllComments(created.getSlug()).getComments();

        assertThat(comments).hasSize(1);

        articleClient.deleteComment(created.getSlug(), comment.getId());

        comments = articleClient.findAllComments(created.getSlug()).getComments();

        assertThat(comments).hasSize(1);
    }

    @Test
    void should_throw403_when_commentIsNotOwned() {
        auth.register().login();

        ArticleDto article = articleClient.create(createArticleCommand()).getArticle();

        AddComment addComment = AddComment.builder().body(TEST_BODY).build();
        CommentDto comment = articleClient.addComment(article.getSlug(), addComment).getComment();

        auth.register().login();

        FeignException exception = catchThrowableOfType(
                () -> articleClient.deleteComment(article.getSlug(), comment.getId()),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.FORBIDDEN.value());
    }

    @Test
    void should_throw404_when_addCommentArticleDoesNotExist() {
        auth.register().login();

        AddComment addComment = AddComment.builder().body(TEST_BODY).build();
        FeignException exception = catchThrowableOfType(
                () -> articleClient.addComment(UUID.randomUUID().toString(), addComment),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());
    }

    @Test
    void should_throw404_when_deleteCommentArticleDoesNotExist() {
        auth.register().login();

        FeignException exception = catchThrowableOfType(
                () -> articleClient.deleteComment(UUID.randomUUID().toString(), 9999999L),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());
    }

    @Test
    void should_throw404_when_deleteCommentDoesNotExist() {
        auth.register().login();

        ArticleDto article = articleClient.create(createArticleCommand()).getArticle();

        FeignException exception = catchThrowableOfType(
                () -> articleClient.deleteComment(article.getSlug(), 9999999L),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());
    }

    private static CreateArticle createArticleCommand() {
        return CreateArticle.builder()
                .title(UUID.randomUUID().toString())
                .description(UUID.randomUUID().toString())
                .body(UUID.randomUUID().toString())
                .build();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/ProfileApiTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest;

import com.github.al.realworld.api.dto.ProfileDto;
import com.github.al.realworld.api.operation.ProfileClient;
import com.github.al.realworld.rest.auth.AuthSupport;
import com.github.al.realworld.rest.support.FeignBasedRestTest;
import feign.FeignException;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.catchThrowableOfType;

public class ProfileApiTest extends FeignBasedRestTest {

    @Autowired
    private AuthSupport auth;

    @Autowired
    private ProfileClient profileClient;

    @AfterEach
    void afterEach() {
        auth.logout();
    }

    @Test
    void should_returnNull_when_userIsNotRegistered() {

        FeignException exception = catchThrowableOfType(
                () -> profileClient.findByUsername("u3"),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.NOT_FOUND.value());
    }

    @Test
    void should_returnCorrectData_when_userIsRegistered() {
        auth.register("u1", "u1@example.com", "1234");

        ProfileDto profile = profileClient.findByUsername("u1").getProfile();

        assertThat(profile.getUsername()).isEqualTo("u1");
    }

    @Test
    void should_throw401_when_unauthorized() {
        FeignException ex = catchThrowableOfType(
                () -> profileClient.follow("u2"),
                FeignException.class
        );

        assertThat(ex.status()).isEqualTo(HttpStatus.UNAUTHORIZED.value());
    }

    @Test
    void should_returnCorrectProfileData_when_followAndUnfollow() {
        auth.register().login();
        String user2 = auth.register().getUsername();

        profileClient.follow(user2);

        ProfileDto profile1 = profileClient.findByUsername(user2).getProfile();
        assertThat(profile1.getFollowing()).isTrue();

        profileClient.unfollow(user2);

        ProfileDto profile2 = profileClient.findByUsername(user2).getProfile();
        assertThat(profile2.getFollowing()).isFalse();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/UserApiTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest;

import com.github.al.realworld.api.command.LoginUser;
import com.github.al.realworld.api.command.RegisterUser;
import com.github.al.realworld.api.command.UpdateUser;
import com.github.al.realworld.api.dto.UserDto;
import com.github.al.realworld.api.operation.UserClient;
import com.github.al.realworld.rest.auth.AuthSupport;
import com.github.al.realworld.rest.support.FeignBasedRestTest;
import feign.FeignException;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;

import java.util.UUID;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.catchThrowableOfType;

public class UserApiTest extends FeignBasedRestTest {

    public static final String ALTERED_EMAIL = "altered-email@example.com";
    public static final String ALTERED_USERNAME = "altered-username";
    public static final String ALTERED_PASSWORD = "altered-password";
    public static final String ALTERED_BIO = "altered-bio";
    public static final String ALTERED_IMAGE = "altered-image";

    @Autowired
    private AuthSupport auth;

    @Autowired
    private UserClient userClient;

    @Test
    void should_returnCorrectData_whenRegisterUser() {
        RegisterUser command = registerCommand();

        UserDto user = userClient.register(command).getUser();

        assertThat(user.getUsername()).isEqualTo(command.getUsername());
        assertThat(user.getEmail()).isEqualTo(command.getEmail());
        assertThat(user.getToken()).isNotBlank();
    }

    @Test
    void should_returnCorrectData_whenLoginUser() {
        RegisterUser command = registerCommand();

        userClient.register(command);

        UserDto user = userClient.login(new LoginUser(command.getEmail(), command.getPassword())).getUser();

        assertThat(user.getToken()).isNotBlank();
    }

    @Test
    void should_returnCorrectData_whenLoginUserWithWrongPassword() {
        RegisterUser command = registerCommand();

        userClient.register(command);

        FeignException exception = catchThrowableOfType(
                () -> userClient.login(new LoginUser(command.getEmail(), UUID.randomUUID().toString())),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.UNAUTHORIZED.value());
    }

    @Test
    void should_return400_whenLoginUser() {
        String s = UUID.randomUUID().toString();
        FeignException exception = catchThrowableOfType(
                () -> userClient.login(new LoginUser(s + "@ex.com", s)),
                FeignException.class
        );

        assertThat(exception.status()).isEqualTo(HttpStatus.BAD_REQUEST.value());
    }

    @Test
    void should_returnCorrectData_whenUpdateUser() {
        auth.register().login();

        UpdateUser updateUser = UpdateUser.builder()
                .email(ALTERED_EMAIL)
                .username(ALTERED_USERNAME)
                .password(ALTERED_PASSWORD)
                .bio(ALTERED_BIO)
                .image(ALTERED_IMAGE)
                .build();

        UserDto user = userClient.update(updateUser).getUser();

        assertThat(user.getEmail()).isEqualTo(ALTERED_EMAIL);
        assertThat(user.getUsername()).isEqualTo(ALTERED_USERNAME);
        assertThat(user.getBio()).isEqualTo(ALTERED_BIO);
        assertThat(user.getImage()).isEqualTo(ALTERED_IMAGE);
    }

    @Test
    void should_throw400_whenUpdateUserWithExistingEmail() {
        AuthSupport.RegisteredUser registeredUser = auth.register();

        auth.register().login();

        UpdateUser updateUser = UpdateUser.builder()
                .email(registeredUser.getEmail())
                .build();

        FeignException exception = catchThrowableOfType(
                () -> userClient.update(updateUser),
                FeignException.class
        );

        assertThat(exception).isNotNull();
    }

    @Test
    void should_throw400_whenUpdateUserWithExistingName() {
        AuthSupport.RegisteredUser registeredUser = auth.register();

        auth.register().login();

        UpdateUser updateUser = UpdateUser.builder()
                .username(registeredUser.getUsername())
                .build();

        FeignException exception = catchThrowableOfType(
                () -> userClient.update(updateUser),
                FeignException.class
        );

        assertThat(exception).isNotNull();
    }

    private static RegisterUser registerCommand() {
        return RegisterUser.builder()
                .username(UUID.randomUUID().toString())
                .email(UUID.randomUUID().toString() + "@ex.com")
                .password(UUID.randomUUID().toString())
                .build();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/auth/AuthSupport.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest.auth;

import com.github.al.realworld.api.command.LoginUser;
import com.github.al.realworld.api.command.LoginUserResult;
import com.github.al.realworld.api.command.RegisterUser;
import com.github.al.realworld.api.operation.UserClient;
import lombok.AllArgsConstructor;
import lombok.Getter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.UUID;

@Component
public class AuthSupport {

    @Autowired(required = false)
    private UserClient userClient;

    public RegisteredUser register() {
        String uuid = UUID.randomUUID().toString();
        return register(uuid, email(uuid), uuid);
    }

    public RegisteredUser register(String username, String email, String password) {
        userClient.register(RegisterUser.builder()
                .username(username)
                .email(email)
                .password(password)
                .build());
        return new RegisteredUser(email, username, password);
    }

    private String email(String uuid) {
        return uuid + "@ex.com";
    }

    public void login(String cred) {
        login(email(cred), cred);
    }

    public void login(String email, String password) {
        LoginUserResult result = userClient.login(new LoginUser(email, password));
        TokenHolder.token = result.getUser().getToken();
    }

    public void logout() {
        TokenHolder.token = null;
    }

    public static class TokenHolder {
        public static String token;
    }

    @AllArgsConstructor
    @Getter
    public class RegisteredUser {
        private String email;
        private String username;
        private String password;

        public RegisteredUser login() {
            AuthSupport.this.login(email, password);
            return this;
        }
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/FeignBasedRestTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest.support;

import com.github.al.realworld.api.operation.ArticleClient;
import org.junit.jupiter.api.extension.BeforeAllCallback;
import org.junit.jupiter.api.extension.ExtendWith;
import org.junit.jupiter.api.extension.ExtensionContext;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.cloud.openfeign.EnableFeignClients;
import org.springframework.context.annotation.Import;
import org.springframework.util.SocketUtils;

@EnableFeignClients(basePackageClasses = ArticleClient.class)
@Import(ServerPortCustomizer.class)
@ExtendWith(FeignBasedRestTest.Before.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)
public class FeignBasedRestTest {

    public static class Before implements BeforeAllCallback {

        @Override
        public void beforeAll(ExtensionContext context) {
            if (System.getProperty("server.port") == null) {
                int port = SocketUtils.findAvailableTcpPort();
                System.setProperty("server.port", String.valueOf(port));
            }
        }

    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/LocalFeignConfig.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest.support;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import com.github.al.realworld.rest.auth.AuthSupport;
import feign.Client;
import feign.Feign;
import feign.RequestInterceptor;
import feign.Target;
import feign.codec.Decoder;
import feign.codec.Encoder;
import feign.jackson.JacksonDecoder;
import feign.jackson.JacksonEncoder;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.env.Environment;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;

import java.util.Collections;

@RequiredArgsConstructor
@Configuration
public class LocalFeignConfig {

    @Bean
    public RequestInterceptor requestInterceptor(Environment env) {
        return template -> {
            String token = AuthSupport.TokenHolder.token;
            if (token != null) {
                template.header(HttpHeaders.AUTHORIZATION, "Token " + token);
            }
            if (template.headers().get(HttpHeaders.CONTENT_TYPE) == null) {
                template.header(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);
            }
        };
    }

    @Bean
    public Encoder encoder() {
        ObjectMapper mapper = new ObjectMapper().enable(SerializationFeature.WRAP_ROOT_VALUE);
        return new JacksonEncoder(mapper);
    }

    @Bean
    public Decoder decoder() {
        return new JacksonDecoder(Collections.singletonList(new JavaTimeModule()));
    }

    @Bean
    public Client client() {
        return new Client.Default(null, null);
    }

    @Bean
    public Feign.Builder feignBuilder(Environment env) {
        return new Feign.Builder() {
            @Override
            public <T> T target(Target<T> target) {
                String port = System.getProperty("server.port");
                String name = target.name();
                String url = target.url().replace(name, "localhost:" + port);
                Target.HardCodedTarget<T> local = new Target.HardCodedTarget<>(target.type(), target.name(), url);
                return super.target(local);
            }
        };
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/intTest/java/com/github/al/realworld/rest/support/ServerPortCustomizer.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.rest.support;

import org.springframework.boot.web.server.ConfigurableWebServerFactory;
import org.springframework.boot.web.server.WebServerFactoryCustomizer;

public class ServerPortCustomizer implements WebServerFactoryCustomizer<ConfigurableWebServerFactory> {

    @Override
    public void customize(ConfigurableWebServerFactory factory) {
        String port = System.getProperty("server.port");
        if (port != null) {
            factory.setPort(Integer.parseInt(port));
        }
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/App.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.metrics.buffering.BufferingApplicationStartup;

@SpringBootApplication
public class App {
    public static void main(String[] args) {
        SpringApplication application = new SpringApplication(App.class);
        application.setApplicationStartup(new BufferingApplicationStartup(1000));
        application.run(args);
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/ArticleAssembler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application;

import com.github.al.realworld.api.dto.ArticleDto;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.Tag;
import com.github.al.realworld.domain.model.User;

import java.util.stream.Collectors;

public class ArticleAssembler {

    public static ArticleDto assemble(Article article, User currentUser) {
        return ArticleDto.builder()
                .slug(article.getSlug())
                .title(article.getTitle())
                .description(article.getDescription())
                .body(article.getBody())
                .tagList(article.getTags().stream().map(Tag::getName).collect(Collectors.toList()))
                .createdAt(article.getCreatedAt())
                .updatedAt(article.getUpdatedAt())
                .favorited(currentUser != null && article.getFavoredUsers().contains(currentUser))
                .favoritesCount(article.getFavoredUsers().size())
                .author(ProfileAssembler.assemble(article.getAuthor(), currentUser))
                .build();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/CommentAssembler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application;

import com.github.al.realworld.api.dto.CommentDto;
import com.github.al.realworld.domain.model.Comment;
import com.github.al.realworld.domain.model.User;

public class CommentAssembler {

    public static CommentDto assemble(Comment comment, User currentUser) {
        return CommentDto.builder()
                .id(comment.getId())
                .createdAt(comment.getCreatedAt())
                .updatedAt(comment.getUpdatedAt())
                .body(comment.getBody())
                .author(ProfileAssembler.assemble(comment.getAuthor(), currentUser))
                .build();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/ProfileAssembler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application;

import com.github.al.realworld.api.dto.ProfileDto;
import com.github.al.realworld.domain.model.User;

public class ProfileAssembler {

    public static ProfileDto assemble(User user, User currentUser) {
        boolean isFollow = currentUser != null && user.getFollowers().stream()
                .map(followRelation -> followRelation.getFollower().getId())
                .anyMatch(uuid -> uuid.equals(currentUser.getId()));
        return new ProfileDto(user.getUsername(), user.getBio(), user.getImage(), isFollow);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/UserAssembler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application;

import com.github.al.realworld.api.dto.UserDto;
import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.domain.model.User;

public class UserAssembler {

    public static UserDto assemble(User user, JwtService jwtService) {
        return UserDto.builder()
                .email(user.getEmail())
                .username(user.getUsername())
                .token(jwtService.getToken(user))
                .bio(user.getBio())
                .image(user.getImage())
                .build();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/AddCommentHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.AddComment;
import com.github.al.realworld.api.command.AddCommentResult;
import com.github.al.realworld.application.CommentAssembler;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.Comment;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.ZonedDateTime;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class AddCommentHandler implements CommandHandler<AddCommentResult, AddComment> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional
    @Override
    public AddCommentResult handle(AddComment command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        User currentUser = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getCurrentUsername()));

        ZonedDateTime now = ZonedDateTime.now();

        Comment comment = Comment.builder()
                .body(command.getBody())
                .createdAt(now)
                .updatedAt(now)
                .author(currentUser)
                .build();

        Article alteredArticle = article.toBuilder().comment(comment).build();

        Article savedArticle = articleRepository.save(alteredArticle);

        Comment savedComment = savedArticle.getComments().stream()
                .filter(c -> c.getCreatedAt().equals(comment.getCreatedAt()))
                .filter(c -> c.getAuthor().equals(comment.getAuthor()))
                .findFirst()
                // should never happen
                .orElseThrow(() -> new RuntimeException("saved comment not found"));

        return new AddCommentResult(CommentAssembler.assemble(savedComment, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/CreateArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.CreateArticle;
import com.github.al.realworld.api.command.CreateArticleResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.application.service.SlugService;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.Tag;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.TagRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.ZonedDateTime;
import java.util.Optional;
import java.util.UUID;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;

@RequiredArgsConstructor
@Service
public class CreateArticleHandler implements CommandHandler<CreateArticleResult, CreateArticle> {

    private final ArticleRepository articleRepository;
    private final TagRepository tagRepository;
    private final UserRepository userRepository;
    private final SlugService slugService;

    @Transactional
    @Override
    public CreateArticleResult handle(CreateArticle command) {
        Optional<Article> articleByTitleOptional = articleRepository.findByTitle(command.getTitle());
        if (articleByTitleOptional.isPresent()) {
            throw badRequest("article [title=%s] already exists", command.getTitle());
        }

        User currentUser = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getCurrentUsername()));

        ZonedDateTime now = ZonedDateTime.now();

        Article.ArticleBuilder articleBuilder = Article.builder()
                .id(UUID.randomUUID())
                .slug(slugService.makeSlug(command.getTitle()))
                .title(command.getTitle())
                .description(command.getDescription())
                .body(command.getBody())
                .createdAt(now)
                .updatedAt(now)
                .author(currentUser);

        if (command.getTagList() != null) {
            command.getTagList().stream()
                    .map(t -> tagRepository.findByName(t).orElseGet(() -> new Tag(t)))
                    .forEach(articleBuilder::tag);
        }

        Article savedArticle = articleRepository.save(articleBuilder.build());

        return new CreateArticleResult(ArticleAssembler.assemble(savedArticle, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/DeleteArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.DeleteArticle;
import com.github.al.realworld.api.command.DeleteArticleResult;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.repository.ArticleRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Objects;

import static com.github.al.realworld.application.exception.ForbiddenException.forbidden;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class DeleteArticleHandler implements CommandHandler<DeleteArticleResult, DeleteArticle> {

    private final ArticleRepository articleRepository;

    @Transactional
    @Override
    public DeleteArticleResult handle(DeleteArticle command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        if (!Objects.equals(article.getAuthor().getUsername(), command.getCurrentUsername())) {
            throw forbidden("article [slug=%s] is not owned by %s", command.getSlug(), command.getCurrentUsername());
        }

        articleRepository.delete(article);

        return new DeleteArticleResult();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/DeleteCommentHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.DeleteComment;
import com.github.al.realworld.api.command.DeleteCommentResult;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.Comment;
import com.github.al.realworld.domain.repository.ArticleRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Objects;
import java.util.Set;
import java.util.stream.Collectors;

import static com.github.al.realworld.application.exception.ForbiddenException.forbidden;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class DeleteCommentHandler implements CommandHandler<DeleteCommentResult, DeleteComment> {

    private final ArticleRepository articleRepository;

    @Transactional
    @Override
    public DeleteCommentResult handle(DeleteComment command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        Comment comment = article.getComments().stream()
                .filter(c -> c.getId().equals(command.getId()))
                .findFirst()
                .orElseThrow(() -> notFound("comment [id=%s] does not exist", command.getId()));

        if (!comment.getAuthor().getUsername().equals(command.getCurrentUsername())) {
            throw forbidden("comment [id=%s] is not owned by %s", comment.getId(), command.getCurrentUsername());
        }

        Set<Comment> alteredComments = article.getComments().stream()
                .filter(comment1 -> Objects.equals(comment1, comment))
                .collect(Collectors.toSet());

        Article alteredArticle = article.toBuilder().comments(alteredComments).build();
        articleRepository.save(alteredArticle);

        return new DeleteCommentResult();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/FavoriteArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.FavoriteArticle;
import com.github.al.realworld.api.command.FavoriteArticleResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class FavoriteArticleHandler implements CommandHandler<FavoriteArticleResult, FavoriteArticle> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional
    @Override
    public FavoriteArticleResult handle(FavoriteArticle command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        User currentUser = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getCurrentUsername()));

        Article alteredArticle = article.toBuilder()
                .favoredUser(currentUser)
                .build();

        Article savedArticle = articleRepository.save(alteredArticle);

        return new FavoriteArticleResult(ArticleAssembler.assemble(savedArticle, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/FollowProfileHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.FollowProfile;
import com.github.al.realworld.api.command.FollowProfileResult;
import com.github.al.realworld.application.ProfileAssembler;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.FollowRelationId;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

/**
 * follower - one who follows someone (current user)
 * followee - is one who is followed
 */
@RequiredArgsConstructor
@Service
public class FollowProfileHandler implements CommandHandler<FollowProfileResult, FollowProfile> {

    private final UserRepository userRepository;

    @Transactional
    @Override
    public FollowProfileResult handle(FollowProfile command) {
        User currentUser = userRepository.findByUsername(command.getFollower())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getFollower()));

        User followee = userRepository.findByUsername(command.getFollowee())
                .orElseThrow(() -> notFound("user [name=%s] does not exist", command.getFollowee()));

        FollowRelation follow = new FollowRelation(
                new FollowRelationId(currentUser.getId(), followee.getId()),
                currentUser,
                followee);

        User alteredFollowee = followee.toBuilder().follower(follow).build();
        userRepository.save(alteredFollowee);

        return new FollowProfileResult(ProfileAssembler.assemble(alteredFollowee, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/LoginUserHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.LoginUser;
import com.github.al.realworld.api.command.LoginUserResult;
import com.github.al.realworld.application.UserAssembler;
import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import javax.transaction.Transactional;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.UnauthorizedException.unauthorized;

@RequiredArgsConstructor
@Service
public class LoginUserHandler implements CommandHandler<LoginUserResult, LoginUser> {

    private final UserRepository userRepository;
    private final JwtService jwtService;
    private final PasswordEncoder passwordEncoder;

    @Transactional
    @Override
    public LoginUserResult handle(LoginUser command) {
        User user = userRepository.findByEmail(command.getEmail())
                .orElseThrow(() -> badRequest("user [email=%s] does not exist", command.getEmail()));

        if (!passwordEncoder.matches(command.getPassword(), user.getPassword())) {
            throw unauthorized("user [email=%s] password is incorrect", command.getEmail());
        }

        return new LoginUserResult(UserAssembler.assemble(user, jwtService));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/RegisterUserHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.RegisterUser;
import com.github.al.realworld.api.command.RegisterUserResult;
import com.github.al.realworld.application.UserAssembler;
import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Optional;
import java.util.UUID;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;

@RequiredArgsConstructor
@Service
public class RegisterUserHandler implements CommandHandler<RegisterUserResult, RegisterUser> {

    private final UserRepository userRepository;
    private final JwtService jwtService;
    private final PasswordEncoder passwordEncoder;

    @Transactional
    @Override
    public RegisterUserResult handle(RegisterUser command) {
        Optional<User> userByEmailOptional = userRepository.findByEmail(command.getEmail());
        if (userByEmailOptional.isPresent()) {
            throw badRequest("user [email=%s] already exists", command.getEmail());
        }
        Optional<User> userByUsernameOptional = userRepository.findByUsername(command.getUsername());
        if (userByUsernameOptional.isPresent()) {
            throw badRequest("user [name=%s] already exists", command.getUsername());
        }

        User user = User.builder()
                .id(UUID.randomUUID())
                .username(command.getUsername())
                .email(command.getEmail())
                .password(passwordEncoder.encode(command.getPassword()))
                .build();
        userRepository.save(user);

        return new RegisterUserResult(UserAssembler.assemble(user, jwtService));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UnfavoriteArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.UnfavoriteArticle;
import com.github.al.realworld.api.command.UnfavoriteArticleResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Objects;
import java.util.Set;
import java.util.stream.Collectors;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class UnfavoriteArticleHandler implements CommandHandler<UnfavoriteArticleResult, UnfavoriteArticle> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional
    @Override
    public UnfavoriteArticleResult handle(UnfavoriteArticle command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        User currentUser = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getCurrentUsername()));

        Set<User> alteredFavoritedProfiles = article.getFavoredUsers().stream()
                .filter(favoritedUser -> !Objects.equals(favoritedUser, currentUser))
                .collect(Collectors.toSet());

        Article alteredArticle = article.toBuilder()
                .clearFavoredUsers()
                .favoredUsers(alteredFavoritedProfiles)
                .build();

        Article savedArticle = articleRepository.save(alteredArticle);

        return new UnfavoriteArticleResult(ArticleAssembler.assemble(savedArticle, currentUser));
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UnfollowProfileHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.UnfollowProfile;
import com.github.al.realworld.api.command.UnfollowProfileResult;
import com.github.al.realworld.application.ProfileAssembler;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.FollowRelationRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.stream.Collectors;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

/**
 * follower - one who follows someone (current user)
 * followee - is one who is followed
 */
@RequiredArgsConstructor
@Service
public class UnfollowProfileHandler implements CommandHandler<UnfollowProfileResult, UnfollowProfile> {

    private final UserRepository userRepository;
    private final FollowRelationRepository followRelationRepository;

    @Transactional
    @Override
    public UnfollowProfileResult handle(UnfollowProfile command) {
        User currentUser = userRepository.findByUsername(command.getFollower())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getFollower()));

        User followee = userRepository.findByUsername(command.getFollowee())
                .orElseThrow(() -> notFound("user [name=%s] does not exist", command.getFollowee()));

        followRelationRepository.deleteByFollowerAndFollowee(currentUser, followee);

        List<FollowRelation> filteredFollowers = followee.getFollowers().stream()
                .filter(followRelation -> !followRelation.getFollower().equals(currentUser))
                .collect(Collectors.toList());

        User alteredFollowee = followee.toBuilder().clearFollowers()
                .followers(filteredFollowers)
                .build();

        userRepository.save(alteredFollowee);

        return new UnfollowProfileResult(ProfileAssembler.assemble(alteredFollowee, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UpdateArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.UpdateArticle;
import com.github.al.realworld.api.command.UpdateArticleResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.application.service.SlugService;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.ZonedDateTime;
import java.util.Objects;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.ForbiddenException.forbidden;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class UpdateArticleHandler implements CommandHandler<UpdateArticleResult, UpdateArticle> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;
    private final SlugService slugService;

    @Transactional
    @Override
    public UpdateArticleResult handle(UpdateArticle command) {
        Article article = articleRepository.findBySlug(command.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exist", command.getSlug()));

        if (!Objects.equals(article.getAuthor().getUsername(), command.getCurrentUsername())) {
            throw forbidden("article [slug=%s] is not owned by %s", command.getSlug(), command.getCurrentUsername());
        }

        User currentUser = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", command.getCurrentUsername()));

        Article alteredArticle = article.toBuilder()
                .slug(command.getTitle() != null ? slugService.makeSlug(command.getTitle()) : article.getSlug())
                .title(command.getTitle() != null ? command.getTitle() : article.getTitle())
                .description(command.getDescription() != null ? command.getDescription() : article.getDescription())
                .body(command.getBody() != null ? command.getBody() : article.getBody())
                .updatedAt(ZonedDateTime.now())
                .build();

        articleRepository.save(alteredArticle);

        return new UpdateArticleResult(ArticleAssembler.assemble(alteredArticle, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/command/UpdateUserHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.api.command.UpdateUser;
import com.github.al.realworld.api.command.UpdateUserResult;
import com.github.al.realworld.application.UserAssembler;
import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.bus.CommandHandler;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import javax.transaction.Transactional;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;
import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class UpdateUserHandler implements CommandHandler<UpdateUserResult, UpdateUser> {

    private final UserRepository userRepository;
    private final JwtService jwtService;
    private final PasswordEncoder encoder;

    @Transactional
    @Override
    public UpdateUserResult handle(UpdateUser command) {
        User user = userRepository.findByUsername(command.getCurrentUsername())
                .orElseThrow(() -> notFound("user [name=%s] does not exist", command.getCurrentUsername()));

        if (command.getUsername() != null
                && !command.getUsername().equals(user.getUsername())
                && userRepository.findByUsername(command.getUsername()).isPresent()) {
            throw badRequest("user [name=%s] already exists", command.getUsername());
        }

        if (command.getEmail() != null
                && !command.getEmail().equals(user.getEmail())
                && userRepository.findByEmail(command.getEmail()).isPresent()) {
            throw badRequest("user [email=%s] already exists", command.getEmail());
        }

        User alteredUser = user.toBuilder()
                .email(command.getEmail() != null ? command.getEmail() : user.getEmail())
                .username(command.getUsername() != null ? command.getUsername() : user.getUsername())
                .password(command.getPassword() != null ? encoder.encode(command.getPassword()) : user.getPassword())
                .bio(command.getBio() != null ? command.getBio() : user.getBio())
                .image(command.getImage() != null ? command.getImage() : user.getImage())
                .build();

        User savedUser = userRepository.save(alteredUser);

        return new UpdateUserResult(UserAssembler.assemble(savedUser, jwtService));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/BadRequestException.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.exception;

import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ResponseStatus;

@ResponseStatus(HttpStatus.BAD_REQUEST)
public class BadRequestException extends RuntimeException {

    public BadRequestException() {
    }

    public BadRequestException(String message) {
        super(message);
    }

    public static BadRequestException badRequest(String message, Object... args) {
        return new BadRequestException(String.format(message, args));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/ForbiddenException.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.exception;

import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ResponseStatus;

@ResponseStatus(HttpStatus.FORBIDDEN)
public class ForbiddenException extends RuntimeException {

    public ForbiddenException() {
    }

    public ForbiddenException(String message) {
        super(message);
    }

    public static ForbiddenException forbidden(String message, Object... args) {
        return new ForbiddenException(String.format(message, args));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/NotFoundException.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.exception;

import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ResponseStatus;

@ResponseStatus(HttpStatus.NOT_FOUND)
public class NotFoundException extends RuntimeException {

    public NotFoundException() {
    }

    public NotFoundException(String message) {
        super(message);
    }

    public static NotFoundException notFound(String message, Object... args) {
        return new NotFoundException(String.format(message, args));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/exception/UnauthorizedException.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.exception;

import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ResponseStatus;

@ResponseStatus(HttpStatus.UNAUTHORIZED)
public class UnauthorizedException extends RuntimeException {

    public UnauthorizedException() {
        super();
    }

    public UnauthorizedException(String message) {
        super(message);
    }

    public static UnauthorizedException unauthorized(String message, Object... args) {
        return new UnauthorizedException(String.format(message, args));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetArticleHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.query.GetArticle;
import com.github.al.realworld.api.query.GetArticleResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class GetArticleHandler implements QueryHandler<GetArticleResult, GetArticle> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional(readOnly = true)
    @Override
    public GetArticleResult handle(GetArticle query) {
        Article article = articleRepository.findBySlug(query.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exists", query.getSlug()));

        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElse(null);

        return new GetArticleResult(ArticleAssembler.assemble(article, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetArticlesHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.dto.ArticleDto;
import com.github.al.realworld.api.query.GetArticles;
import com.github.al.realworld.api.query.GetArticlesResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.ArrayList;
import java.util.List;

@RequiredArgsConstructor
@Service
public class GetArticlesHandler implements QueryHandler<GetArticlesResult, GetArticles> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional(readOnly = true)
    @Override
    public GetArticlesResult handle(GetArticles query) {
        List<Article> articles = articleRepository
                .findByFilters(query.getTag(), query.getAuthor(), query.getFavorited(), query.getLimit(), query.getOffset());

        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElse(null);

        List<ArticleDto> results = new ArrayList<>();

        articles.forEach(article -> results.add(ArticleAssembler.assemble(article, currentUser)));

        return new GetArticlesResult(results, results.size());
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCommentHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.query.GetComment;
import com.github.al.realworld.api.query.GetCommentResult;
import com.github.al.realworld.application.CommentAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.Comment;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class GetCommentHandler implements QueryHandler<GetCommentResult, GetComment> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional(readOnly = true)
    @Override
    public GetCommentResult handle(GetComment query) {
        Article article = articleRepository.findBySlug(query.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exists", query.getSlug()));

        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElse(null);

        Comment comment = article.getComments().stream()
                .filter(c -> c.getId().equals(query.getId()))
                .findFirst()
                .orElseThrow(() -> notFound("comment [id=%s] does not exists", query.getId()));

        return new GetCommentResult(CommentAssembler.assemble(comment, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCommentsHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.dto.CommentDto;
import com.github.al.realworld.api.query.GetComments;
import com.github.al.realworld.api.query.GetCommentsResult;
import com.github.al.realworld.application.CommentAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.ArrayList;

import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class GetCommentsHandler implements QueryHandler<GetCommentsResult, GetComments> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;

    @Transactional(readOnly = true)
    @Override
    public GetCommentsResult handle(GetComments query) {
        Article article = articleRepository.findBySlug(query.getSlug())
                .orElseThrow(() -> notFound("article [slug=%s] does not exists", query.getSlug()));

        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElse(null);

        ArrayList<CommentDto> result = new ArrayList<>();

        article.getComments().forEach(comment -> result.add(CommentAssembler.assemble(comment, currentUser)));

        return new GetCommentsResult(result);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetCurrentUserHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.query.GetCurrentUser;
import com.github.al.realworld.api.query.GetCurrentUserResult;
import com.github.al.realworld.application.UserAssembler;
import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;

@RequiredArgsConstructor
@Component
public class GetCurrentUserHandler implements QueryHandler<GetCurrentUserResult, GetCurrentUser> {

    private final UserRepository userRepository;
    private final JwtService jwtService;

    @Transactional(readOnly = true)
    @Override
    public GetCurrentUserResult handle(GetCurrentUser query) {
        User user = userRepository.findByUsername(query.getUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", query.getUsername()));

        return new GetCurrentUserResult(UserAssembler.assemble(user, jwtService));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetFeedHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.dto.ArticleDto;
import com.github.al.realworld.api.query.GetFeed;
import com.github.al.realworld.api.query.GetFeedResult;
import com.github.al.realworld.application.ArticleAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.ArticleRepository;
import com.github.al.realworld.domain.repository.FollowRelationRepository;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.ArrayList;
import java.util.List;
import java.util.UUID;
import java.util.stream.Collectors;

import static com.github.al.realworld.application.exception.BadRequestException.badRequest;

@RequiredArgsConstructor
@Service
public class GetFeedHandler implements QueryHandler<GetFeedResult, GetFeed> {

    private final ArticleRepository articleRepository;
    private final UserRepository userRepository;
    private final FollowRelationRepository followRelationRepository;

    @Transactional(readOnly = true)
    @Override
    public GetFeedResult handle(GetFeed query) {
        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElseThrow(() -> badRequest("user [name=%s] does not exist", query.getCurrentUsername()));

        List<FollowRelation> relations = followRelationRepository.findByFollowerId(currentUser.getId());

        List<UUID> followeesUsernames = relations.stream()
                .map(followRelation -> followRelation.getFollowee().getId())
                .collect(Collectors.toList());

        List<Article> articles = articleRepository
                .findByFollowees(followeesUsernames, query.getLimit(), query.getOffset());

        ArrayList<ArticleDto> results = new ArrayList<>();

        articles.forEach(article -> results.add(ArticleAssembler.assemble(article, currentUser)));

        return new GetFeedResult(results, results.size());
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetProfileHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.query.GetProfile;
import com.github.al.realworld.api.query.GetProfileResult;
import com.github.al.realworld.application.ProfileAssembler;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import static com.github.al.realworld.application.exception.NotFoundException.notFound;

@RequiredArgsConstructor
@Service
public class GetProfileHandler implements QueryHandler<GetProfileResult, GetProfile> {

    private final UserRepository userRepository;

    @Transactional(readOnly = true)
    @Override
    public GetProfileResult handle(GetProfile query) {
        User currentUser = userRepository.findByUsername(query.getCurrentUsername())
                .orElse(null);

        User user = userRepository.findByUsername(query.getUsername())
                .orElseThrow(() -> notFound("user [name=%s] does not exist", query.getUsername()));

        return new GetProfileResult(ProfileAssembler.assemble(user, currentUser));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/query/GetTagsHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.query;

import com.github.al.realworld.api.query.GetTags;
import com.github.al.realworld.api.query.GetTagsResult;
import com.github.al.realworld.bus.QueryHandler;
import com.github.al.realworld.domain.model.Tag;
import com.github.al.realworld.domain.repository.TagRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.ArrayList;
import java.util.stream.StreamSupport;

@RequiredArgsConstructor
@Service
public class GetTagsHandler implements QueryHandler<GetTagsResult, GetTags> {

    private final TagRepository tagRepository;

    @Transactional(readOnly = true)
    @Override
    public GetTagsResult handle(GetTags query) {
        GetTagsResult result = new GetTagsResult(new ArrayList<>());

        StreamSupport.stream(tagRepository.findAll().spliterator(), false)
                .map(Tag::getName)
                .forEach(t -> result.getTags().add(t));

        return result;
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/AuthenticationService.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

public interface AuthenticationService {

    String currentUsername();

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/DefaultAuthenticationService.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

import com.github.al.realworld.domain.model.User;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Service;

import java.util.Optional;

@Service
public class DefaultAuthenticationService implements AuthenticationService {

    @SuppressWarnings("unchecked")
    @Override
    public String currentUsername() {
        Optional<User> principal = (Optional<User>) SecurityContextHolder.getContext()
                .getAuthentication()
                .getPrincipal();
        return principal.map(User::getUsername).orElse(null);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/DefaultJwtService.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

import com.github.al.realworld.domain.model.User;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.io.Decoders;
import io.jsonwebtoken.security.Keys;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import java.security.Key;

@Service
public class DefaultJwtService implements JwtService {

    private final Key key;

    public DefaultJwtService(@Value("${security.jwt.secret}") String secret) {
        byte[] keyBytes = Decoders.BASE64.decode(secret);
        this.key = Keys.hmacShaKeyFor(keyBytes);
    }

    @Override
    public String getSubject(String token) {
        return Jwts.parserBuilder()
                .setSigningKey(key)
                .build()
                .parseClaimsJws(token)
                .getBody()
                .getSubject();
    }

    @Override
    public String getToken(User user) {
        return Jwts.builder()
                .setSubject(user.getUsername())
                .signWith(key)
                .compact();
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/JwtService.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

import com.github.al.realworld.domain.model.User;

public interface JwtService {

    String getSubject(String token);

    String getToken(User user);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/application/service/SlugService.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

import org.springframework.stereotype.Component;

import java.text.Normalizer;
import java.util.Locale;
import java.util.regex.Pattern;

@Component
public class SlugService {

    private static final Pattern NONLATIN = Pattern.compile("[^\\w_-]");
    private static final Pattern SEPARATORS = Pattern.compile("[\\s\\p{Punct}&&[^-]]");

    public String makeSlug(String input) {
        String noseparators = SEPARATORS.matcher(input).replaceAll("-");
        String normalized = Normalizer.normalize(noseparators, Normalizer.Form.NFD);
        String slug = NONLATIN.matcher(normalized).replaceAll("");
        return slug.toLowerCase(Locale.ENGLISH)
                .replaceAll("-{2,}","-")
                .replaceAll("^-|-$","");
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Article.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Singular;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.Lob;
import javax.persistence.ManyToMany;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import java.time.ZonedDateTime;
import java.util.Set;
import java.util.UUID;

@NoArgsConstructor
@AllArgsConstructor
@Builder(toBuilder = true)
@Getter
@Entity
public class Article {

    @Id
    private UUID id;
    private String slug;
    private String title;
    private String description;
    private ZonedDateTime createdAt;
    private ZonedDateTime updatedAt;

    @Lob
    private String body;

    @OneToOne
    private User author;

    @Singular
    @OneToMany(cascade = CascadeType.ALL)
    @JoinColumn(name = "article_id")
    private Set<Comment> comments;

    @Singular
    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinTable(name = "article_tags",
            joinColumns = @JoinColumn(name = "article_id"),
            inverseJoinColumns = @JoinColumn(name = "tag_id")
    )
    private Set<Tag> tags;

    @Singular
    @ManyToMany
    @JoinTable(name = "article_favorites",
            joinColumns = @JoinColumn(name = "article_id"),
            inverseJoinColumns = @JoinColumn(name = "user_id")
    )
    private Set<User> favoredUsers;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Comment.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Lob;
import javax.persistence.OneToOne;
import java.time.ZonedDateTime;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
@EqualsAndHashCode(onlyExplicitlyIncluded = true)
@Entity
public class Comment {

    @EqualsAndHashCode.Include
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private ZonedDateTime createdAt;
    private ZonedDateTime updatedAt;
    @Lob
    private String body;
    @OneToOne
    private User author;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/FollowRelation.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.AllArgsConstructor;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.persistence.EmbeddedId;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.ManyToOne;
import javax.persistence.MapsId;
import javax.persistence.Table;

@NoArgsConstructor
@AllArgsConstructor
@Getter
@EqualsAndHashCode(onlyExplicitlyIncluded = true)
@Entity
@Table(name = "follow_relation")
public class FollowRelation {

    @EmbeddedId
    private FollowRelationId id;

    @EqualsAndHashCode.Include
    @ManyToOne(fetch = FetchType.LAZY)
    @MapsId("followerId")
    private User follower;

    @EqualsAndHashCode.Include
    @ManyToOne(fetch = FetchType.LAZY)
    @MapsId("followeeId")
    private User followee;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/FollowRelationId.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.AllArgsConstructor;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.persistence.Embeddable;
import java.io.Serializable;
import java.util.UUID;

@NoArgsConstructor
@AllArgsConstructor
@Getter
@EqualsAndHashCode
@Embeddable
public class FollowRelationId implements Serializable {

    private UUID followerId;
    private UUID followeeId;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/Tag.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@NoArgsConstructor
@Getter
@Entity
public class Tag {

    @Id
    @GeneratedValue
    private Long id;

    @Column(unique = true)
    private String name;

    public Tag(String name) {
        this.name = name;
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/model/User.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.model;

import lombok.AccessLevel;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Singular;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import java.util.Set;
import java.util.UUID;

@NoArgsConstructor(access = AccessLevel.PACKAGE)
@AllArgsConstructor
@Builder(toBuilder = true)
@Getter
@EqualsAndHashCode(onlyExplicitlyIncluded = true)
@Entity
public class User {

    @EqualsAndHashCode.Include
    @Id
    private UUID id;
    private String username;
    private String email;
    private String password;
    private String bio;
    private String image;

    @Singular
    @OneToMany(
            mappedBy = "followee",
            cascade = CascadeType.ALL,
            orphanRemoval = true
    )
    private Set<FollowRelation> followers;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/ArticleRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.repository;

import com.github.al.realworld.domain.model.Article;

import java.util.List;
import java.util.Optional;
import java.util.UUID;

public interface ArticleRepository {

    Optional<Article> findBySlug(String slug);

    Optional<Article> findByTitle(String title);

    List<Article> findByFilters(String tag, String author, String favorited, Integer limit, Integer offset);

    List<Article> findByFollowees(List<UUID> followees, Integer limit, Integer offset);

    void delete(Article article);

    Article save(Article article);
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/FollowRelationRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.repository;

import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.User;

import java.util.List;
import java.util.UUID;

public interface FollowRelationRepository {

    FollowRelation save(FollowRelation entity);

    List<FollowRelation> findByFollowerId(UUID followerId);

    List<FollowRelation> findByFolloweeId(UUID followeeId);

    void deleteByFollowerAndFollowee(User follower, User followee);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/TagRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.repository;

import com.github.al.realworld.domain.model.Tag;

import java.util.Optional;

public interface TagRepository {

    Optional<Tag> findByName(String name);

    Iterable<Tag> findAll();
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/domain/repository/UserRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.domain.repository;

import com.github.al.realworld.domain.model.User;

import java.util.Optional;

public interface UserRepository {

    Optional<User> findByEmail(String email);

    Optional<User> findByUsername(String username);

    User save(User user);
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/JwtFilter.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.config;

import com.github.al.realworld.application.service.JwtService;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.security.authentication.AbstractAuthenticationToken;
import org.springframework.security.authentication.AnonymousAuthenticationToken;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.Collections;
import java.util.Optional;

@RequiredArgsConstructor
@Component
public class JwtFilter extends OncePerRequestFilter {

    private final UserRepository userRepository;
    private final JwtService jwtService;

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
        String authorization = request.getHeader("Authorization");
        String[] tokenParts = authorization != null ? authorization.split(" ") : new String[0];

        AbstractAuthenticationToken authentication = anonymous();

        if (tokenParts.length > 1) {
            String subject = jwtService.getSubject(tokenParts[1]);
            Optional<User> userOptional = userRepository.findByUsername(subject);
            if (userOptional.isPresent()) {
                authentication = authenticated(userOptional.get());
            }
        }

        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
        SecurityContextHolder.getContext().setAuthentication(authentication);

        filterChain.doFilter(request, response);
    }

    private AbstractAuthenticationToken authenticated(User user) {
        return new UsernamePasswordAuthenticationToken(
                Optional.of(user),
                null,
                Collections.emptyList()
        );
    }

    private AbstractAuthenticationToken anonymous() {
        return new AnonymousAuthenticationToken(
                "anonymous",
                Optional.empty(),
                Collections.singletonList(new SimpleGrantedAuthority("anonymous"))
        );
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/LogConfig.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.filter.CommonsRequestLoggingFilter;

@Configuration
public class LogConfig {

    @Bean
    public CommonsRequestLoggingFilter logFilter() {
        CommonsRequestLoggingFilter filter = new CommonsRequestLoggingFilter();
        filter.setIncludeQueryString(true);
        filter.setIncludePayload(true);
        filter.setMaxPayloadLength(10000);
        filter.setIncludeHeaders(false);
        filter.setAfterMessagePrefix("REQUEST DATA : ");
        return filter;
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/SecurityConfig.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.config;

import lombok.RequiredArgsConstructor;
import org.springframework.boot.actuate.autoconfigure.security.servlet.EndpointRequest;
import org.springframework.boot.actuate.startup.StartupEndpoint;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.HttpMethod;
import org.springframework.http.HttpStatus;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.authentication.HttpStatusEntryPoint;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

@RequiredArgsConstructor
@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    private final JwtFilter jwtFilter;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
                .authorizeRequests()
                .antMatchers("/h2-console", "/h2-console/**").permitAll()
                .and()
                .headers().frameOptions().sameOrigin();

        http
                .csrf().disable()
                .cors().and()
                .exceptionHandling()
                .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)).and()
                .addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class)
                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()
                .authorizeRequests()
                .requestMatchers(EndpointRequest.to(StartupEndpoint.class)).permitAll()
                .antMatchers(HttpMethod.OPTIONS).permitAll()
                .antMatchers(HttpMethod.GET, "/api/articles/feed").authenticated()
                .antMatchers(HttpMethod.POST, "/api/users", "/api/users/login").permitAll()
                .antMatchers(HttpMethod.GET, "/api/articles/**", "/api/profiles/**", "/api/tags").permitAll()
                .anyRequest().authenticated();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/config/WebConfig.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedMethods("HEAD", "GET", "PUT", "POST", "DELETE", "PATCH");
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataArticleRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.Article;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.CrudRepository;
import org.springframework.data.repository.query.Param;

import java.util.List;
import java.util.Optional;
import java.util.UUID;

public interface DataArticleRepository extends CrudRepository<Article, UUID> {

    Optional<Article> findBySlug(String slug);

    Optional<Article> findByTitle(String title);

    @Query("SELECT DISTINCT article_ FROM Article article_ " +
            "LEFT JOIN article_.tags t " +
            "LEFT JOIN article_.author p " +
            "LEFT JOIN article_.favoredUsers f " +
            "WHERE " +
            "(:tag IS NULL OR t.name = :tag) AND " +
            "(:author IS NULL OR p.username = :author) AND " +
            "(:favorited IS NULL OR f.username = :favorited)")
    List<Article> findByFilters(@Param("tag") String tag,
                                @Param("author") String author,
                                @Param("favorited") String favorited,
                                Pageable pageable);

    @Query("SELECT article_ FROM Article article_ JOIN article_.author au WHERE au.id IN :followees")
    List<Article> findByFollowees(List<UUID> followees, Pageable pageable);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataFollowRelationRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.FollowRelationId;
import com.github.al.realworld.domain.model.User;
import org.springframework.data.repository.CrudRepository;

import java.util.List;
import java.util.UUID;

public interface DataFollowRelationRepository extends CrudRepository<FollowRelation, FollowRelationId> {

    List<FollowRelation> findByFollowerId(UUID followerId);

    List<FollowRelation> findByFolloweeId(UUID followeeId);

    void deleteByFollowerAndFollowee(User follower, User followee);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataTagRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.Tag;
import org.springframework.data.repository.CrudRepository;

import java.util.Optional;

public interface DataTagRepository extends CrudRepository<Tag, Long> {

    Optional<Tag> findByName(String name);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/DataUserRepository.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.User;
import org.springframework.data.repository.CrudRepository;

import java.util.Optional;

public interface DataUserRepository extends CrudRepository<User, String> {

    Optional<User> findByEmail(String email);

    Optional<User> findByUsername(String username);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaArticleRepositoryAdapter.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.Article;
import com.github.al.realworld.domain.repository.ArticleRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.stereotype.Repository;

import java.util.List;
import java.util.Optional;
import java.util.UUID;

@RequiredArgsConstructor
@Repository
public class JpaArticleRepositoryAdapter implements ArticleRepository {

    private final DataArticleRepository repository;

    @Override
    public Optional<Article> findBySlug(String slug) {
        return repository.findBySlug(slug);
    }

    @Override
    public Optional<Article> findByTitle(String title) {
        return repository.findByTitle(title);
    }

    @Override
    public List<Article> findByFilters(String tag, String author, String favorited, Integer limit, Integer offset) {
        Pageable pageable = new OffsetBasedPageRequest(limit, offset, Sort.by(Sort.Order.desc("createdAt")));
        return repository.findByFilters(tag, author, favorited, pageable);
    }

    @Override
    public List<Article> findByFollowees(List<UUID> followees, Integer limit, Integer offset) {
        Pageable pageable = new OffsetBasedPageRequest(limit, offset, Sort.by(Sort.Order.desc("createdAt")));
        return repository.findByFollowees(followees, pageable);
    }

    @Override
    public void delete(Article article) {
        repository.delete(article);
    }

    @Override
    public Article save(Article article) {
        return repository.save(article);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaFollowRelationRepositoryAdapter.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.FollowRelation;
import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.FollowRelationRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Repository;

import java.util.List;
import java.util.UUID;

@RequiredArgsConstructor
@Repository
public class JpaFollowRelationRepositoryAdapter implements FollowRelationRepository {

    private final DataFollowRelationRepository repository;

    @Override
    public FollowRelation save(FollowRelation entity) {
        return repository.save(entity);
    }

    @Override
    public List<FollowRelation> findByFollowerId(UUID followerId) {
        return repository.findByFollowerId(followerId);
    }

    @Override
    public List<FollowRelation> findByFolloweeId(UUID followeeId) {
        return repository.findByFolloweeId(followeeId);
    }

    @Override
    public void deleteByFollowerAndFollowee(User follower, User followee) {
        repository.deleteByFollowerAndFollowee(follower, followee);
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaTagRepositoryAdapter.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.Tag;
import com.github.al.realworld.domain.repository.TagRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Repository;

import java.util.Optional;

@RequiredArgsConstructor
@Repository
public class JpaTagRepositoryAdapter implements TagRepository {

    private final DataTagRepository repository;

    @Override
    public Optional<Tag> findByName(String name) {
        return repository.findByName(name);
    }

    @Override
    public Iterable<Tag> findAll() {
        return repository.findAll();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/JpaUserRepositoryAdapter.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import com.github.al.realworld.domain.model.User;
import com.github.al.realworld.domain.repository.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Repository;

import java.util.Optional;

@RequiredArgsConstructor
@Repository
public class JpaUserRepositoryAdapter implements UserRepository {

    private final DataUserRepository repository;

    @Override
    public Optional<User> findByEmail(String email) {
        return repository.findByEmail(email);
    }

    @Override
    public Optional<User> findByUsername(String username) {
        return repository.findByUsername(username);
    }

    @Override
    public User save(User user) {
        return repository.save(user);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/db/jpa/OffsetBasedPageRequest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.db.jpa;

import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;

public class OffsetBasedPageRequest implements Pageable {

    private final int limit;
    private final int offset;
    private final Sort sort;

    public OffsetBasedPageRequest(int limit, int offset, Sort sort) {
        if (limit < 1) {
            throw new IllegalArgumentException("Limit must not be less than one!");
        }
        if (offset < 0) {
            throw new IllegalArgumentException("Offset index must not be less than zero!");
        }
        this.limit = limit;
        this.offset = offset;
        this.sort = sort;
    }

    @Override
    public int getPageNumber() {
        return offset / limit;
    }

    @Override
    public int getPageSize() {
        return limit;
    }

    @Override
    public long getOffset() {
        return offset;
    }

    @Override
    public Sort getSort() {
        return sort;
    }

    @Override
    public Pageable next() {
        // Typecast possible because number of entries cannot be bigger than integer (primary key is integer)
        return new OffsetBasedPageRequest(getPageSize(), (int) (getOffset() + getPageSize()), sort);
    }

    public Pageable previous() {
        // The integers are positive. Subtracting does not let them become bigger than integer.
        return hasPrevious() ?
                new OffsetBasedPageRequest(getPageSize(), (int) (getOffset() - getPageSize()), sort) : this;
    }

    @Override
    public Pageable previousOrFirst() {
        return hasPrevious() ? previous() : first();
    }

    @Override
    public Pageable first() {
        return new OffsetBasedPageRequest(getPageSize(), 0, sort);
    }

    @Override
    public boolean hasPrevious() {
        return offset > limit;
    }

    @Override
    public Pageable withPage(int pageNumber) {
        return new OffsetBasedPageRequest(limit, pageNumber * limit, getSort());
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/ArticleController.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.web;

import com.github.al.realworld.api.command.AddComment;
import com.github.al.realworld.api.command.AddCommentResult;
import com.github.al.realworld.api.command.CreateArticle;
import com.github.al.realworld.api.command.CreateArticleResult;
import com.github.al.realworld.api.command.DeleteArticle;
import com.github.al.realworld.api.command.DeleteComment;
import com.github.al.realworld.api.command.FavoriteArticle;
import com.github.al.realworld.api.command.FavoriteArticleResult;
import com.github.al.realworld.api.command.UnfavoriteArticle;
import com.github.al.realworld.api.command.UnfavoriteArticleResult;
import com.github.al.realworld.api.command.UpdateArticle;
import com.github.al.realworld.api.command.UpdateArticleResult;
import com.github.al.realworld.api.operation.ArticleOperations;
import com.github.al.realworld.api.query.GetArticle;
import com.github.al.realworld.api.query.GetArticleResult;
import com.github.al.realworld.api.query.GetArticles;
import com.github.al.realworld.api.query.GetArticlesResult;
import com.github.al.realworld.api.query.GetComments;
import com.github.al.realworld.api.query.GetCommentsResult;
import com.github.al.realworld.api.query.GetFeed;
import com.github.al.realworld.api.query.GetFeedResult;
import com.github.al.realworld.application.service.AuthenticationService;
import com.github.al.realworld.bus.Bus;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.validation.Valid;

@RequiredArgsConstructor
@RestController
@RequestMapping("${api.version}")
public class ArticleController implements ArticleOperations {

    private final Bus bus;
    private final AuthenticationService auth;

    @Override
    public GetArticlesResult findByFilters(String tag,
                                           String author,
                                           String favorited,
                                           Integer limit,
                                           Integer offset) {
        return bus.executeQuery(GetArticles.builder()
                .currentUsername(auth.currentUsername())
                .tag(tag)
                .author(author)
                .favorited(favorited)
                .limit(limit)
                .offset(offset)
                .build());
    }

    @Override
    public CreateArticleResult create(@Valid CreateArticle command) {
        return bus.executeCommand(command.toBuilder().currentUsername(auth.currentUsername()).build());
    }

    @Override
    public GetFeedResult feed(Integer limit, Integer offset) {
        return bus.executeQuery(new GetFeed(auth.currentUsername(), limit, offset));
    }

    @Override
    public GetArticleResult findBySlug(String slug) {
        return bus.executeQuery(new GetArticle(auth.currentUsername(), slug));
    }

    @Override
    public UpdateArticleResult updateBySlug(String slug, @Valid UpdateArticle command) {
        return bus.executeCommand(command.toBuilder().slug(slug).currentUsername(auth.currentUsername()).build());
    }

    @Override
    public void deleteBySlug(String slug) {
        bus.executeCommand(new DeleteArticle(auth.currentUsername(), slug));
    }

    @Override
    public FavoriteArticleResult favorite(String slug) {
        return bus.executeCommand(new FavoriteArticle(auth.currentUsername(), slug));
    }

    @Override
    public UnfavoriteArticleResult unfavorite(String slug) {
        return bus.executeCommand(new UnfavoriteArticle(auth.currentUsername(), slug));
    }

    @Override
    public GetCommentsResult findAllComments(String slug) {
        return bus.executeQuery(new GetComments(auth.currentUsername(), slug));
    }

    @Override
    public AddCommentResult addComment(String slug, @Valid AddComment command) {
        return bus.executeCommand(command.toBuilder().slug(slug).currentUsername(auth.currentUsername()).build());
    }

    @Override
    public void deleteComment(String slug, Long id) {
        bus.executeCommand(new DeleteComment(auth.currentUsername(), slug, id));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/ProfileController.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.web;

import com.github.al.realworld.api.command.FollowProfile;
import com.github.al.realworld.api.command.FollowProfileResult;
import com.github.al.realworld.api.command.UnfollowProfile;
import com.github.al.realworld.api.command.UnfollowProfileResult;
import com.github.al.realworld.api.operation.ProfileOperations;
import com.github.al.realworld.api.query.GetProfile;
import com.github.al.realworld.api.query.GetProfileResult;
import com.github.al.realworld.application.service.AuthenticationService;
import com.github.al.realworld.bus.Bus;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RequiredArgsConstructor
@RestController
@RequestMapping("${api.version}")
public class ProfileController implements ProfileOperations {

    private final Bus bus;
    private final AuthenticationService auth;

    @Override
    public GetProfileResult findByUsername(String username) {
        return bus.executeQuery(new GetProfile(auth.currentUsername(), username));
    }

    @Override
    public FollowProfileResult follow(String username) {
        return bus.executeCommand(new FollowProfile(auth.currentUsername(), username));
    }

    @Override
    public UnfollowProfileResult unfollow(String username) {
        return bus.executeCommand(new UnfollowProfile(auth.currentUsername(), username));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/TagController.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.web;

import com.github.al.realworld.api.operation.TagOperations;
import com.github.al.realworld.api.query.GetTags;
import com.github.al.realworld.api.query.GetTagsResult;
import com.github.al.realworld.bus.Bus;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RequiredArgsConstructor
@RestController
@RequestMapping("${api.version}")
public class TagController implements TagOperations {

    private final Bus bus;

    @Override
    public GetTagsResult findAll() {
        return bus.executeQuery(new GetTags());
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/java/com/github/al/realworld/infrastructure/web/UserController.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.infrastructure.web;

import com.github.al.realworld.api.command.LoginUser;
import com.github.al.realworld.api.command.LoginUserResult;
import com.github.al.realworld.api.command.RegisterUser;
import com.github.al.realworld.api.command.RegisterUserResult;
import com.github.al.realworld.api.command.UpdateUser;
import com.github.al.realworld.api.command.UpdateUserResult;
import com.github.al.realworld.api.operation.UserOperations;
import com.github.al.realworld.api.query.GetCurrentUser;
import com.github.al.realworld.api.query.GetCurrentUserResult;
import com.github.al.realworld.application.service.AuthenticationService;
import com.github.al.realworld.bus.Bus;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.validation.Valid;

@RequiredArgsConstructor
@RestController
@RequestMapping("${api.version}")
public class UserController implements UserOperations {

    private final Bus bus;
    private final AuthenticationService auth;

    @Override
    public LoginUserResult login(@Valid LoginUser cmd) {
        return bus.executeCommand(cmd);
    }

    @Override
    public RegisterUserResult register(@Valid RegisterUser cmd) {
        return bus.executeCommand(cmd);
    }

    @Override
    public GetCurrentUserResult current() {
        return bus.executeQuery(new GetCurrentUser(auth.currentUsername()));
    }

    @Override
    public UpdateUserResult update(@Valid UpdateUser cmd) {
        return bus.executeCommand(cmd.withCurrentUsername(auth.currentUsername()));
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/application.properties
spring.h2.console.enabled=true
spring.jackson.deserialization.unwrap_root_value=true
security.jwt.secret=MWY1MmQ2NTItODIxNC00ZGM0LWFiODQtOGFiNGZmMjlhZjdj
api.version=/api
management.endpoints.web.exposure.include=startup
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/logback-spring.xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">
        <layout class="ch.qos.logback.classic.PatternLayout">
            <Pattern>
                %black(%d{ISO8601}) %highlight(%-5level) [%blue(%t)] %yellow(%C{1.}): %msg%n%throwable
            </Pattern>
        </layout>
    </appender>

    <root level="info">
        <appender-ref ref="Console"/>
    </root>

<!--    <logger name="org.springframework.web.filter.CommonsRequestLoggingFilter" level="debug"/>-->

</configuration>
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/db/changelog/db.changelog-master.yaml
databaseChangeLog:
  - include:
      file: changes/01-schema.xml
      relativeToChangelogFile: true
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/main/resources/db/changelog/changes/01-schema.xml
<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="01" author="al">
        <createTable tableName="user">
            <column name="id" type="uuid">
                <constraints primaryKey="true"/>
            </column>
            <column name="username" type="varchar(100)"/>
            <column name="email" type="varchar(100)"/>
            <column name="password" type="varchar(100)"/>
            <column name="bio" type="varchar(200)"/>
            <column name="image" type="varchar(200)"/>
        </createTable>
    </changeSet>

    <changeSet id="02" author="al">
        <createTable tableName="article">
            <column name="id" type="uuid">
                <constraints primaryKey="true"/>
            </column>
            <column name="slug" type="varchar(100)"/>
            <column name="title" type="varchar(100)"/>
            <column name="description" type="varchar(500)"/>
            <column name="created_at" type="timestamp with time zone"/>
            <column name="updated_at" type="timestamp with time zone"/>
            <column name="body" type="varchar(5000)"/>
            <column name="author_id" type="uuid">
                <constraints foreignKeyName="fk_article_user"
                             referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="03" author="al">
        <createTable tableName="comment">
            <column name="id" type="number">
                <constraints primaryKey="true"/>
            </column>
            <column name="created_at" type="timestamp with time zone"/>
            <column name="updated_at" type="timestamp with time zone"/>
            <column name="body" type="varchar(5000)"/>
            <column name="author_id" type="uuid">
                <constraints foreignKeyName="fk_comment_user"
                             referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="article_id" type="uuid">
                <constraints foreignKeyName="fk_comment_article"
                             referencedTableName="article"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="04" author="al">
        <createTable tableName="tag">
            <column name="id" type="number">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="varchar(200)"/>
        </createTable>
    </changeSet>

    <changeSet id="05" author="al">
        <createTable tableName="article_tags">
            <column name="article_id" type="uuid">
                <constraints nullable="false"
                             foreignKeyName="fk_article_tags_article"
                             referencedTableName="article"
                             referencedColumnNames="id"/>
            </column>
            <column name="tag_id" type="number">
                <constraints nullable="false"
                             foreignKeyName="fk_article_tags_tag"
                             referencedTableName="tag"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="article_tags" columnNames="article_id,tag_id"/>
    </changeSet>

    <changeSet id="06" author="al">
        <createTable tableName="follow_relation">
            <column name="follower_id" type="uuid">
                <constraints nullable="false"
                             foreignKeyName="fk_followers_follower"
                             referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="followee_id" type="uuid">
                <constraints nullable="false"
                             foreignKeyName="fk_followers_followee"
                             referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="follow_relation" columnNames="follower_id,followee_id"/>
    </changeSet>

    <changeSet id="07" author="al">
        <createTable tableName="article_favorites">
            <column name="article_id" type="uuid">
                <constraints nullable="false"
                             foreignKeyName="fk_article_favorites_article"
                             referencedTableName="article"
                             referencedColumnNames="id"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false"
                             foreignKeyName="fk_article_favorites_user"
                             referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="article_favorites" columnNames="article_id,user_id"/>
    </changeSet>

    <changeSet id="08" author="al">
        <createSequence cycle="false"
                        incrementBy="1"
                        ordered="true"
                        sequenceName="hibernate_sequence"
                        startValue="0"/>
    </changeSet>

</databaseChangeLog>
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/BeansTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.bus.CommandHandler;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.ApplicationContext;
import org.springframework.core.GenericTypeResolver;

import java.util.Arrays;
import java.util.Map;

@SpringBootTest
public class BeansTest {

    @Autowired
    private ApplicationContext applicationContext;

    @Test
    void name() {
        Map<String, CommandHandler> beansOfType = applicationContext.getBeansOfType(CommandHandler.class);
        beansOfType.values().forEach(commandHandler -> {
            Class<?>[] aClass = GenericTypeResolver.resolveTypeArguments(commandHandler.getClass(), CommandHandler.class);
            System.out.println(Arrays.toString(aClass));
        });
//        System.out.println(beansOfType);
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command1.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.bus.Command;

public class Command1 implements Command<String> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command1Handler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.bus.CommandHandler;
import org.springframework.stereotype.Component;

@Component
public class Command1Handler implements CommandHandler<String, Command1> {

    @Override
    public String handle(Command1 command) {
        return null;
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command2.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.bus.Command;

public class Command2 implements Command<String> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/command/Command2Handler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.command;

import com.github.al.realworld.bus.CommandHandler;
import org.springframework.stereotype.Component;

@Component
public class Command2Handler implements CommandHandler<String, Command2> {

    @Override
    public String handle(Command2 command) {
        return null;
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/application/service/SlugServiceTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.application.service;

import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

class SlugServiceTest {

    private static SlugService slugService;

    @BeforeAll
    static void beforeAll() {
        slugService = new SlugService();
    }

    @Test
    void name1() {
        String slug = slugService.makeSlug("qwer");

        assertThat(slug).isEqualTo("qwer");
    }

    @Test
    void name2() {
        String slug = slugService.makeSlug("qwer-");

        assertThat(slug).isEqualTo("qwer");
    }

    @Test
    void name3() {
        String slug = slugService.makeSlug("qw er-");

        assertThat(slug).isEqualTo("qw-er");
    }

    @Test
    void name4() {
        String slug = slugService.makeSlug("Qw er-");

        assertThat(slug).isEqualTo("qw-er");
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/Command3.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public class Command3 implements Command<String> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/Command3Handler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import org.springframework.stereotype.Component;

@Component
public class Command3Handler implements CommandHandler<String, Command3> {

    @Override
    public String handle(Command3 command) {
        return "command-3-result";
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service/src/test/java/com/github/al/realworld/bus/DefaultBusTest.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.stereotype.Component;

@SpringBootTest
class DefaultBusTest {

    @Autowired
    private Bus bus;

    @Test
    void name() {
        String result = bus.executeCommand(new Command3());
        System.out.println(result);
    }

    static class TestCommand1 implements Command<String> {
    }

    @Component
    public static class TestCommand1Handler implements CommandHandler<String, TestCommand1> {
        @Override
        public String handle(TestCommand1 command) {
            return "handle-result-1";
        }
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/build.gradle.kts
plugins {
    id("io.spring.dependency-management")
    id("org.springframework.boot")
    id("java-conventions")
}

dependencies {
    annotationProcessor("org.projectlombok:lombok")
    compileOnly("org.projectlombok:lombok")

    implementation(project(":service-bus"))
    implementation("com.fasterxml.jackson.core:jackson-annotations")
    implementation("jakarta.validation:jakarta.validation-api")
    implementation("org.springframework:spring-web")
}

tasks {
    bootJar {
        enabled = false
    }

    jar {
        enabled = true
    }
}
--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/AddComment.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.Builder;
import lombok.Getter;

@Builder(toBuilder = true)
@Getter
@JsonRootName("comment")
public class AddComment implements Command<AddCommentResult> {

    private String slug;
    private String body;
    private String currentUsername;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/AddCommentResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.CommentDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class AddCommentResult {

    private CommentDto comment;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/CreateArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.Builder;
import lombok.Getter;

import javax.validation.constraints.NotBlank;
import java.util.List;

@Builder(toBuilder = true)
@Getter
@JsonRootName("article")
public class CreateArticle implements Command<CreateArticleResult> {

    @NotBlank
    private String title;
    @NotBlank
    private String description;
    @NotBlank
    private String body;
    private List<String> tagList;
    private String currentUsername;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/CreateArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class CreateArticleResult {

    private ArticleDto article;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class DeleteArticle implements Command<DeleteArticleResult> {

    private String currentUsername;
    private String slug;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

public class DeleteArticleResult {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteComment.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class DeleteComment implements Command<DeleteCommentResult> {

    private String currentUsername;
    private String slug;
    private Long id;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/DeleteCommentResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

public class DeleteCommentResult {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FavoriteArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class FavoriteArticle implements Command<FavoriteArticleResult> {

    private String currentUsername;
    private String slug;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FavoriteArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class FavoriteArticleResult {

    private ArticleDto article;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FollowProfile.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class FollowProfile implements Command<FollowProfileResult> {

    private String follower;
    private String followee;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/FollowProfileResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ProfileDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class FollowProfileResult {

    private ProfileDto profile;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/LoginUser.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

import javax.validation.constraints.Email;
import javax.validation.constraints.NotBlank;

@AllArgsConstructor
@Getter
@JsonRootName("user")
public class LoginUser implements Command<LoginUserResult> {

    @Email
    private String email;
    @NotBlank
    private String password;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/LoginUserResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.UserDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class LoginUserResult {

    private UserDto user;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/RegisterUser.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.validation.constraints.Email;
import javax.validation.constraints.NotBlank;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
@JsonRootName("user")
public class RegisterUser implements Command<RegisterUserResult> {

    @Email
    private String email;
    @NotBlank
    private String username;
    @NotBlank
    private String password;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/RegisterUserResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.UserDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class RegisterUserResult {

    private UserDto user;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfavoriteArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class UnfavoriteArticle implements Command<UnfavoriteArticleResult> {

    private String currentUsername;
    private String slug;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfavoriteArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class UnfavoriteArticleResult {

    private ArticleDto article;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfollowProfile.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class UnfollowProfile implements Command<UnfollowProfileResult> {

    private String follower;
    private String followee;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UnfollowProfileResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ProfileDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class UnfollowProfileResult {

    private ProfileDto profile;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;

@AllArgsConstructor
@Builder(toBuilder = true)
@Getter
@JsonRootName("article")
public class UpdateArticle implements Command<UpdateArticleResult> {

    private String slug;
    private String title;
    private String description;
    private String body;
    private String currentUsername;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class UpdateArticleResult {

    private ArticleDto article;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateUser.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.fasterxml.jackson.annotation.JsonRootName;
import com.github.al.realworld.bus.Command;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.With;

import javax.validation.constraints.Email;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
@JsonRootName("user")
public class UpdateUser implements Command<UpdateUserResult> {

    @With
    private String currentUsername;
    @Email
    private String email;
    private String username;
    private String password;
    private String image;
    private String bio;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/command/UpdateUserResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.command;

import com.github.al.realworld.api.dto.UserDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class UpdateUserResult {

    private UserDto user;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/ArticleDto.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.dto;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

import java.time.ZonedDateTime;
import java.util.List;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
public class ArticleDto {

    private String slug;
    private String title;
    private String description;
    private String body;
    private List<String> tagList;
    private ZonedDateTime createdAt;
    private ZonedDateTime updatedAt;
    private Boolean favorited;
    private Integer favoritesCount;
    private ProfileDto author;
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/CommentDto.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.dto;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

import java.time.ZonedDateTime;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
public class CommentDto {

    private Long id;
    private ZonedDateTime createdAt;
    private ZonedDateTime updatedAt;
    private String body;
    private ProfileDto author;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/ProfileDto.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.dto;

import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class ProfileDto {

    private String username;
    private String bio;
    private String image;
    private Boolean following;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/dto/UserDto.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.dto;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Builder
@Getter
public class UserDto {

    private String email;
    private String token;
    private String username;
    private String bio;
    private String image;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/ArticleOperations.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.api.command.AddComment;
import com.github.al.realworld.api.command.AddCommentResult;
import com.github.al.realworld.api.command.CreateArticle;
import com.github.al.realworld.api.command.CreateArticleResult;
import com.github.al.realworld.api.command.FavoriteArticleResult;
import com.github.al.realworld.api.command.UnfavoriteArticleResult;
import com.github.al.realworld.api.command.UpdateArticle;
import com.github.al.realworld.api.command.UpdateArticleResult;
import com.github.al.realworld.api.query.GetArticleResult;
import com.github.al.realworld.api.query.GetArticlesResult;
import com.github.al.realworld.api.query.GetCommentsResult;
import com.github.al.realworld.api.query.GetFeedResult;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseStatus;

import javax.validation.Valid;

public interface ArticleOperations {

    @GetMapping("/articles{?tag,author,favorited,limit,offset}")
    GetArticlesResult findByFilters(@RequestParam(required = false) String tag,
                                    @RequestParam(required = false) String author,
                                    @RequestParam(required = false) String favorited,
                                    @RequestParam(defaultValue = "20") Integer limit,
                                    @RequestParam(defaultValue = "0") Integer offset);

    @ResponseStatus(HttpStatus.CREATED)
    @PostMapping("/articles")
    CreateArticleResult create(@Valid @RequestBody CreateArticle command);

    @GetMapping("/articles/feed")
    GetFeedResult feed(@RequestParam(defaultValue = "20") Integer limit,
                       @RequestParam(defaultValue = "0") Integer offset);

    @GetMapping("/articles/{slug}")
    GetArticleResult findBySlug(@PathVariable("slug") String slug);

    @PutMapping("/articles/{slug}")
    UpdateArticleResult updateBySlug(@PathVariable("slug") String slug, @Valid @RequestBody UpdateArticle command);

    @ResponseStatus(HttpStatus.NO_CONTENT)
    @DeleteMapping("/articles/{slug}")
    void deleteBySlug(@PathVariable("slug") String slug);

    @PostMapping("/articles/{slug}/favorite")
    FavoriteArticleResult favorite(@PathVariable("slug") String slug);

    @DeleteMapping("/articles/{slug}/favorite")
    UnfavoriteArticleResult unfavorite(@PathVariable("slug") String slug);

    @GetMapping("/articles/{slug}/comments")
    GetCommentsResult findAllComments(@PathVariable("slug") String slug);

    @PostMapping("/articles/{slug}/comments")
    AddCommentResult addComment(@PathVariable("slug") String slug, @Valid @RequestBody AddComment command);

    @DeleteMapping("/articles/{slug}/comments/{id}")
    void deleteComment(@PathVariable("slug") String slug, @PathVariable("id") Long id);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/ProfileOperations.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.api.command.FollowProfileResult;
import com.github.al.realworld.api.command.UnfollowProfileResult;
import com.github.al.realworld.api.query.GetProfileResult;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;

public interface ProfileOperations {

    @GetMapping("/profiles/{username}")
    GetProfileResult findByUsername(@PathVariable("username") String username);

    @PostMapping("/profiles/{username}/follow")
    FollowProfileResult follow(@PathVariable("username") String username);

    @DeleteMapping("/profiles/{username}/follow")
    UnfollowProfileResult unfollow(@PathVariable("username") String username);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/TagOperations.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.api.query.GetTagsResult;
import org.springframework.web.bind.annotation.GetMapping;

public interface TagOperations {

    @GetMapping("/tags")
    GetTagsResult findAll();

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/operation/UserOperations.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.operation;

import com.github.al.realworld.api.command.LoginUser;
import com.github.al.realworld.api.command.LoginUserResult;
import com.github.al.realworld.api.command.RegisterUser;
import com.github.al.realworld.api.command.RegisterUserResult;
import com.github.al.realworld.api.command.UpdateUser;
import com.github.al.realworld.api.command.UpdateUserResult;
import com.github.al.realworld.api.query.GetCurrentUserResult;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;

import javax.validation.Valid;

public interface UserOperations {

    @PostMapping("/users/login")
    LoginUserResult login(@Valid @RequestBody LoginUser command);

    @PostMapping("/users")
    RegisterUserResult register(@Valid @RequestBody RegisterUser command);

    @GetMapping("/user")
    GetCurrentUserResult current();

    @PutMapping("/user")
    UpdateUserResult update(@Valid @RequestBody UpdateUser command);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticle.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetArticle implements Query<GetArticleResult> {

    private String currentUsername;
    private String slug;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticleResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetArticleResult {

    private ArticleDto article;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticles.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

@AllArgsConstructor
@NoArgsConstructor
@Builder
@Getter
public class GetArticles implements Query<GetArticlesResult> {

    private String currentUsername;
    private String tag;
    private String author;
    private String favorited;
    private Integer limit;
    private Integer offset;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetArticlesResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;

import java.util.List;

@AllArgsConstructor
@Getter
public class GetArticlesResult {

    private List<ArticleDto> articles;
    private Integer articlesCount;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetComment.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetComment implements Query<GetCommentResult> {

    private String currentUsername;
    private String slug;
    private Long id;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCommentResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.CommentDto;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetCommentResult {

    private CommentDto comment;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetComments.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetComments implements Query<GetCommentsResult> {

    private String currentUsername;
    private String slug;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCommentsResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.CommentDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

import java.util.List;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class GetCommentsResult {

    private List<CommentDto> comments;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCurrentUser.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetCurrentUser implements Query<GetCurrentUserResult> {

    private String username;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetCurrentUserResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.UserDto;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetCurrentUserResult {

    private UserDto user;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetFeed.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetFeed implements Query<GetFeedResult> {

    private String currentUsername;
    private Integer limit;
    private Integer offset;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetFeedResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.ArticleDto;
import lombok.AllArgsConstructor;
import lombok.Getter;

import java.util.List;

@AllArgsConstructor
@Getter
public class GetFeedResult {

    private List<ArticleDto> articles;
    private Integer articlesCount;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetProfile.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;
import lombok.AllArgsConstructor;
import lombok.Getter;

@AllArgsConstructor
@Getter
public class GetProfile implements Query<GetProfileResult> {

    private String currentUsername;
    private String username;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetProfileResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.api.dto.ProfileDto;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

@NoArgsConstructor
@AllArgsConstructor
@Getter
public class GetProfileResult {

    private ProfileDto profile;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetTags.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import com.github.al.realworld.bus.Query;

public class GetTags implements Query<GetTagsResult> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-api/src/main/java/com/github/al/realworld/api/query/GetTagsResult.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.api.query;

import lombok.AllArgsConstructor;
import lombok.Getter;

import java.util.List;

@AllArgsConstructor
@Getter
public class GetTagsResult {

    private List<String> tags;

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/build.gradle.kts
plugins {
    id("io.spring.dependency-management")
    id("org.springframework.boot")
    id("java-conventions")
}

dependencies {
    annotationProcessor("org.projectlombok:lombok")
    compileOnly("org.projectlombok:lombok")

    implementation("org.springframework:spring-context")
}

tasks {
    bootJar {
        enabled = false
    }

    jar {
        enabled = true
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Bus.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public interface Bus {

    <R, C extends Command<R>> R executeCommand(C command);

    <R, Q extends Query<R>> R executeQuery(Q query);
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Command.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public interface Command<R> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/CommandHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public interface CommandHandler<R, C extends Command<R>> {

    R handle(C command);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/CommandHandlerProvider.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import lombok.RequiredArgsConstructor;
import org.springframework.context.ApplicationContext;

@RequiredArgsConstructor
class CommandHandlerProvider<H extends CommandHandler<?, ?>> {

    private final ApplicationContext applicationContext;
    private final Class<H> type;

    H get() {
        return applicationContext.getBean(type);
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/DefaultBus.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Component;

@RequiredArgsConstructor
@Component
public class DefaultBus implements Bus {

    private final Registry registry;

    @SuppressWarnings("unchecked")
    @Override
    public <R, C extends Command<R>> R executeCommand(C command) {
        CommandHandler<R, C> commandHandler = (CommandHandler<R, C>) registry.getCommandHandler(command.getClass());
        return commandHandler.handle(command);
    }

    @SuppressWarnings("unchecked")
    @Override
    public <R, Q extends Query<R>> R executeQuery(Q query) {
        QueryHandler<R, Q> queryHandler = (QueryHandler<R, Q>) registry.getQueryHandler(query.getClass());
        return queryHandler.handle(query);
    }
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Query.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public interface Query<R> {
}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/QueryHandler.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

public interface QueryHandler<R, Q extends Query<R>> {

    R handle(Q query);

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/QueryHandlerProvider.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import lombok.RequiredArgsConstructor;
import org.springframework.context.ApplicationContext;

@RequiredArgsConstructor
class QueryHandlerProvider<H extends QueryHandler<?, ?>> {

    private final ApplicationContext applicationContext;
    private final Class<H> type;

    H get() {
        return applicationContext.getBean(type);
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/service-bus/src/main/java/com/github/al/realworld/bus/Registry.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
package com.github.al.realworld.bus;

import org.springframework.context.ApplicationContext;
import org.springframework.core.GenericTypeResolver;
import org.springframework.stereotype.Component;

import java.util.HashMap;
import java.util.Map;

@SuppressWarnings("unchecked")
@Component
public class Registry {

    private final Map<Class<? extends Command>, CommandHandlerProvider> commandHandlerProviders = new HashMap<>();
    private final Map<Class<? extends Query>, QueryHandlerProvider> queryHandlerProviders = new HashMap<>();

    public Registry(ApplicationContext applicationContext) {
        Map<String, CommandHandler> commandHandlers = applicationContext.getBeansOfType(CommandHandler.class);
        commandHandlers.values().forEach(h -> registerCommandHandler(applicationContext, h));

        Map<String, QueryHandler> queryHandlers = applicationContext.getBeansOfType(QueryHandler.class);
        queryHandlers.values().forEach(h -> registerQueryHandler(applicationContext, h));
    }

    private void registerCommandHandler(ApplicationContext applicationContext, CommandHandler commandHandler) {
        Class<?>[] handlerTypes = GenericTypeResolver.resolveTypeArguments(commandHandler.getClass(), CommandHandler.class);
        Class<? extends Command> commandType = (Class<? extends Command>) handlerTypes[1];
        commandHandlerProviders.put(commandType, new CommandHandlerProvider(applicationContext, commandHandler.getClass()));
    }

    private void registerQueryHandler(ApplicationContext applicationContext, QueryHandler queryHandler) {
        Class<?>[] handlerTypes = GenericTypeResolver.resolveTypeArguments(queryHandler.getClass(), QueryHandler.class);
        Class<? extends Query> queryType = (Class<? extends Query>) handlerTypes[1];
        queryHandlerProviders.put(queryType, new QueryHandlerProvider(applicationContext, queryHandler.getClass()));
    }

    <R, C extends Command<R>> CommandHandler<R, C> getCommandHandler(Class<C> commandType) {
        return commandHandlerProviders.get(commandType).get();
    }

    <R, Q extends Query<R>> QueryHandler<R, Q> getQueryHandler(Class<Q> queryType) {
        return queryHandlerProviders.get(queryType).get();
    }

}

--#

--% E:/desktop-laptop/_rwe/realworld-backend-spring/src/spotless/mit-license.java
/*
 * MIT License
 *
 * Copyright (c) 2020 - present Alexey Lapin
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

--#

