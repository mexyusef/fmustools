@page "/fetchdata"
@using TodoApp.Models

<h1>Todo List</h1>

<p><button class="btn btn-primary" @onclick="LoadData">Load Data</button></p>

@if (todos != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Is Completed</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var todo in todos)
            {
                <tr>
                    <td>@todo.Id</td>
                    <td>@todo.Title</td>
                    <td>@todo.IsCompleted</td>
                    <td>@todo.CreatedAt.ToString("yyyy-MM-dd HH:mm:ss")</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private List<Todo> todos;

    private void LoadData()
    {
        // You can fetch the data from a backend API or manually populate the todos list.
        // For simplicity, let's manually populate the list in this example.

        todos = new List<Todo>
        {
            new Todo { Id = 1, Title = "Complete task 1", IsCompleted = false, CreatedAt = DateTime.Now },
            new Todo { Id = 2, Title = "Complete task 2", IsCompleted = true, CreatedAt = DateTime.Now.AddDays(-1) },
            new Todo { Id = 3, Title = "Complete task 3", IsCompleted = false, CreatedAt = DateTime.Now.AddDays(-2) }
        };
    }
}
